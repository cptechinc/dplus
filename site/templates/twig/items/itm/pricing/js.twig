{% include 'items/itm/pricing/js/classes.js.twig' %}

{#
	var                    Description / Instance of
	-------------------------------------------------
	page                   ProcessWire\Page
#}
$(function() {
	var formPricing = PricingForm.getInstance();

	$("body").on("change", ".unit-price, .unit-qty", function(e) {
		var unitrow = $(this).closest('.unit-row');
		formPricing.updateUnitRow(unitrow);
	});

	/**
	 * Change the Unit of Measure Description when the Unit of Measure is changed
	 */
	$("body").on("change", "#uom_sale", function(e) {
		var inputs = formPricing.inputs;
		var conversion = floatParse(inputs.uom.find('option:selected').data('conversion'));
		var conversionText = inputs.uom.siblings('small').find('.conversion-description');
		conversionText.text(conversion.toFixed(formPricing.config.fields.qty.precision));
		formPricing.updateUnitRows();
	});
});
