{% include 'items/itm/pricing/js/classes.js.twig' %}

{#
	var                    Description / Instance of
	-------------------------------------------------
	page                   ProcessWire\Page
#}
$(function() {
	var formPricing = PricingForm.getInstance();

	$("body").on("change", ".pricebreak-price, .pricebreak-qty", function(e) {
		var unitrow = $(this).closest('.unit-row');
		formPricing.inputs.updateUnitRow(unitrow);
	});

	/**
	 * Change the Unit of Measure Description when the Unit of Measure is changed
	 */
	$("body").on("change", "#uom_sale", function(e) {
		var inputs = formPricing.inputs;
		var conversion = inputs.uom.find('option:selected').data('conversion');
		var conversionText = inputs.uom.siblings('p').find('.conversion-description');
		conversionText.text(conversion);
		formPricing.inputs.updateUnitRows();
	});
});
