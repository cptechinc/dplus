{#
	var                    Description / Instance of
	-------------------------------------------------
	page                   ProcessWire\Page
	manager                Dplus\Codes\Base
#}


{% extends 'code-tables/list-print.twig' %}

{% block print_headings_row %}
	<tr>
		<th colspan="5">
			<div class="w-100 d-flex justify-content-between">
				<div>{{ 'now'|date('m/d/Y h:i A') }}</div>
				<div>{{ page.headline }}</div>
				<div></div>
			</div>
		</th>
	</tr>
{% endblock %}

{% block headings_row %}
	<tr class="bg-dark text-white column-headers">
		{% block headings_columns %}
			<th>Code</th>
			<th>Description</th>
			<th class="text-right">Tax %</th>
			<th>GL Account</th>
			<th>Notes</th>
		{% endblock %}
	</tr>
{% endblock %}

{% for code in codes %}
	{% block code_row %}
		<tr>
			<td>
				<span class="">{{ code.code|replace({' ': '&nbsp;'})|raw }}</span>
			</td>
			<td>{{ code.description }}</td>
			<td class="text-right">{{ code.percent }}</td>
			<td>{{ code.gl_account }} &nbsp; {{ manager.glAcctDescription(code.gl_account) }}</td>
			<td>
				<div class="qnotes" style="overflow-y: auto;">
					{% set note_lines = [code.note1, code.note2, code.note3, code.note4] %}
					{% for line in note_lines if line != '' %}
						{{ line }} <br>
					{% endfor %}
				</div>
				<div class="pl-4">
					{% if code.freight_tax_code %}
						<b>Freight Tax:</b> {{ code.freight_tax_code }} &nbsp; &nbsp; {{ manager.description(code.freight_tax_code) }}
					{% endif %}
				</div>
				<div class="pl-4">
					{% if code.limit %}
						<b>Taxable Limit:</b> {{ code.limit }}
					{% endif %}
				</div>
			</td>
		</tr>
	{% endblock %}
{% endfor %}