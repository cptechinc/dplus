{#
	var / var property      Description / Instance of
	-------------------------------------------------
	user                    ProcessWire\User
	input                   ProcessWire\WireInput
	page                    ProcessWire\Page
	page.custid             Customer ID
	customer                Customer
	customer.contacts       Propel\Runtime\Util\PropelModelPager of Custinde
	customer.salesOrders    Propel\Runtime\Util\PropelModelPager of SalesOrder
	customer.salesHistory   Propel\Runtime\Util\PropelModelPager of Sales History
	customer.quotes         Propel\Runtime\Util\PropelModelPager of Quote
#}
{% set CODETABLES = page.wire('modules').get('CodeTables') %}
{% set COUNTRIES = CODETABLES.getCodeTable('mar', 'cocom') %}
{% set SALESPERSONS = CODETABLES.getCodeTable('mar', 'spm') %}
{% set TYPECODES = CODETABLES.getCodeTable('mar', 'ctm') %}
{% set TERMSCODES = CODETABLES.getCodeTable('mar', 'trm') %}
{% set WAREHOUSES = CODETABLES.getCodeTable('min', 'iwhm') %}
{% set PRICECODES = CODETABLES.getCodeTable('mar', 'cpm') %}
{% set TAXCODES = CODETABLES.getCodeTable('mar', 'tm') %}
{% set USERCODES = CODETABLES.getCodeTable('mar', 'cuc') %}


{% set DPLUS = page.wire('modules').get('Dplus') %}
{% set ARCONTACTS = DPLUS.mar.fetch('ar-contact') %}
{% set PHONEBOOK_CUSTOMER = DPLUS.phoneBooks.fetch('customer') %}
{% set contact = PHONEBOOK_CUSTOMER.findOne(customer.custid) %}
{% set PHONEBOOK_CUSTOMERCONTACTS = DPLUS.phoneBooks.fetch('customer-contact') %}
{% set contactCustomer = PHONEBOOK_CUSTOMERCONTACTS.findOne(customer.custid) %}

{% set CONFIGS = page.wire('modules').get('Dconfigs') %}
{% set configAr = CONFIGS.config('ar') %}


<table class="table table-sm">
	<tr>
		<td class="font-weight-bold">Customer</td>
		<td>
			{{ customer.id }} <br>
			{{ customer.name }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Address</td>
		<td>
			{{ customer.address1 }} <br>
			{% if (customer.address2 is not empty) %}
				{{ customer.address2 }} <br>
			{% endif %}

			{% if (customer.address3 is not empty) %}
				{{ customer.address3 }} <br>
			{% endif %}

			{{ customer.city ~ ', ' ~ customer.state ~ ' ' ~ customer.zip }} <br>
			{{ COUNTRIES.description(customer.country) }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Number of Shiptos</td>
		<td>{{ customer.count_shiptos() }}</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Sales Person 1</td>
		<td>
			{{ customer.salesperson1 }} - {{ SALESPERSONS.name(customer.salesperson1) }}
		</td>
	</tr>
	{% if customer.salesperson2 %}
		<tr>
			<td class="font-weight-bold">Sales Person 2</td>
			<td>
				{{ customer.salesperson2 }} - {{ SALESPERSONS.name(customer.salesperson2) }}
			</td>
		</tr>
	{% endif %}
	{% if customer.salesperson3 %}
		<tr>
			<td class="font-weight-bold">Sales Person 3</td>
			<td>
				{{ customer.salesperson3 }} - {{ SALESPERSONS.name(customer.salesperson3) }}
			</td>
		</tr>
	{% endif %}
	<tr>
		<td class="font-weight-bold">Phone</td>
		<td>
			{{ contact.isInternational() ? contact.international :  contact.phone|phone_us }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Cell</td>
		<td>
			{{ contact.isInternational() ? contact.cellphone_international :  contact.cellphone|phone_us }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Fax</td>
		<td>
			{{ contact.isInternational() ? contact.fax_international :  contact.fax|phone_us }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Email</td>
		<td>{{ contact.email }}</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Contact</td>
		<td>
			{{ ARCONTACTS.hasPrimaryBuyer(customer.custid) ? ARCONTACTS.primaryBuyer(customer.custid).contactid : ARCONTACTS.buyer(customer.custid).contactid }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Phone</td>
		<td>
			{{ contactCustomer.isInternational() ? contactCustomer.international :  contactCustomer.phone|phone_us }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Cell</td>
		<td>
			{{ contactCustomer.isInternational() ? contactCustomer.cellphone_international :  contactCustomer.cellphone|phone_us }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Fax</td>
		<td>
			{{ contactCustomer.isInternational() ? contactCustomer.fax_international :  contactCustomer.fax|phone_us }}
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Email</td>
		<td>{{ contactCustomer.email }}</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Warehouse</td>
		<td>
			<div class="row">
				<div class="col-sm-4">{{ customer.warehouse }}</div>
				<div class="col-sm-8">{{ WAREHOUSES.name(customer.warehouse) }}</div>
			</div>
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Ship Via</td>
		<td>
			<div class="row">
				<div class="col-sm-4">{{ customer.shipvia.code }}</div>
				<div class="col-sm-8">{{ customer.shipvia.description }}</div>
			</div> 
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Tax Code</td>
		<td>
			<div class="row">
				<div class="col-sm-4">{{ customer.taxcode }}</div>
				<div class="col-sm-8">{{ TAXCODES.description(customer.taxcode) }}</div>
			</div>
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Tax Exempt</td>
		<td>{{ customer.is_taxexempt() ? customer.taxexemptcode : 'N/A' }}</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Terms</td>
		<td> 
			<div class="row">
				<div class="col-sm-4">{{ customer.termscode }}</div>
				<div class="col-sm-8">{{ TERMSCODES.description(customer.termscode) }}</div>
			</div> 
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Type Code</td>
		<td>
			<div class="row">
				<div class="col-sm-4">{{ customer.type }}</div>
				<div class="col-sm-8">{{ TYPECODES.description(customer.type) }}</div>
			</div> 
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Price Code</td>
		<td>
			<div class="row">
				<div class="col-sm-4">{{ customer.pricecode }}</div>
				<div class="col-sm-8">{{ PRICECODES.description(customer.pricecode) }}</div>
			</div> 
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Credit Hold</td>
		<td>{{ customer.credithold() }}</td>
	</tr>
	<tr>
		<td class="font-weight-bold">{{ configAr.custlabel ? configAr.custlabel : 'User Code' }}</td>
		<td>
			<div class="row">
				<div class="col-sm-4">{{ customer.usercode }}</div>
				<div class="col-sm-8">{{ USERCODES.description(customer.usercode) }}</div>
			</div> 
		</td>
	</tr>
	<tr>
		<td class="font-weight-bold">Date Entered</td>
		<td>{{ customer.dateentered|convertdate }}</td>
	</tr>
</table>