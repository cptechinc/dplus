{% set values      = input.get %}
{% set segments    = input.urlSegments() %}
{% set lastsegment = segments[segments|length] %}



{% include 'dplus-menu/menu-search-form.twig' with {'page': pages.get('/')} %}

<div class="mb-3">
	{% if page.parent().template == 'dplus-menu' or page.parent().template == 'warehouse-menu' %}
		<a href="{{ page.parent().url }}" class="btn btn-primary">
			<i class="fa fa-undo" aria-hidden="true"></i> &nbsp;
			Back to {{ page.parent().title }}
		</a>
	{% endif %}

	{% if segments|length %}
		{% set title = page.dplus_function ? page.dplus_function|upper : page.title %}
		{% set title = page.wire('hooks').isHooked('Page::menuTitle()') ? page.menuTitle() : title %}

		<a href="{{ page.url }}" class="btn btn-primary">
			<i class="fa fa-undo" aria-hidden="true"></i> &nbsp;
			Back to {{ title }}
		</a>
	{% endif %}
</div>

<div class="list-group dplus-menu">
	{% for key, function  in functions %}
		<a href="{{ page.subfunctionUrl(key) }}" class="list-group-item list-group-item-action">
			<div class="row align-items-center">
				<div class="col-4">
					<i class="fa fa-microchip" aria-hidden="true"></i>
					&nbsp; &nbsp;
					<strong>
						{{ function.title }} {% if function.permission %} ({{ function.permission }}) {% endif %}
					</strong>
					<br>
				</div>
				<div class="col-8">
					<small>
						{{ function.summary }}
					</small>
				</div>
			</div>
		</a>
	{% endfor %}
</div>
