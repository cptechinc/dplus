/* =============================================================
* Project: Bootstrap Notify = v3.1.5
* Description: Turns standard Bootstrap alerts into "Growl-like" notifications.
* Author: Mouse0270 aka Robert McIntosh
* License: MIT License
* Website: https://github.com/mouse0270/bootstrap-growl
 ============================================================ */
/* global define:false, require: false, jQuery:false */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function s(s){var i=!1;return t('[data-notify="container"]').each(function(e,n){var a=t(n),o=a.find('[data-notify="title"]').html().trim(),l=a.find('[data-notify="message"]').html().trim(),r=o===t("<div>"+s.settings.content.title+"</div>").html().trim(),d=l===t("<div>"+s.settings.content.message+"</div>").html().trim(),c=a.hasClass("alert-"+s.settings.type);return r&&d&&c&&(i=!0),!i}),i}function i(i,n,a){var o={content:{message:"object"==typeof n?n.message:n,title:n.title?n.title:"",icon:n.icon?n.icon:"",url:n.url?n.url:"#",target:n.target?n.target:"-"}};a=t.extend(!0,{},o,a),this.settings=t.extend(!0,{},e,a),this._defaults=e,"-"===this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),(this.settings.allow_duplicates||!this.settings.allow_duplicates&&!s(this))&&this.init()}var e={element:"body",position:null,type:"info",allow_dismiss:!0,allow_duplicates:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,onClick:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){var t=arguments;return arguments[0].replace(/(\{\{\d\}\}|\{\d\})/g,function(s){if("{{"===s.substring(0,2))return s;var i=parseInt(s.match(/\d/)[0]);return t[i+1]})},t.extend(i.prototype,{init:function(){var t=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(s,i){var e={};"string"==typeof s?e[s]=i:e=s;for(var n in e)switch(n){case"type":this.$ele.removeClass("alert-"+t.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+t.settings.type),t.settings.type=e[n],this.$ele.addClass("alert-"+e[n]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+e[n]);break;case"icon":var a=this.$ele.find('[data-notify="icon"]');"class"===t.settings.icon_type.toLowerCase()?a.removeClass(t.settings.content.icon).addClass(e[n]):"material-icon"===t.settings.icon_type.toLowerCase()?a.removeClass(t.settings.content.icon).addClass("material-icons").html(e[n]):(a.is("img")||a.find("img"),a.attr("src",e[n])),t.settings.content.icon=e[s];break;case"progress":var o=t.settings.delay-t.settings.delay*(e[n]/100);this.$ele.data("notify-delay",o),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",e[n]).css("width",e[n]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",e[n]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",e[n]);break;default:this.$ele.find('[data-notify="'+n+'"]').html(e[n])}var l=this.$ele.outerHeight()+parseInt(t.settings.spacing)+parseInt(t.settings.offset.y);t.reposition(l)},close:function(){t.close()}}},buildNotify:function(){var s=this.settings.content;this.$ele=t(String.format(this.settings.template,this.settings.type,s.title,s.message,s.url,s.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):"material-icon"===this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass("material-icons").html(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var s=this,i=this.settings.offset.y,e={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},n=!1,a=this.settings;switch(t('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){i=Math.max(i,parseInt(t(this).css(a.placement.from))+parseInt(t(this).outerHeight())+parseInt(a.spacing))}),!0===this.settings.newest_on_top&&(i=this.settings.offset.y),e[this.settings.placement.from]=i+"px",this.settings.placement.align){case"left":case"right":e[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":e.left=0,e.right=0}this.$ele.css(e).addClass(this.settings.animate.enter),t.each(Array("webkit-","moz-","o-","ms-",""),function(t,i){s.$ele[0].style[i+"AnimationIterationCount"]=1}),t(this.settings.element).append(this.$ele),!0===this.settings.newest_on_top&&(i=parseInt(i)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(i)),t.isFunction(s.settings.onShow)&&s.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(){n=!0}).one(this.animations.end,function(){s.$ele.removeClass(s.settings.animate.enter),t.isFunction(s.settings.onShown)&&s.settings.onShown.call(this)}),setTimeout(function(){n||t.isFunction(s.settings.onShown)&&s.settings.onShown.call(this)},600)},bind:function(){var s=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){s.close()}),t.isFunction(s.settings.onClick)&&this.$ele.on("click",function(t){t.target!=s.$ele.find('[data-notify="dismiss"]')[0]&&s.settings.onClick.call(this,t)}),this.$ele.mouseover(function(){t(this).data("data-hover","true")}).mouseout(function(){t(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){s.$ele.data("notify-delay",s.settings.delay);var i=setInterval(function(){var t=parseInt(s.$ele.data("notify-delay"))-s.settings.timer;if("false"===s.$ele.data("data-hover")&&"pause"===s.settings.mouse_over||"pause"!=s.settings.mouse_over){var e=(s.settings.delay-t)/s.settings.delay*100;s.$ele.data("notify-delay",t),s.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",e).css("width",e+"%")}t<=-s.settings.timer&&(clearInterval(i),s.close())},s.settings.timer)}},close:function(){var s=this,i=parseInt(this.$ele.css(this.settings.placement.from)),e=!1;this.$ele.attr("data-closing","true").addClass(this.settings.animate.exit),s.reposition(i),t.isFunction(s.settings.onClose)&&s.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(){e=!0}).one(this.animations.end,function(){t(this).remove(),t.isFunction(s.settings.onClosed)&&s.settings.onClosed.call(this)}),setTimeout(function(){e||(s.$ele.remove(),s.settings.onClosed&&s.settings.onClosed(s.$ele))},600)},reposition:function(s){var i=this,e='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',n=this.$ele.nextAll(e);!0===this.settings.newest_on_top&&(n=this.$ele.prevAll(e)),n.each(function(){t(this).css(i.settings.placement.from,s),s=parseInt(s)+parseInt(i.settings.spacing)+t(this).outerHeight()})}}),t.notify=function(t,s){return new i(this,t,s).notify},t.notifyDefaults=function(s){return e=t.extend(!0,{},e,s)},t.notifyClose=function(s){void 0===s||"all"===s?t("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):"success"===s||"info"===s||"warning"===s||"danger"===s?t(".alert-"+s+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):s?t(s+"[data-notify]").find('[data-notify="dismiss"]').trigger("click"):t('[data-notify-position="'+s+'"]').find('[data-notify="dismiss"]').trigger("click")},t.notifyCloseExcept=function(s){"success"===s||"info"===s||"warning"===s||"danger"===s?t("[data-notify]").not(".alert-"+s).find('[data-notify="dismiss"]').trigger("click"):t("[data-notify]").not(s).find('[data-notify="dismiss"]').trigger("click")}}),$.notifyDefaults({element:"body",position:null,allow_dismiss:!0,newest_on_top:!1,showProgressbar:!0,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:9e3,delay:5e3,timer:1e3,mouse_over:"pause",animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-5 col-md-4 notify-alert alert-{0}" role="alert" data-notify-position="top-right" data-closing="true"><div class="row"><table class="table table-condensed no-bottom"><tr><td class="notify-icon text-center"><div class=""> <i data-notify="icon"></i> </div></td><td><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><div class="panel-body panel-light"><span data-notify="title"><b>{1}</b></span> <span data-notify="message">{2}</span></div></td></tr></table><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div></div>'});


/*! ========================================================================
 * Bootstrap Toggle: bootstrap-toggle.js v2.2.0
 * http://www.bootstraptoggle.com
 * ======================================================================== */
+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.toggle"),f="object"==typeof b&&b;e||d.data("bs.toggle",e=new c(this,f)),"string"==typeof b&&e[b]&&e[b]()})}var c=function(b,c){this.$element=a(b),this.options=a.extend({},this.defaults(),c),this.render()};c.VERSION="2.2.0",c.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"normal",style:"",width:null,height:null},c.prototype.defaults=function(){return{on:this.$element.attr("data-on")||c.DEFAULTS.on,off:this.$element.attr("data-off")||c.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||c.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||c.DEFAULTS.offstyle,size:this.$element.attr("data-size")||c.DEFAULTS.size,style:this.$element.attr("data-style")||c.DEFAULTS.style,width:this.$element.attr("data-width")||c.DEFAULTS.width,height:this.$element.attr("data-height")||c.DEFAULTS.height}},c.prototype.render=function(){this._onstyle="btn-"+this.options.onstyle,this._offstyle="btn-"+this.options.offstyle;var b="large"===this.options.size?"btn-lg":"small"===this.options.size?"btn-sm":"mini"===this.options.size?"btn-xs":"",c=a('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+b),d=a('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+b+" active"),e=a('<span class="toggle-handle btn btn-default">').addClass(b),f=a('<div class="toggle-group">').append(c,d,e),g=a('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(b).addClass(this.options.style);this.$element.wrap(g),a.extend(this,{$toggle:this.$element.parent(),$toggleOn:c,$toggleOff:d,$toggleGroup:f}),this.$toggle.append(f);var h=this.options.width||Math.max(c.outerWidth(),d.outerWidth())+e.outerWidth()/2,i=this.options.height||Math.max(c.outerHeight(),d.outerHeight());c.addClass("toggle-on"),d.addClass("toggle-off"),this.$toggle.css({width:h,height:i}),this.options.height&&(c.css("line-height",c.height()+"px"),d.css("line-height",d.height()+"px")),this.update(!0),this.trigger(!0)},c.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()},c.prototype.on=function(a){return this.$element.prop("disabled")?!1:(this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle),this.$element.prop("checked",!0),void(a||this.trigger()))},c.prototype.off=function(a){return this.$element.prop("disabled")?!1:(this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off"),this.$element.prop("checked",!1),void(a||this.trigger()))},c.prototype.enable=function(){this.$toggle.removeAttr("disabled"),this.$element.prop("disabled",!1)},c.prototype.disable=function(){this.$toggle.attr("disabled","disabled"),this.$element.prop("disabled",!0)},c.prototype.update=function(a){this.$element.prop("disabled")?this.disable():this.enable(),this.$element.prop("checked")?this.on(a):this.off(a)},c.prototype.trigger=function(b){this.$element.off("change.bs.toggle"),b||this.$element.change(),this.$element.on("change.bs.toggle",a.proxy(function(){this.update()},this))},c.prototype.destroy=function(){this.$element.off("change.bs.toggle"),this.$toggleGroup.remove(),this.$element.removeData("bs.toggle"),this.$element.unwrap()};var d=a.fn.bootstrapToggle;a.fn.bootstrapToggle=b,a.fn.bootstrapToggle.Constructor=c,a.fn.toggle.noConflict=function(){return a.fn.bootstrapToggle=d,this},a(function(){a("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()}),a(document).on("click.bs.toggle","div[data-toggle^=toggle]",function(b){var c=a(this).find("input[type=checkbox]");c.bootstrapToggle("toggle"),b.preventDefault()})}(jQuery);
//# sourceMappingURL=/bootstrap-toggle.min.js.map


/* =========================================================
 * URI.js v1.18.4 http://medialize.github.io/URI.js/
 * IPv6.js, punycode.js, SecondLevelDomains.js, URI.js, URITemplate.js
 * ========================================================= */
(function(f,l){"object"===typeof module&&module.exports?module.exports=l():"function"===typeof define&&define.amd?define(l):f.IPv6=l(f)})(this,function(f){var l=f&&f.IPv6;return{best:function(g){g=g.toLowerCase().split(":");var k=g.length,b=8;""===g[0]&&""===g[1]&&""===g[2]?(g.shift(),g.shift()):""===g[0]&&""===g[1]?g.shift():""===g[k-1]&&""===g[k-2]&&g.pop();k=g.length;-1!==g[k-1].indexOf(".")&&(b=7);var m;for(m=0;m<k&&""!==g[m];m++);if(m<b)for(g.splice(m,1,"0000");g.length<b;)g.splice(m,0,"0000");
for(m=0;m<b;m++){for(var k=g[m].split(""),f=0;3>f;f++)if("0"===k[0]&&1<k.length)k.splice(0,1);else break;g[m]=k.join("")}var k=-1,l=f=0,h=-1,q=!1;for(m=0;m<b;m++)q?"0"===g[m]?l+=1:(q=!1,l>f&&(k=h,f=l)):"0"===g[m]&&(q=!0,h=m,l=1);l>f&&(k=h,f=l);1<f&&g.splice(k,f,"");k=g.length;b="";""===g[0]&&(b=":");for(m=0;m<k;m++){b+=g[m];if(m===k-1)break;b+=":"}""===g[k-1]&&(b+=":");return b},noConflict:function(){f.IPv6===this&&(f.IPv6=l);return this}}});
(function(f){function l(b){throw new RangeError(e[b]);}function g(b,e){for(var g=b.length,h=[];g--;)h[g]=e(b[g]);return h}function k(b,e){var h=b.split("@"),f="";1<h.length&&(f=h[0]+"@",b=h[1]);b=b.replace(u,".");h=b.split(".");h=g(h,e).join(".");return f+h}function b(b){for(var e=[],h=0,g=b.length,f,a;h<g;)f=b.charCodeAt(h++),55296<=f&&56319>=f&&h<g?(a=b.charCodeAt(h++),56320==(a&64512)?e.push(((f&1023)<<10)+(a&1023)+65536):(e.push(f),h--)):e.push(f);return e}function m(b){return g(b,function(b){var e=
"";65535<b&&(b-=65536,e+=r(b>>>10&1023|55296),b=56320|b&1023);return e+=r(b)}).join("")}function z(b,e){return b+22+75*(26>b)-((0!=e)<<5)}function v(b,e,h){var g=0;b=h?p(b/700):b>>1;for(b+=p(b/e);455<b;g+=36)b=p(b/35);return p(g+36*b/(b+38))}function h(b){var e=[],h=b.length,g,f=0,a=128,c=72,d,n,t,w,k;d=b.lastIndexOf("-");0>d&&(d=0);for(n=0;n<d;++n)128<=b.charCodeAt(n)&&l("not-basic"),e.push(b.charCodeAt(n));for(d=0<d?d+1:0;d<h;){n=f;g=1;for(t=36;;t+=36){d>=h&&l("invalid-input");w=b.charCodeAt(d++);
w=10>w-48?w-22:26>w-65?w-65:26>w-97?w-97:36;(36<=w||w>p((2147483647-f)/g))&&l("overflow");f+=w*g;k=t<=c?1:t>=c+26?26:t-c;if(w<k)break;w=36-k;g>p(2147483647/w)&&l("overflow");g*=w}g=e.length+1;c=v(f-n,g,0==n);p(f/g)>2147483647-a&&l("overflow");a+=p(f/g);f%=g;e.splice(f++,0,a)}return m(e)}function q(e){var h,g,f,k,a,c,d,n,t,w=[],q,m,A;e=b(e);q=e.length;h=128;g=0;a=72;for(c=0;c<q;++c)t=e[c],128>t&&w.push(r(t));for((f=k=w.length)&&w.push("-");f<q;){d=2147483647;for(c=0;c<q;++c)t=e[c],t>=h&&t<d&&(d=t);
m=f+1;d-h>p((2147483647-g)/m)&&l("overflow");g+=(d-h)*m;h=d;for(c=0;c<q;++c)if(t=e[c],t<h&&2147483647<++g&&l("overflow"),t==h){n=g;for(d=36;;d+=36){t=d<=a?1:d>=a+26?26:d-a;if(n<t)break;A=n-t;n=36-t;w.push(r(z(t+A%n,0)));n=p(A/n)}w.push(r(z(n,0)));a=v(g,m,f==k);g=0;++f}++g;++h}return w.join("")}var A="object"==typeof exports&&exports&&!exports.nodeType&&exports,C="object"==typeof module&&module&&!module.nodeType&&module,D="object"==typeof global&&global;if(D.global===D||D.window===D||D.self===D)f=
D;var x,E=/^xn--/,y=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,r=String.fromCharCode,B;x={version:"1.3.2",ucs2:{decode:b,encode:m},decode:h,encode:q,toASCII:function(b){return k(b,function(b){return y.test(b)?"xn--"+q(b):b})},toUnicode:function(b){return k(b,function(b){return E.test(b)?h(b.slice(4).toLowerCase()):b})}};if("function"==
typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return x});else if(A&&C)if(module.exports==A)C.exports=x;else for(B in x)x.hasOwnProperty(B)&&(A[B]=x[B]);else f.punycode=x})(this);
(function(f,l){"object"===typeof module&&module.exports?module.exports=l():"function"===typeof define&&define.amd?define(l):f.SecondLevelDomains=l(f)})(this,function(f){var l=f&&f.SecondLevelDomains,g={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",
bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",
ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",
es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",
id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",
kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",
mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",
ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",
ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",
tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",
rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",
tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",
us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(f){var b=f.lastIndexOf(".");if(0>=b||b>=f.length-1)return!1;
var k=f.lastIndexOf(".",b-1);if(0>=k||k>=b-1)return!1;var l=g.list[f.slice(b+1)];return l?0<=l.indexOf(" "+f.slice(k+1,b)+" "):!1},is:function(f){var b=f.lastIndexOf(".");if(0>=b||b>=f.length-1||0<=f.lastIndexOf(".",b-1))return!1;var k=g.list[f.slice(b+1)];return k?0<=k.indexOf(" "+f.slice(0,b)+" "):!1},get:function(f){var b=f.lastIndexOf(".");if(0>=b||b>=f.length-1)return null;var k=f.lastIndexOf(".",b-1);if(0>=k||k>=b-1)return null;var l=g.list[f.slice(b+1)];return!l||0>l.indexOf(" "+f.slice(k+
1,b)+" ")?null:f.slice(k+1)},noConflict:function(){f.SecondLevelDomains===this&&(f.SecondLevelDomains=l);return this}};return g});
(function(f,l){"object"===typeof module&&module.exports?module.exports=l(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"===typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],l):f.URI=l(f.punycode,f.IPv6,f.SecondLevelDomains,f)})(this,function(f,l,g,k){function b(a,c){var d=1<=arguments.length,n=2<=arguments.length;if(!(this instanceof b))return d?n?new b(a,c):new b(a):new b;if(void 0===a){if(d)throw new TypeError("undefined is not a valid argument for URI");
a="undefined"!==typeof location?location.href+"":""}this.href(a);return void 0!==c?this.absoluteTo(c):this}function m(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function z(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function v(a){return"Array"===z(a)}function h(a,c){var d={},b,t;if("RegExp"===z(c))d=null;else if(v(c))for(b=0,t=c.length;b<t;b++)d[c[b]]=!0;else d[c]=!0;b=0;for(t=a.length;b<t;b++)if(d&&void 0!==d[a[b]]||!d&&c.test(a[b]))a.splice(b,
1),t--,b--;return a}function q(a,c){var d,b;if(v(c)){d=0;for(b=c.length;d<b;d++)if(!q(a,c[d]))return!1;return!0}var t=z(c);d=0;for(b=a.length;d<b;d++)if("RegExp"===t){if("string"===typeof a[d]&&a[d].match(c))return!0}else if(a[d]===c)return!0;return!1}function A(a,c){if(!v(a)||!v(c)||a.length!==c.length)return!1;a.sort();c.sort();for(var d=0,b=a.length;d<b;d++)if(a[d]!==c[d])return!1;return!0}function C(a){return a.replace(/^\/+|\/+$/g,"")}function D(a){return escape(a)}function x(a){return encodeURIComponent(a).replace(/[!'()*]/g,
D).replace(/\*/g,"%2A")}function E(a){return function(c,d){if(void 0===c)return this._parts[a]||"";this._parts[a]=c||null;this.build(!d);return this}}function y(a,c){return function(d,b){if(void 0===d)return this._parts[a]||"";null!==d&&(d+="",d.charAt(0)===c&&(d=d.substring(1)));this._parts[a]=d;this.build(!b);return this}}var u=k&&k.URI;b.version="1.18.4";var e=b.prototype,p=Object.prototype.hasOwnProperty;b._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,
port:null,path:null,query:null,fragment:null,duplicateQueryParameters:b.duplicateQueryParameters,escapeQuerySpace:b.escapeQuerySpace}};b.duplicateQueryParameters=!1;b.escapeQuerySpace=!0;b.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;b.idn_expression=/[^a-z0-9\.-]/i;b.punycode_expression=/(xn--)/i;b.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;b.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
b.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;b.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g};b.defaultPorts={http:"80",https:"443",ftp:"21",
gopher:"70",ws:"80",wss:"443"};b.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;b.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};b.getDomAttribute=function(a){if(a&&a.nodeName){var c=a.nodeName.toLowerCase();if("input"!==c||"image"===a.type)return b.domAttributes[c]}};b.encode=x;b.decode=decodeURIComponent;b.iso8859=function(){b.encode=escape;b.decode=
unescape};b.unicode=function(){b.encode=x;b.decode=decodeURIComponent};b.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'",
"%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}};b.encodeQuery=function(a,c){var d=b.encode(a+"");void 0===c&&(c=b.escapeQuerySpace);return c?d.replace(/%20/g,"+"):d};b.decodeQuery=function(a,c){a+="";void 0===c&&
(c=b.escapeQuerySpace);try{return b.decode(c?a.replace(/\+/g,"%20"):a)}catch(d){return a}};var r={encode:"encode",decode:"decode"},B,F=function(a,c){return function(d){try{return b[c](d+"").replace(b.characters[a][c].expression,function(d){return b.characters[a][c].map[d]})}catch(n){return d}}};for(B in r)b[B+"PathSegment"]=F("pathname",r[B]),b[B+"UrnPathSegment"]=F("urnpath",r[B]);r=function(a,c,d){return function(n){var t;t=d?function(a){return b[c](b[d](a))}:b[c];n=(n+"").split(a);for(var e=0,
f=n.length;e<f;e++)n[e]=t(n[e]);return n.join(a)}};b.decodePath=r("/","decodePathSegment");b.decodeUrnPath=r(":","decodeUrnPathSegment");b.recodePath=r("/","encodePathSegment","decode");b.recodeUrnPath=r(":","encodeUrnPathSegment","decode");b.encodeReserved=F("reserved","encode");b.parse=function(a,c){var d;c||(c={});d=a.indexOf("#");-1<d&&(c.fragment=a.substring(d+1)||null,a=a.substring(0,d));d=a.indexOf("?");-1<d&&(c.query=a.substring(d+1)||null,a=a.substring(0,d));"//"===a.substring(0,2)?(c.protocol=
null,a=a.substring(2),a=b.parseAuthority(a,c)):(d=a.indexOf(":"),-1<d&&(c.protocol=a.substring(0,d)||null,c.protocol&&!c.protocol.match(b.protocol_expression)?c.protocol=void 0:"//"===a.substring(d+1,d+3)?(a=a.substring(d+3),a=b.parseAuthority(a,c)):(a=a.substring(d+1),c.urn=!0)));c.path=a;return c};b.parseHost=function(a,c){a=a.replace(/\\/g,"/");var d=a.indexOf("/"),b;-1===d&&(d=a.length);if("["===a.charAt(0))b=a.indexOf("]"),c.hostname=a.substring(1,b)||null,c.port=a.substring(b+2,d)||null,"/"===
c.port&&(c.port=null);else{var e=a.indexOf(":");b=a.indexOf("/");e=a.indexOf(":",e+1);-1!==e&&(-1===b||e<b)?(c.hostname=a.substring(0,d)||null,c.port=null):(b=a.substring(0,d).split(":"),c.hostname=b[0]||null,c.port=b[1]||null)}c.hostname&&"/"!==a.substring(d).charAt(0)&&(d++,a="/"+a);return a.substring(d)||"/"};b.parseAuthority=function(a,c){a=b.parseUserinfo(a,c);return b.parseHost(a,c)};b.parseUserinfo=function(a,c){var d=a.indexOf("/"),n=a.lastIndexOf("@",-1<d?d:a.length-1);-1<n&&(-1===d||n<d)?
(d=a.substring(0,n).split(":"),c.username=d[0]?b.decode(d[0]):null,d.shift(),c.password=d[0]?b.decode(d.join(":")):null,a=a.substring(n+1)):(c.username=null,c.password=null);return a};b.parseQuery=function(a,c){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var d={},n=a.split("&"),e=n.length,f,h,g=0;g<e;g++)if(f=n[g].split("="),h=b.decodeQuery(f.shift(),c),f=f.length?b.decodeQuery(f.join("="),c):null,p.call(d,h)){if("string"===typeof d[h]||null===d[h])d[h]=[d[h]];
d[h].push(f)}else d[h]=f;return d};b.build=function(a){var c="";a.protocol&&(c+=a.protocol+":");a.urn||!c&&!a.hostname||(c+="//");c+=b.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(c+="/"),c+=a.path);"string"===typeof a.query&&a.query&&(c+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(c+="#"+a.fragment);return c};b.buildHost=function(a){var c="";if(a.hostname)c=b.ip6_expression.test(a.hostname)?c+("["+a.hostname+"]"):c+a.hostname;
else return"";a.port&&(c+=":"+a.port);return c};b.buildAuthority=function(a){return b.buildUserinfo(a)+b.buildHost(a)};b.buildUserinfo=function(a){var c="";a.username&&(c+=b.encode(a.username));a.password&&(c+=":"+b.encode(a.password));c&&(c+="@");return c};b.buildQuery=function(a,c,d){var n="",e,f,h,g;for(f in a)if(p.call(a,f)&&f)if(v(a[f]))for(e={},h=0,g=a[f].length;h<g;h++)void 0!==a[f][h]&&void 0===e[a[f][h]+""]&&(n+="&"+b.buildQueryParameter(f,a[f][h],d),!0!==c&&(e[a[f][h]+""]=!0));else void 0!==
a[f]&&(n+="&"+b.buildQueryParameter(f,a[f],d));return n.substring(1)};b.buildQueryParameter=function(a,c,d){return b.encodeQuery(a,d)+(null!==c?"="+b.encodeQuery(c,d):"")};b.addQuery=function(a,c,d){if("object"===typeof c)for(var n in c)p.call(c,n)&&b.addQuery(a,n,c[n]);else if("string"===typeof c)void 0===a[c]?a[c]=d:("string"===typeof a[c]&&(a[c]=[a[c]]),v(d)||(d=[d]),a[c]=(a[c]||[]).concat(d));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};b.removeQuery=
function(a,c,d){var n;if(v(c))for(d=0,n=c.length;d<n;d++)a[c[d]]=void 0;else if("RegExp"===z(c))for(n in a)c.test(n)&&(a[n]=void 0);else if("object"===typeof c)for(n in c)p.call(c,n)&&b.removeQuery(a,n,c[n]);else if("string"===typeof c)void 0!==d?"RegExp"===z(d)?!v(a[c])&&d.test(a[c])?a[c]=void 0:a[c]=h(a[c],d):a[c]!==String(d)||v(d)&&1!==d.length?v(a[c])&&(a[c]=h(a[c],d)):a[c]=void 0:a[c]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");
};b.hasQuery=function(a,c,d,n){switch(z(c)){case "String":break;case "RegExp":for(var e in a)if(p.call(a,e)&&c.test(e)&&(void 0===d||b.hasQuery(a,e,d)))return!0;return!1;case "Object":for(var f in c)if(p.call(c,f)&&!b.hasQuery(a,f,c[f]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter");}switch(z(d)){case "Undefined":return c in a;case "Boolean":return a=!(v(a[c])?!a[c].length:!a[c]),d===a;case "Function":return!!d(a[c],
c,a);case "Array":return v(a[c])?(n?q:A)(a[c],d):!1;case "RegExp":return v(a[c])?n?q(a[c],d):!1:!(!a[c]||!a[c].match(d));case "Number":d=String(d);case "String":return v(a[c])?n?q(a[c],d):!1:a[c]===d;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};b.joinPaths=function(){for(var a=[],c=[],d=0,n=0;n<arguments.length;n++){var e=new b(arguments[n]);a.push(e);for(var e=e.segment(),f=0;f<e.length;f++)"string"===typeof e[f]&&
c.push(e[f]),e[f]&&d++}if(!c.length||!d)return new b("");c=(new b("")).segment(c);""!==a[0].path()&&"/"!==a[0].path().slice(0,1)||c.path("/"+c.path());return c.normalize()};b.commonPath=function(a,c){var d=Math.min(a.length,c.length),b;for(b=0;b<d;b++)if(a.charAt(b)!==c.charAt(b)){b--;break}if(1>b)return a.charAt(0)===c.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(b)||"/"!==c.charAt(b))b=a.substring(0,b).lastIndexOf("/");return a.substring(0,b+1)};b.withinString=function(a,c,d){d||(d={});
var e=d.start||b.findUri.start,f=d.end||b.findUri.end,h=d.trim||b.findUri.trim,g=d.parens||b.findUri.parens,q=/[a-z0-9-]=["']?$/i;for(e.lastIndex=0;;){var k=e.exec(a);if(!k)break;k=k.index;if(d.ignoreHtml){var l=a.slice(Math.max(k-3,0),k);if(l&&q.test(l))continue}for(var p=k+a.slice(k).search(f),l=a.slice(k,p),p=-1;;){var m=g.exec(l);if(!m)break;p=Math.max(p,m.index+m[0].length)}l=-1<p?l.slice(0,p)+l.slice(p+1).replace(h,""):l.replace(h,"");d.ignore&&d.ignore.test(l)||(p=k+l.length,l=c(l,k,p,a),void 0===
l?e.lastIndex=p:(l=String(l),a=a.slice(0,k)+l+a.slice(p),e.lastIndex=k+l.length))}e.lastIndex=0;return a};b.ensureValidHostname=function(a){if(a.match(b.invalid_hostname_characters)){if(!f)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(f.toASCII(a).match(b.invalid_hostname_characters))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');}};b.noConflict=function(a){if(a)return a={URI:this.noConflict()},
k.URITemplate&&"function"===typeof k.URITemplate.noConflict&&(a.URITemplate=k.URITemplate.noConflict()),k.IPv6&&"function"===typeof k.IPv6.noConflict&&(a.IPv6=k.IPv6.noConflict()),k.SecondLevelDomains&&"function"===typeof k.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=k.SecondLevelDomains.noConflict()),a;k.URI===this&&(k.URI=u);return this};e.build=function(a){if(!0===a)this._deferred_build=!0;else if(void 0===a||this._deferred_build)this._string=b.build(this._parts),this._deferred_build=
!1;return this};e.clone=function(){return new b(this)};e.valueOf=e.toString=function(){return this.build(!1)._string};e.protocol=E("protocol");e.username=E("username");e.password=E("password");e.hostname=E("hostname");e.port=E("port");e.query=y("query","?");e.fragment=y("fragment","#");e.search=function(a,c){var d=this.query(a,c);return"string"===typeof d&&d.length?"?"+d:d};e.hash=function(a,c){var d=this.fragment(a,c);return"string"===typeof d&&d.length?"#"+d:d};e.pathname=function(a,c){if(void 0===
a||!0===a){var d=this._parts.path||(this._parts.hostname?"/":"");return a?(this._parts.urn?b.decodeUrnPath:b.decodePath)(d):d}this._parts.path=this._parts.urn?a?b.recodeUrnPath(a):"":a?b.recodePath(a):"/";this.build(!c);return this};e.path=e.pathname;e.href=function(a,c){var d;if(void 0===a)return this.toString();this._string="";this._parts=b._parts();var e=a instanceof b,f="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(f=b.getDomAttribute(a),a=a[f]||"",f=!1);!e&&f&&void 0!==a.pathname&&
(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=b.parse(String(a),this._parts);else if(e||f)for(d in e=e?a._parts:a,e)p.call(this._parts,d)&&(this._parts[d]=e[d]);else throw new TypeError("invalid input");this.build(!c);return this};e.is=function(a){var c=!1,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1,q=!this._parts.urn;this._parts.hostname&&(q=!1,d=b.ip4_expression.test(this._parts.hostname),e=b.ip6_expression.test(this._parts.hostname),c=d||e,h=(f=!c)&&g&&g.has(this._parts.hostname),
k=f&&b.idn_expression.test(this._parts.hostname),l=f&&b.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return q;case "absolute":return!q;case "domain":case "name":return f;case "sld":return h;case "ip":return c;case "ip4":case "ipv4":case "inet4":return d;case "ip6":case "ipv6":case "inet6":return e;case "idn":return k;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return l}return null};var G=e.protocol,H=e.port,I=e.hostname;
e.protocol=function(a,c){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(b.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return G.call(this,a,c)};e.scheme=e.protocol;e.port=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');
return H.call(this,a,c)};e.hostname=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var d={};if("/"!==b.parseHost(a,d))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');a=d.hostname}return I.call(this,a,c)};e.origin=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var d=this.protocol();return this.authority()?(d?d+"://":"")+this.authority():""}d=b(a);this.protocol(d.protocol()).authority(d.authority()).build(!c);return this};
e.host=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?b.buildHost(this._parts):"";if("/"!==b.parseHost(a,this._parts))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');this.build(!c);return this};e.authority=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?b.buildAuthority(this._parts):"";if("/"!==b.parseAuthority(a,this._parts))throw new TypeError('Hostname "'+
a+'" contains characters other than [A-Z0-9.-]');this.build(!c);return this};e.userinfo=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){var d=b.buildUserinfo(this._parts);return d?d.substring(0,d.length-1):d}"@"!==a[a.length-1]&&(a+="@");b.parseUserinfo(a,this._parts);this.build(!c);return this};e.resource=function(a,c){var d;if(void 0===a)return this.path()+this.search()+this.hash();d=b.parse(a);this._parts.path=d.path;this._parts.query=d.query;this._parts.fragment=d.fragment;
this.build(!c);return this};e.subdomain=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,d)||""}d=this._parts.hostname.length-this.domain().length;d=this._parts.hostname.substring(0,d);d=new RegExp("^"+m(d));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&b.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(d,a);
this.build(!c);return this};e.domain=function(a,c){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(c=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.match(/\./g);if(d&&2>d.length)return this._parts.hostname;d=this._parts.hostname.length-this.tld(c).length-1;d=this._parts.hostname.lastIndexOf(".",d-1)+1;return this._parts.hostname.substring(d)||""}if(!a)throw new TypeError("cannot set domain empty");b.ensureValidHostname(a);
!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(d=new RegExp(m(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a));this.build(!c);return this};e.tld=function(a,c){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(c=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),d=this._parts.hostname.substring(d+1);return!0!==c&&g&&g.list[d.toLowerCase()]?g.get(this._parts.hostname)||d:d}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(g&&
g.is(a))d=new RegExp(m(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");d=new RegExp(m(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(d,a)}else throw new TypeError("cannot set TLD empty");this.build(!c);return this};e.directory=function(a,c){if(this._parts.urn)return void 0===
a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var d=this._parts.path.length-this.filename().length-1,d=this._parts.path.substring(0,d)||(this._parts.hostname?"/":"");return a?b.decodePath(d):d}d=this._parts.path.length-this.filename().length;d=this._parts.path.substring(0,d);d=new RegExp("^"+m(d));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=b.recodePath(a);this._parts.path=
this._parts.path.replace(d,a);this.build(!c);return this};e.filename=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var d=this._parts.path.lastIndexOf("/"),d=this._parts.path.substring(d+1);return a?b.decodePathSegment(d):d}d=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(d=!0);var e=new RegExp(m(this.filename())+"$");a=b.recodePath(a);this._parts.path=this._parts.path.replace(e,a);d?this.normalizePath(c):
this.build(!c);return this};e.suffix=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var d=this.filename(),e=d.lastIndexOf(".");if(-1===e)return"";d=d.substring(e+1);d=/^[a-z0-9%]+$/i.test(d)?d:"";return a?b.decodePathSegment(d):d}"."===a.charAt(0)&&(a=a.substring(1));if(d=this.suffix())e=a?new RegExp(m(d)+"$"):new RegExp(m("."+d)+"$");else{if(!a)return this;this._parts.path+="."+b.recodePath(a)}e&&(a=b.recodePath(a),
this._parts.path=this._parts.path.replace(e,a));this.build(!c);return this};e.segment=function(a,c,d){var b=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),e=e.split(b);void 0!==a&&"number"!==typeof a&&(d=c,c=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');f&&e.shift();0>a&&(a=Math.max(e.length+a,0));if(void 0===c)return void 0===a?e:e[a];if(null===a||void 0===e[a])if(v(c)){e=[];a=0;for(var h=c.length;a<h;a++)if(c[a].length||
e.length&&e[e.length-1].length)e.length&&!e[e.length-1].length&&e.pop(),e.push(C(c[a]))}else{if(c||"string"===typeof c)c=C(c),""===e[e.length-1]?e[e.length-1]=c:e.push(c)}else c?e[a]=C(c):e.splice(a,1);f&&e.unshift("");return this.path(e.join(b),d)};e.segmentCoded=function(a,c,d){var e,f;"number"!==typeof a&&(d=c,c=a,a=void 0);if(void 0===c){a=this.segment(a,c,d);if(v(a))for(e=0,f=a.length;e<f;e++)a[e]=b.decode(a[e]);else a=void 0!==a?b.decode(a):void 0;return a}if(v(c))for(e=0,f=c.length;e<f;e++)c[e]=
b.encode(c[e]);else c="string"===typeof c||c instanceof String?b.encode(c):c;return this.segment(a,c,d)};var J=e.query;e.query=function(a,c){if(!0===a)return b.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var d=b.parseQuery(this._parts.query,this._parts.escapeQuerySpace),e=a.call(this,d);this._parts.query=b.buildQuery(e||d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!c);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=
b.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!c),this):J.call(this,a,c)};e.setQuery=function(a,c,d){var e=b.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)e[a]=void 0!==c?c:null;else if("object"===typeof a)for(var f in a)p.call(a,f)&&(e[f]=a[f]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=b.buildQuery(e,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);"string"!==typeof a&&(d=c);this.build(!d);return this};e.addQuery=function(a,c,d){var e=b.parseQuery(this._parts.query,this._parts.escapeQuerySpace);b.addQuery(e,a,void 0===c?null:c);this._parts.query=b.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(d=c);this.build(!d);return this};e.removeQuery=function(a,c,d){var e=b.parseQuery(this._parts.query,this._parts.escapeQuerySpace);b.removeQuery(e,a,c);this._parts.query=
b.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(d=c);this.build(!d);return this};e.hasQuery=function(a,c,d){var e=b.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return b.hasQuery(e,a,c,d)};e.setSearch=e.setQuery;e.addSearch=e.addQuery;e.removeSearch=e.removeQuery;e.hasSearch=e.hasQuery;e.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};
e.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};e.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&f?this._parts.hostname=f.toASCII(this._parts.hostname):this.is("IPv6")&&l&&(this._parts.hostname=l.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};e.normalizePort=function(a){"string"===typeof this._parts.protocol&&
this._parts.port===b.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};e.normalizePath=function(a){var c=this._parts.path;if(!c)return this;if(this._parts.urn)return this._parts.path=b.recodeUrnPath(this._parts.path),this.build(!a),this;if("/"===this._parts.path)return this;var c=b.recodePath(c),d,e="",f,h;"/"!==c.charAt(0)&&(d=!0,c="/"+c);if("/.."===c.slice(-3)||"/."===c.slice(-2))c+="/";c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");d&&(e=c.substring(1).match(/^(\.\.\/)+/)||
"")&&(e=e[0]);for(;;){f=c.search(/\/\.\.(\/|$)/);if(-1===f)break;else if(0===f){c=c.substring(3);continue}h=c.substring(0,f).lastIndexOf("/");-1===h&&(h=f);c=c.substring(0,h)+c.substring(f+3)}d&&this.is("relative")&&(c=e+c.substring(1));this._parts.path=c;this.build(!a);return this};e.normalizePathname=e.normalizePath;e.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(b.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=
null,this.build(!a));return this};e.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));return this};e.normalizeSearch=e.normalizeQuery;e.normalizeHash=e.normalizeFragment;e.iso8859=function(){var a=b.encode,c=b.decode;b.encode=escape;b.decode=decodeURIComponent;try{this.normalize()}finally{b.encode=a,b.decode=c}return this};e.unicode=function(){var a=b.encode,c=b.decode;b.encode=x;b.decode=unescape;try{this.normalize()}finally{b.encode=a,b.decode=c}return this};
e.readable=function(){var a=this.clone();a.username("").password("").normalize();var c="";a._parts.protocol&&(c+=a._parts.protocol+"://");a._parts.hostname&&(a.is("punycode")&&f?(c+=f.toUnicode(a._parts.hostname),a._parts.port&&(c+=":"+a._parts.port)):c+=a.host());a._parts.hostname&&a._parts.path&&"/"!==a._parts.path.charAt(0)&&(c+="/");c+=a.path(!0);if(a._parts.query){for(var d="",e=0,h=a._parts.query.split("&"),g=h.length;e<g;e++){var k=(h[e]||"").split("="),d=d+("&"+b.decodeQuery(k[0],this._parts.escapeQuerySpace).replace(/&/g,
"%26"));void 0!==k[1]&&(d+="="+b.decodeQuery(k[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=b.decodeQuery(a.hash(),!0)};e.absoluteTo=function(a){var c=this.clone(),d=["protocol","username","password","hostname","port"],e,f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof b||(a=new b(a));c._parts.protocol||(c._parts.protocol=a._parts.protocol);if(this._parts.hostname)return c;for(e=0;f=d[e];e++)c._parts[f]=
a._parts[f];c._parts.path?(".."===c._parts.path.substring(-2)&&(c._parts.path+="/"),"/"!==c.path().charAt(0)&&(d=(d=a.directory())?d:0===a.path().indexOf("/")?"/":"",c._parts.path=(d?d+"/":"")+c._parts.path,c.normalizePath())):(c._parts.path=a._parts.path,c._parts.query||(c._parts.query=a._parts.query));c.build();return c};e.relativeTo=function(a){var c=this.clone().normalize(),d,e,f;if(c._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new b(a)).normalize();
d=c._parts;e=a._parts;f=c.path();a=a.path();if("/"!==f.charAt(0))throw Error("URI is already relative");if("/"!==a.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");d.protocol===e.protocol&&(d.protocol=null);if(d.username===e.username&&d.password===e.password&&null===d.protocol&&null===d.username&&null===d.password&&d.hostname===e.hostname&&d.port===e.port)d.hostname=null,d.port=null;else return c.build();if(f===a)return d.path="",c.build();f=b.commonPath(f,a);if(!f)return c.build();
e=e.path.substring(f.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");d.path=e+d.path.substring(f.length)||"./";return c.build()};e.equals=function(a){var c=this.clone(),d=new b(a),e;a={};var f,h;c.normalize();d.normalize();if(c.toString()===d.toString())return!0;f=c.query();e=d.query();c.query("");d.query("");if(c.toString()!==d.toString()||f.length!==e.length)return!1;c=b.parseQuery(f,this._parts.escapeQuerySpace);e=b.parseQuery(e,this._parts.escapeQuerySpace);for(h in c)if(p.call(c,h)){if(!v(c[h])){if(c[h]!==
e[h])return!1}else if(!A(c[h],e[h]))return!1;a[h]=!0}for(h in e)if(p.call(e,h)&&!a[h])return!1;return!0};e.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=!!a;return this};e.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};return b});
(function(f,l){"object"===typeof module&&module.exports?module.exports=l(require("./URI")):"function"===typeof define&&define.amd?define(["./URI"],l):f.URITemplate=l(f.URI,f)})(this,function(f,l){function g(b){if(g._cache[b])return g._cache[b];if(!(this instanceof g))return new g(b);this.expression=b;g._cache[b]=this;return this}function k(b){this.data=b;this.cache={}}var b=l&&l.URITemplate,m=Object.prototype.hasOwnProperty,z=g.prototype,v={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,
encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},
"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};g._cache={};g.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g;g.VARIABLE_PATTERN=/^([^*:.](?:\.?[^*:.])*)((\*)|:(\d+))?$/;g.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_.]/;g.LITERAL_PATTERN=/[<>{}'"`^| \\]/;g.expand=function(b,f){var h=v[b.operator],k=h.named?"Named":"Unnamed",l=b.variables,q=[],m,y,u;for(u=0;y=l[u];u++)if(m=f.get(y.name),m.val.length){if(1<m.type&&y.maxlength)throw Error('Invalid expression: Prefix modifier not applicable to variable "'+
y.name+'"');q.push(g["expand"+k](m,h,y.explode,y.explode&&h.separator||",",y.maxlength,y.name))}else m.type&&q.push("");return q.length?h.prefix+q.join(h.separator):""};g.expandNamed=function(b,g,k,l,m,x){var h="",q=g.encode;g=g.empty_name_separator;var A=!b[q].length,e=2===b.type?"":f[q](x),p,r,C;r=0;for(C=b.val.length;r<C;r++)m?(p=f[q](b.val[r][1].substring(0,m)),2===b.type&&(e=f[q](b.val[r][0].substring(0,m)))):A?(p=f[q](b.val[r][1]),2===b.type?(e=f[q](b.val[r][0]),b[q].push([e,p])):b[q].push([void 0,
p])):(p=b[q][r][1],2===b.type&&(e=b[q][r][0])),h&&(h+=l),k?h+=e+(g||p?"=":"")+p:(r||(h+=f[q](x)+(g||p?"=":"")),2===b.type&&(h+=e+","),h+=p);return h};g.expandUnnamed=function(b,g,k,l,m){var h="",q=g.encode;g=g.empty_name_separator;var A=!b[q].length,u,e,p,r;p=0;for(r=b.val.length;p<r;p++)m?e=f[q](b.val[p][1].substring(0,m)):A?(e=f[q](b.val[p][1]),b[q].push([2===b.type?f[q](b.val[p][0]):void 0,e])):e=b[q][p][1],h&&(h+=l),2===b.type&&(u=m?f[q](b.val[p][0].substring(0,m)):b[q][p][0],h+=u,h=k?h+(g||e?
"=":""):h+","),h+=e;return h};g.noConflict=function(){l.URITemplate===g&&(l.URITemplate=b);return g};z.expand=function(b){var f="";this.parts&&this.parts.length||this.parse();b instanceof k||(b=new k(b));for(var h=0,l=this.parts.length;h<l;h++)f+="string"===typeof this.parts[h]?this.parts[h]:g.expand(this.parts[h],b);return f};z.parse=function(){var b=this.expression,f=g.EXPRESSION_PATTERN,k=g.VARIABLE_PATTERN,l=g.VARIABLE_NAME_PATTERN,m=g.LITERAL_PATTERN,x=[],z=0,y,u,e,p=function(b){if(b.match(m))throw Error('Invalid Literal "'+
b+'"');return b};for(f.lastIndex=0;;){u=f.exec(b);if(null===u){x.push(p(b.substring(z)));break}else x.push(p(b.substring(z,u.index))),z=u.index+u[0].length;if(!v[u[1]])throw Error('Unknown Operator "'+u[1]+'" in "'+u[0]+'"');if(!u[3])throw Error('Unclosed Expression "'+u[0]+'"');y=u[2].split(",");for(var r=0,B=y.length;r<B;r++){e=y[r].match(k);if(null===e)throw Error('Invalid Variable "'+y[r]+'" in "'+u[0]+'"');if(e[1].match(l))throw Error('Invalid Variable Name "'+e[1]+'" in "'+u[0]+'"');y[r]={name:e[1],
explode:!!e[3],maxlength:e[4]&&parseInt(e[4],10)}}if(!y.length)throw Error('Expression Missing Variable(s) "'+u[0]+'"');x.push({expression:u[0],operator:u[1],variables:y})}x.length||x.push(p(b));this.parts=x;return this};k.prototype.get=function(b){var f=this.data,g={type:0,val:[],encode:[],encodeReserved:[]},h;if(void 0!==this.cache[b])return this.cache[b];this.cache[b]=g;f="[object Function]"===String(Object.prototype.toString.call(f))?f(b):"[object Function]"===String(Object.prototype.toString.call(f[b]))?
f[b](b):f[b];if(void 0!==f&&null!==f)if("[object Array]"===String(Object.prototype.toString.call(f))){h=0;for(b=f.length;h<b;h++)void 0!==f[h]&&null!==f[h]&&g.val.push([void 0,String(f[h])]);g.val.length&&(g.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(f))){for(h in f)m.call(f,h)&&void 0!==f[h]&&null!==f[h]&&g.val.push([h,String(f[h])]);g.val.length&&(g.type=2)}else g.type=1,g.val.push([void 0,String(f)]);return g};f.expand=function(b,k){var h=(new g(b)).expand(k);return new f(h)};
return g});


 /* =========================================================
  * JQUERY ACTUAL
  * Copyright 2012, Ben Lin (http://dreamerslab.com/)
  * Licensed under the MIT License (LICENSE.txt)
  * Version: 1.0.18
  * Requires: jQuery >= 1.2.3
  * ========================================================= */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a);
}else{a(jQuery);}}(function(a){a.fn.addBack=a.fn.addBack||a.fn.andSelf;a.fn.extend({actual:function(b,l){if(!this[b]){throw'$.actual => The jQuery method "'+b+'" you called does not exist';
}var f={absolute:false,clone:false,includeMargin:false,display:"block"};var i=a.extend(f,l);var e=this.eq(0);var h,j;if(i.clone===true){h=function(){var m="position: absolute !important; top: -1000 !important; ";
e=e.clone().attr("style",m).appendTo("body");};j=function(){e.remove();};}else{var g=[];var d="";var c;h=function(){c=e.parents().addBack().filter(":hidden");
d+="visibility: hidden !important; display: "+i.display+" !important; ";if(i.absolute===true){d+="position: absolute !important; ";}c.each(function(){var m=a(this);
var n=m.attr("style");g.push(n);m.attr("style",n?n+";"+d:d);});};j=function(){c.each(function(m){var o=a(this);var n=g[m];if(n===undefined){o.removeAttr("style");
}else{o.attr("style",n);}});};}h();var k=/(outer)/.test(b)?e[b](i.includeMargin):e[b]();j();return k;}});}));


/* =========================================================
 * SweetAlert2
 * Copyright 2012, Ben Lin (http://dreamerslab.com/)
 * Licensed under the MIT License (LICENSE.txt)
 * Version: 1.0.18
 * Requires: jQuery >= 1.2.3
 * ========================================================= */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Sweetalert2=t()}(this,function(){"use strict";var e={title:"",titleText:"",text:"",html:"",type:null,customClass:"",target:"body",animation:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,showConfirmButton:!0,showCancelButton:!1,preConfirm:null,confirmButtonText:"OK",confirmButtonColor:"#3085d6",confirmButtonClass:null,cancelButtonText:"Cancel",cancelButtonColor:"#aaa",cancelButtonClass:null,buttonsStyling:!0,reverseButtons:!1,focusCancel:!1,showCloseButton:!1,showLoaderOnConfirm:!1,imageUrl:null,imageWidth:null,imageHeight:null,imageClass:null,timer:null,width:500,padding:20,background:"#fff",input:null,inputPlaceholder:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputClass:null,inputAttributes:{},inputValidator:null,progressSteps:[],currentProgressStep:null,progressStepsDistance:"40px",onOpen:null,onClose:null,useRejections:!0},t=function(e){var t={};for(var n in e)t[e[n]]="swal2-"+e[n];return t},n=t(["container","shown","iosfix","modal","overlay","fade","show","hide","noanimation","close","title","content","buttonswrapper","confirm","cancel","icon","image","input","file","range","select","radio","checkbox","textarea","inputerror","validationerror","progresssteps","activeprogressstep","progresscircle","progressline","loading","styled"]),o=t(["success","warning","info","question","error"]),r=function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;for(var n="#",o=0;o<3;o++){var r=parseInt(e.substr(2*o,2),16);n+=("00"+(r=Math.round(Math.min(Math.max(0,r+r*t),255)).toString(16))).substr(r.length)}return n},i=function(e){var t=[];for(var n in e)-1===t.indexOf(e[n])&&t.push(e[n]);return t},a={previousWindowKeyDown:null,previousActiveElement:null,previousBodyPadding:null},l=function(e){if("undefined"!=typeof document){var t=document.createElement("div");t.className=n.container,t.innerHTML=s;var o=document.querySelector(e.target);o||(console.warn("SweetAlert2: Can't find the target \""+e.target+'"'),o=document.body),o.appendChild(t);var r=c(),i=A(r,n.input),a=A(r,n.file),l=r.querySelector("."+n.range+" input"),u=r.querySelector("."+n.range+" output"),d=A(r,n.select),p=r.querySelector("."+n.checkbox+" input"),f=A(r,n.textarea);return i.oninput=function(){$.resetValidationError()},i.onkeydown=function(t){setTimeout(function(){13===t.keyCode&&e.allowEnterKey&&(t.stopPropagation(),$.clickConfirm())},0)},a.onchange=function(){$.resetValidationError()},l.oninput=function(){$.resetValidationError(),u.value=l.value},l.onchange=function(){$.resetValidationError(),l.previousSibling.value=l.value},d.onchange=function(){$.resetValidationError()},p.onchange=function(){$.resetValidationError()},f.oninput=function(){$.resetValidationError()},r}console.error("SweetAlert2 requires document to initialize")},s=('\n <div role="dialog" aria-labelledby="'+n.title+'" aria-describedby="'+n.content+'" class="'+n.modal+'" tabindex="-1">\n   <ul class="'+n.progresssteps+'"></ul>\n   <div class="'+n.icon+" "+o.error+'">\n     <span class="swal2-x-mark"><span class="swal2-x-mark-line-left"></span><span class="swal2-x-mark-line-right"></span></span>\n   </div>\n   <div class="'+n.icon+" "+o.question+'">?</div>\n   <div class="'+n.icon+" "+o.warning+'">!</div>\n   <div class="'+n.icon+" "+o.info+'">i</div>\n   <div class="'+n.icon+" "+o.success+'">\n     <div class="swal2-success-circular-line-left"></div>\n     <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n     <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n     <div class="swal2-success-circular-line-right"></div>\n   </div>\n   <img class="'+n.image+'" />\n   <h2 class="'+n.title+'" id="'+n.title+'"></h2>\n   <div id="'+n.content+'" class="'+n.content+'"></div>\n   <input class="'+n.input+'" />\n   <input type="file" class="'+n.file+'" />\n   <div class="'+n.range+'">\n     <output></output>\n     <input type="range" />\n   </div>\n   <select class="'+n.select+'"></select>\n   <div class="'+n.radio+'"></div>\n   <label for="'+n.checkbox+'" class="'+n.checkbox+'">\n     <input type="checkbox" />\n   </label>\n   <textarea class="'+n.textarea+'"></textarea>\n   <div class="'+n.validationerror+'"></div>\n   <div class="'+n.buttonswrapper+'">\n     <button type="button" class="'+n.confirm+'">OK</button>\n     <button type="button" class="'+n.cancel+'">Cancel</button>\n   </div>\n   <button type="button" class="'+n.close+'" aria-label="Close this dialog">×</button>\n </div>\n').replace(/(^|\n)\s*/g,""),u=function(){return document.body.querySelector("."+n.container)},c=function(){return u()?u().querySelector("."+n.modal):null},d=function(){return c().querySelectorAll("."+n.icon)},p=function(e){return u()?u().querySelector("."+e):null},f=function(){return p(n.title)},m=function(){return p(n.content)},v=function(){return p(n.image)},h=function(){return p(n.buttonswrapper)},g=function(){return p(n.progresssteps)},y=function(){return p(n.validationerror)},b=function(){return p(n.confirm)},w=function(){return p(n.cancel)},C=function(){return p(n.close)},k=function(e){var t=[b(),w()];e&&t.reverse();var n=t.concat(Array.prototype.slice.call(c().querySelectorAll('button, input:not([type=hidden]), textarea, select, a, *[tabindex]:not([tabindex="-1"])')));return i(n)},x=function(e,t){return!!e.classList&&e.classList.contains(t)},S=function(e){if(e.focus(),"file"!==e.type){var t=e.value;e.value="",e.value=t}},E=function(e,t){e&&t&&t.split(/\s+/).filter(Boolean).forEach(function(t){e.classList.add(t)})},B=function(e,t){e&&t&&t.split(/\s+/).filter(Boolean).forEach(function(t){e.classList.remove(t)})},A=function(e,t){for(var n=0;n<e.childNodes.length;n++)if(x(e.childNodes[n],t))return e.childNodes[n]},P=function(e,t){t||(t="block"),e.style.opacity="",e.style.display=t},T=function(e){e.style.opacity="",e.style.display="none"},L=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},M=function(e){return e.offsetWidth||e.offsetHeight||e.getClientRects().length},q=function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},V=function(e){if(!M(e))return!1;if("function"==typeof MouseEvent){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});e.dispatchEvent(t)}else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!1,!1),e.dispatchEvent(n)}else document.createEventObject?e.fireEvent("onclick"):"function"==typeof e.onclick&&e.onclick()},O=function(){var e=document.createElement("div"),t={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"};for(var n in t)if(t.hasOwnProperty(n)&&void 0!==e.style[n])return t[n];return!1}(),H=function(){if(window.onkeydown=a.previousWindowKeyDown,a.previousActiveElement&&a.previousActiveElement.focus){var e=window.scrollX,t=window.scrollY;a.previousActiveElement.focus(),e&&t&&window.scrollTo(e,t)}},N=function(){if("ontouchstart"in window||navigator.msMaxTouchPoints)return 0;var e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t},j=function(e,t){var n=void 0;return function(){clearTimeout(n),n=setTimeout(function(){n=null,e()},t)}},R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K=I({},e),D=[],W=void 0,U=function(t){var r=c()||l(t);for(var i in t)e.hasOwnProperty(i)||"extraParams"===i||console.warn('SweetAlert2: Unknown parameter "'+i+'"');r.style.width="number"==typeof t.width?t.width+"px":t.width,r.style.padding=t.padding+"px",r.style.background=t.background;for(var a=r.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),s=0;s<a.length;s++)a[s].style.background=t.background;var u=f(),p=m(),y=h(),k=b(),x=w(),S=C();if(t.titleText?u.innerText=t.titleText:u.innerHTML=t.title.split("\n").join("<br />"),t.text||t.html){if("object"===R(t.html))if(p.innerHTML="",0 in t.html)for(var A=0;A in t.html;A++)p.appendChild(t.html[A].cloneNode(!0));else p.appendChild(t.html.cloneNode(!0));else t.html?p.innerHTML=t.html:t.text&&(p.textContent=t.text);P(p)}else T(p);t.showCloseButton?P(S):T(S),r.className=n.modal,t.customClass&&E(r,t.customClass);var M=g(),V=parseInt(null===t.currentProgressStep?$.getQueueStep():t.currentProgressStep,10);t.progressSteps.length?(P(M),L(M),V>=t.progressSteps.length&&console.warn("SweetAlert2: Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),t.progressSteps.forEach(function(e,o){var r=document.createElement("li");if(E(r,n.progresscircle),r.innerHTML=e,o===V&&E(r,n.activeprogressstep),M.appendChild(r),o!==t.progressSteps.length-1){var i=document.createElement("li");E(i,n.progressline),i.style.width=t.progressStepsDistance,M.appendChild(i)}})):T(M);for(var O=d(),H=0;H<O.length;H++)T(O[H]);if(t.type){var N=!1;for(var j in o)if(t.type===j){N=!0;break}if(!N)return console.error("SweetAlert2: Unknown alert type: "+t.type),!1;var I=r.querySelector("."+n.icon+"."+o[t.type]);if(P(I),t.animation)switch(t.type){case"success":E(I,"swal2-animate-success-icon"),E(I.querySelector(".swal2-success-line-tip"),"swal2-animate-success-line-tip"),E(I.querySelector(".swal2-success-line-long"),"swal2-animate-success-line-long");break;case"error":E(I,"swal2-animate-error-icon"),E(I.querySelector(".swal2-x-mark"),"swal2-animate-x-mark")}}var K=v();t.imageUrl?(K.setAttribute("src",t.imageUrl),P(K),t.imageWidth?K.setAttribute("width",t.imageWidth):K.removeAttribute("width"),t.imageHeight?K.setAttribute("height",t.imageHeight):K.removeAttribute("height"),K.className=n.image,t.imageClass&&E(K,t.imageClass)):T(K),t.showCancelButton?x.style.display="inline-block":T(x),t.showConfirmButton?q(k,"display"):T(k),t.showConfirmButton||t.showCancelButton?P(y):T(y),k.innerHTML=t.confirmButtonText,x.innerHTML=t.cancelButtonText,t.buttonsStyling&&(k.style.backgroundColor=t.confirmButtonColor,x.style.backgroundColor=t.cancelButtonColor),k.className=n.confirm,E(k,t.confirmButtonClass),x.className=n.cancel,E(x,t.cancelButtonClass),t.buttonsStyling?(E(k,n.styled),E(x,n.styled)):(B(k,n.styled),B(x,n.styled),k.style.backgroundColor=k.style.borderLeftColor=k.style.borderRightColor="",x.style.backgroundColor=x.style.borderLeftColor=x.style.borderRightColor=""),!0===t.animation?B(r,n.noanimation):E(r,n.noanimation)},z=function(e,t){var o=u(),r=c();e?(E(r,n.show),E(o,n.fade),B(r,n.hide)):B(r,n.fade),P(r),o.style.overflowY="hidden",O&&!x(r,n.noanimation)?r.addEventListener(O,function e(){r.removeEventListener(O,e),o.style.overflowY="auto"}):o.style.overflowY="auto",E(document.documentElement,n.shown),E(document.body,n.shown),E(o,n.shown),Z(),Y(),a.previousActiveElement=document.activeElement,null!==t&&"function"==typeof t&&setTimeout(function(){t(r)})},Z=function(){null===a.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(a.previousBodyPadding=document.body.style.paddingRight,document.body.style.paddingRight=N()+"px")},Q=function(){null!==a.previousBodyPadding&&(document.body.style.paddingRight=a.previousBodyPadding,a.previousBodyPadding=null)},Y=function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!x(document.body,n.iosfix)){var e=document.body.scrollTop;document.body.style.top=-1*e+"px",E(document.body,n.iosfix)}},_=function(){if(x(document.body,n.iosfix)){var e=parseInt(document.body.style.top,10);B(document.body,n.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}},$=function e(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];if(void 0===o[0])return console.error("SweetAlert2 expects at least 1 attribute!"),!1;var l=I({},K);switch(R(o[0])){case"string":l.title=o[0],l.html=o[1],l.type=o[2];break;case"object":I(l,o[0]),l.extraParams=o[0].extraParams,"email"===l.input&&null===l.inputValidator&&(l.inputValidator=function(e){return new Promise(function(t,n){/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e)?t():n("Invalid email address")})}),"url"===l.input&&null===l.inputValidator&&(l.inputValidator=function(e){return new Promise(function(t,n){/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)$/.test(e)?t():n("Invalid URL")})});break;default:return console.error('SweetAlert2: Unexpected type of argument! Expected "string" or "object", got '+R(o[0])),!1}U(l);var s=u(),d=c();return new Promise(function(t,o){l.timer&&(d.timeout=setTimeout(function(){e.closeModal(l.onClose),l.useRejections?o("timer"):t({dismiss:"timer"})},l.timer));var i=function(e){if(!(e=e||l.input))return null;switch(e){case"select":case"textarea":case"file":return A(d,n[e]);case"checkbox":return d.querySelector("."+n.checkbox+" input");case"radio":return d.querySelector("."+n.radio+" input:checked")||d.querySelector("."+n.radio+" input:first-child");case"range":return d.querySelector("."+n.range+" input");default:return A(d,n.input)}},p=function(){var e=i();if(!e)return null;switch(l.input){case"checkbox":return e.checked?1:0;case"radio":return e.checked?e.value:null;case"file":return e.files.length?e.files[0]:null;default:return l.inputAutoTrim?e.value.trim():e.value}};l.input&&setTimeout(function(){var e=i();e&&S(e)},0);for(var x=function(n){l.showLoaderOnConfirm&&e.showLoading(),l.preConfirm?l.preConfirm(n,l.extraParams).then(function(o){e.closeModal(l.onClose),t(o||n)},function(t){e.hideLoading(),t&&e.showValidationError(t)}):(e.closeModal(l.onClose),t(l.useRejections?n:{value:n}))},L=function(n){var i=n||window.event,a=i.target||i.srcElement,s=b(),u=w(),c=s&&(s===a||s.contains(a)),d=u&&(u===a||u.contains(a));switch(i.type){case"mouseover":case"mouseup":l.buttonsStyling&&(c?s.style.backgroundColor=r(l.confirmButtonColor,-.1):d&&(u.style.backgroundColor=r(l.cancelButtonColor,-.1)));break;case"mouseout":l.buttonsStyling&&(c?s.style.backgroundColor=l.confirmButtonColor:d&&(u.style.backgroundColor=l.cancelButtonColor));break;case"mousedown":l.buttonsStyling&&(c?s.style.backgroundColor=r(l.confirmButtonColor,-.2):d&&(u.style.backgroundColor=r(l.cancelButtonColor,-.2)));break;case"click":if(c&&e.isVisible())if(e.disableButtons(),l.input){var f=p();l.inputValidator?(e.disableInput(),l.inputValidator(f,l.extraParams).then(function(){e.enableButtons(),e.enableInput(),x(f)},function(t){e.enableButtons(),e.enableInput(),t&&e.showValidationError(t)})):x(f)}else x(!0);else d&&e.isVisible()&&(e.disableButtons(),e.closeModal(l.onClose),l.useRejections?o("cancel"):t({dismiss:"cancel"}))}},q=d.querySelectorAll("button"),O=0;O<q.length;O++)q[O].onclick=L,q[O].onmouseover=L,q[O].onmouseout=L,q[O].onmousedown=L;C().onclick=function(){e.closeModal(l.onClose),l.useRejections?o("close"):t({dismiss:"close"})},s.onclick=function(n){n.target===s&&l.allowOutsideClick&&(e.closeModal(l.onClose),l.useRejections?o("overlay"):t({dismiss:"overlay"}))};var H=h(),N=b(),I=w();l.reverseButtons?N.parentNode.insertBefore(I,N):N.parentNode.insertBefore(N,I);var K=function(e,t){for(var n=k(l.focusCancel),o=0;o<n.length;o++){(e+=t)===n.length?e=0:-1===e&&(e=n.length-1);var r=n[e];if(M(r))return r.focus()}},D=function(n){var r=n||window.event,i=r.keyCode||r.which;if(-1!==[9,13,32,27,37,38,39,40].indexOf(i)){for(var a=r.target||r.srcElement,s=k(l.focusCancel),u=-1,c=0;c<s.length;c++)if(a===s[c]){u=c;break}9===i?(r.shiftKey?K(u,-1):K(u,1),r.stopPropagation(),r.preventDefault()):37===i||38===i||39===i||40===i?document.activeElement===N&&M(I)?I.focus():document.activeElement===I&&M(N)&&N.focus():13===i||32===i?-1===u&&l.allowEnterKey&&(V(l.focusCancel?I:N),r.stopPropagation(),r.preventDefault()):27===i&&!0===l.allowEscapeKey&&(e.closeModal(l.onClose),l.useRejections?o("esc"):t({dismiss:"esc"}))}};window.onkeydown&&window.onkeydown.toString()===D.toString()||(a.previousWindowKeyDown=window.onkeydown,window.onkeydown=D),l.buttonsStyling&&(N.style.borderLeftColor=l.confirmButtonColor,N.style.borderRightColor=l.confirmButtonColor),e.hideLoading=e.disableLoading=function(){l.showConfirmButton||(T(N),l.showCancelButton||T(h())),B(H,n.loading),B(d,n.loading),N.disabled=!1,I.disabled=!1},e.getTitle=function(){return f()},e.getContent=function(){return m()},e.getInput=function(){return i()},e.getImage=function(){return v()},e.getButtonsWrapper=function(){return h()},e.getConfirmButton=function(){return b()},e.getCancelButton=function(){return w()},e.enableButtons=function(){N.disabled=!1,I.disabled=!1},e.disableButtons=function(){N.disabled=!0,I.disabled=!0},e.enableConfirmButton=function(){N.disabled=!1},e.disableConfirmButton=function(){N.disabled=!0},e.enableInput=function(){var e=i();if(!e)return!1;if("radio"===e.type)for(var t=e.parentNode.parentNode.querySelectorAll("input"),n=0;n<t.length;n++)t[n].disabled=!1;else e.disabled=!1},e.disableInput=function(){var e=i();if(!e)return!1;if(e&&"radio"===e.type)for(var t=e.parentNode.parentNode.querySelectorAll("input"),n=0;n<t.length;n++)t[n].disabled=!0;else e.disabled=!0},e.recalculateHeight=j(function(){var e=c();if(e){var t=e.style.display;e.style.minHeight="",P(e),e.style.minHeight=e.scrollHeight+1+"px",e.style.display=t}},50),e.showValidationError=function(e){var t=y();t.innerHTML=e,P(t);var o=i();o&&(S(o),E(o,n.inputerror))},e.resetValidationError=function(){var t=y();T(t),e.recalculateHeight();var o=i();o&&B(o,n.inputerror)},e.getProgressSteps=function(){return l.progressSteps},e.setProgressSteps=function(e){l.progressSteps=e,U(l)},e.showProgressSteps=function(){P(g())},e.hideProgressSteps=function(){T(g())},e.enableButtons(),e.hideLoading(),e.resetValidationError();for(var Z=["input","file","range","select","radio","checkbox","textarea"],Q=void 0,Y=0;Y<Z.length;Y++){var _=n[Z[Y]],$=A(d,_);if(Q=i(Z[Y])){for(var J in Q.attributes)if(Q.attributes.hasOwnProperty(J)){var X=Q.attributes[J].name;"type"!==X&&"value"!==X&&Q.removeAttribute(X)}for(var F in l.inputAttributes)Q.setAttribute(F,l.inputAttributes[F])}$.className=_,l.inputClass&&E($,l.inputClass),T($)}var G=void 0;switch(l.input){case"text":case"email":case"password":case"number":case"tel":case"url":(Q=A(d,n.input)).value=l.inputValue,Q.placeholder=l.inputPlaceholder,Q.type=l.input,P(Q);break;case"file":(Q=A(d,n.file)).placeholder=l.inputPlaceholder,Q.type=l.input,P(Q);break;case"range":var ee=A(d,n.range),te=ee.querySelector("input"),ne=ee.querySelector("output");te.value=l.inputValue,te.type=l.input,ne.value=l.inputValue,P(ee);break;case"select":var oe=A(d,n.select);if(oe.innerHTML="",l.inputPlaceholder){var re=document.createElement("option");re.innerHTML=l.inputPlaceholder,re.value="",re.disabled=!0,re.selected=!0,oe.appendChild(re)}G=function(e){for(var t in e){var n=document.createElement("option");n.value=t,n.innerHTML=e[t],l.inputValue===t&&(n.selected=!0),oe.appendChild(n)}P(oe),oe.focus()};break;case"radio":var ie=A(d,n.radio);ie.innerHTML="",G=function(e){for(var t in e){var o=document.createElement("input"),r=document.createElement("label"),i=document.createElement("span");o.type="radio",o.name=n.radio,o.value=t,l.inputValue===t&&(o.checked=!0),i.innerHTML=e[t],r.appendChild(o),r.appendChild(i),r.for=o.id,ie.appendChild(r)}P(ie);var a=ie.querySelectorAll("input");a.length&&a[0].focus()};break;case"checkbox":var ae=A(d,n.checkbox),le=i("checkbox");le.type="checkbox",le.value=1,le.id=n.checkbox,le.checked=Boolean(l.inputValue);var se=ae.getElementsByTagName("span");se.length&&ae.removeChild(se[0]),(se=document.createElement("span")).innerHTML=l.inputPlaceholder,ae.appendChild(se),P(ae);break;case"textarea":var ue=A(d,n.textarea);ue.value=l.inputValue,ue.placeholder=l.inputPlaceholder,P(ue);break;case null:break;default:console.error('SweetAlert2: Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'+l.input+'"')}"select"!==l.input&&"radio"!==l.input||(l.inputOptions instanceof Promise?(e.showLoading(),l.inputOptions.then(function(t){e.hideLoading(),G(t)})):"object"===R(l.inputOptions)?G(l.inputOptions):console.error("SweetAlert2: Unexpected type of inputOptions! Expected object or Promise, got "+R(l.inputOptions))),z(l.animation,l.onOpen),l.allowEnterKey?K(-1,1):document.activeElement&&document.activeElement.blur(),u().scrollTop=0,"undefined"==typeof MutationObserver||W||(W=new MutationObserver(e.recalculateHeight)).observe(d,{childList:!0,characterData:!0,subtree:!0})})};return $.isVisible=function(){return!!c()},$.queue=function(e){D=e;var t=function(){D=[],document.body.removeAttribute("data-swal2-queue-step")},n=[];return new Promise(function(e,o){!function r(i,a){i<D.length?(document.body.setAttribute("data-swal2-queue-step",i),$(D[i]).then(function(e){n.push(e),r(i+1,a)},function(e){t(),o(e)})):(t(),e(n))}(0)})},$.getQueueStep=function(){return document.body.getAttribute("data-swal2-queue-step")},$.insertQueueStep=function(e,t){return t&&t<D.length?D.splice(t,0,e):D.push(e)},$.deleteQueueStep=function(e){void 0!==D[e]&&D.splice(e,1)},$.close=$.closeModal=function(e){var t=u(),o=c();if(o){B(o,n.show),E(o,n.hide),clearTimeout(o.timeout),H();var r=function(){t.parentNode&&t.parentNode.removeChild(t),B(document.documentElement,n.shown),B(document.body,n.shown),Q(),_()};O&&!x(o,n.noanimation)?o.addEventListener(O,function e(){o.removeEventListener(O,e),x(o,n.hide)&&r()}):r(),null!==e&&"function"==typeof e&&setTimeout(function(){e(o)})}},$.clickConfirm=function(){return b().click()},$.clickCancel=function(){return w().click()},$.showLoading=$.enableLoading=function(){var e=c();e||$("");var t=h(),o=b(),r=w();P(t),P(o,"inline-block"),E(t,n.loading),E(e,n.loading),o.disabled=!0,r.disabled=!0},$.setDefaults=function(t){if(!t||"object"!==(void 0===t?"undefined":R(t)))return console.error("SweetAlert2: the argument for setDefaults() is required and has to be a object");for(var n in t)e.hasOwnProperty(n)||"extraParams"===n||(console.warn('SweetAlert2: Unknown parameter "'+n+'"'),delete t[n]);I(K,t)},$.resetDefaults=function(){K=I({},e)},$.noop=function(){},$.version="6.6.6",$.default=$,$}),window.Sweetalert2&&(window.sweetAlert=window.swal=window.Sweetalert2);

 /* =========================================================
  * Fuel UX v3.16.0
  * Copyright 2012-2017 ExactTarget
  * Licensed under the BSD-3-Clause license (https://github.com/ExactTarget/fuelux/blob/master/LICENSE
  ========================================================= */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','bootstrap'],factory)}else{factory(jQuery)}}(function(jQuery){if(typeof jQuery==='undefined'){throw new Error('Fuel UX\'s JavaScript requires jQuery')}
if(typeof jQuery.fn.dropdown==='undefined'||typeof jQuery.fn.collapse==='undefined'){throw new Error('Fuel UX\'s JavaScript requires Bootstrap')}(function($){var old=$.fn.checkbox;var Checkbox=function(element,options){this.options=$.extend({},$.fn.checkbox.defaults,options);if(element.tagName.toLowerCase()!=='label'){return}
this.$label=$(element);this.$chk=this.$label.find('input[type="checkbox"]');this.$container=$(element).parent('.checkbox');var containerSelector=this.$chk.attr('data-toggle');this.$toggleContainer=$(containerSelector);this.$chk.on('change',$.proxy(this.itemchecked,this));this.setInitialState()};Checkbox.prototype={constructor:Checkbox,setInitialState:function(){var $chk=this.$chk;var $lbl=this.$label;var checked=$chk.prop('checked');var disabled=$chk.prop('disabled');this.setCheckedState($chk,checked);this.setDisabledState($chk,disabled)},setCheckedState:function(element,checked){var $chk=element;var $lbl=this.$label;var $container=this.$container;var $containerToggle=this.$toggleContainer;if(checked){$chk.prop('checked',!0);$lbl.addClass('checked');$containerToggle.removeClass('hide hidden');$lbl.trigger('checked.fu.checkbox')}else{$chk.prop('checked',!1);$lbl.removeClass('checked');$containerToggle.addClass('hidden');$lbl.trigger('unchecked.fu.checkbox')}
$lbl.trigger('changed.fu.checkbox',checked)},setDisabledState:function(element,disabled){var $chk=element;var $lbl=this.$label;if(disabled){this.$chk.prop('disabled',!0);$lbl.addClass('disabled');$lbl.trigger('disabled.fu.checkbox')}else{this.$chk.prop('disabled',!1);$lbl.removeClass('disabled');$lbl.trigger('enabled.fu.checkbox')}},itemchecked:function(evt){var $chk=$(evt.target);var checked=$chk.prop('checked');this.setCheckedState($chk,checked)},toggle:function(){var checked=this.isChecked();if(checked){this.uncheck()}else{this.check()}},check:function(){this.setCheckedState(this.$chk,!0)},uncheck:function(){this.setCheckedState(this.$chk,!1)},isChecked:function(){var checked=this.$chk.prop('checked');return checked},enable:function(){this.setDisabledState(this.$chk,!1)},disable:function(){this.setDisabledState(this.$chk,!0)},destroy:function(){this.$label.remove();return this.$label[0].outerHTML}};Checkbox.prototype.getValue=Checkbox.prototype.isChecked;$.fn.checkbox=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.checkbox');var options=typeof option==='object'&&option;if(!data){$this.data('fu.checkbox',(data=new Checkbox(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.checkbox.defaults={};$.fn.checkbox.Constructor=Checkbox;$.fn.checkbox.noConflict=function(){$.fn.checkbox=old;return this};$(document).on('mouseover.fu.checkbox.data-api','[data-initialize=checkbox]',function(e){var $control=$(e.target);if(!$control.data('fu.checkbox')){$control.checkbox($control.data())}});$(function(){$('[data-initialize=checkbox]').each(function(){var $this=$(this);if(!$this.data('fu.checkbox')){$this.checkbox($this.data())}})})})(jQuery);(function($){var old=$.fn.combobox;var Combobox=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.combobox.defaults,options);this.$dropMenu=this.$element.find('.dropdown-menu');this.$input=this.$element.find('input');this.$button=this.$element.find('.btn');this.$inputGroupBtn=this.$element.find('.input-group-btn');this.$element.on('click.fu.combobox','a',$.proxy(this.itemclicked,this));this.$element.on('change.fu.combobox','input',$.proxy(this.inputchanged,this));this.$element.on('shown.bs.dropdown',$.proxy(this.menuShown,this));this.$input.on('keyup.fu.combobox',$.proxy(this.keypress,this));this.setDefaultSelection();var items=this.$dropMenu.children('li');if(items.length===0){this.$button.addClass('disabled')}
if(this.options.filterOnKeypress){this.options.filter(this.$dropMenu.find('li'),this.$input.val(),this)}};Combobox.prototype={constructor:Combobox,destroy:function(){this.$element.remove();this.$element.find('input').each(function(){$(this).attr('value',$(this).val())});return this.$element[0].outerHTML},doSelect:function($item){if(typeof $item[0]!=='undefined'){this.$element.find('li.selected:first').removeClass('selected');this.$selectedItem=$item;this.$selectedItem.addClass('selected');this.$input.val(this.$selectedItem.text().trim())}else{this.$selectedItem=null;this.$element.find('li.selected:first').removeClass('selected')}},clearSelection:function(){this.$selectedItem=null;this.$input.val('');this.$dropMenu.find('li').removeClass('selected')},menuShown:function(){if(this.options.autoResizeMenu){this.resizeMenu()}},resizeMenu:function(){var width=this.$element.outerWidth();this.$dropMenu.outerWidth(width)},selectedItem:function(){var item=this.$selectedItem;var data={};if(item){var txt=this.$selectedItem.text().trim();data=$.extend({text:txt},this.$selectedItem.data())}else{data={text:this.$input.val().trim(),notFound:!0}}
return data},selectByText:function(text){var $item=$([]);this.$element.find('li').each(function(){if((this.textContent||this.innerText||$(this).text()||'').trim().toLowerCase()===(text||'').trim().toLowerCase()){$item=$(this);return!1}});this.doSelect($item)},selectByValue:function(value){var selector='li[data-value="'+value+'"]';this.selectBySelector(selector)},selectByIndex:function(index){var selector='li:eq('+index+')';this.selectBySelector(selector)},selectBySelector:function(selector){var $item=this.$element.find(selector);this.doSelect($item)},setDefaultSelection:function(){var selector='li[data-selected=true]:first';var item=this.$element.find(selector);if(item.length>0){this.selectBySelector(selector);item.removeData('selected');item.removeAttr('data-selected')}},enable:function(){this.$element.removeClass('disabled');this.$input.removeAttr('disabled');this.$button.removeClass('disabled')},disable:function(){this.$element.addClass('disabled');this.$input.attr('disabled',!0);this.$button.addClass('disabled')},itemclicked:function(e){this.$selectedItem=$(e.target).parent();this.$input.val(this.$selectedItem.text().trim()).trigger('change',{synthetic:!0});var data=this.selectedItem();this.$element.trigger('changed.fu.combobox',data);e.preventDefault();this.$element.find('.dropdown-toggle').focus()},keypress:function(e){var ENTER=13;var ESC=27;var LEFT=37;var UP=38;var RIGHT=39;var DOWN=40;var IS_NAVIGATIONAL=(e.which===UP||e.which===DOWN||e.which===LEFT||e.which===RIGHT);if(this.options.showOptionsOnKeypress&&!this.$inputGroupBtn.hasClass('open')){this.$button.dropdown('toggle');this.$input.focus()}
if(e.which===ENTER){e.preventDefault();var selected=this.$dropMenu.find('li.selected').text().trim();if(selected.length>0){this.selectByText(selected)}else{this.selectByText(this.$input.val())}
this.$inputGroupBtn.removeClass('open')}else if(e.which===ESC){e.preventDefault();this.clearSelection();this.$inputGroupBtn.removeClass('open')}else if(this.options.showOptionsOnKeypress){if(e.which===DOWN||e.which===UP){e.preventDefault();var $selected=this.$dropMenu.find('li.selected');if($selected.length>0){if(e.which===DOWN){$selected=$selected.next(':not(.hidden)')}else{$selected=$selected.prev(':not(.hidden)')}}
if($selected.length===0){if(e.which===DOWN){$selected=this.$dropMenu.find('li:not(.hidden):first')}else{$selected=this.$dropMenu.find('li:not(.hidden):last')}}
this.doSelect($selected)}}
if(this.options.filterOnKeypress&&!IS_NAVIGATIONAL){this.options.filter(this.$dropMenu.find('li'),this.$input.val(),this)}
this.previousKeyPress=e.which},inputchanged:function(e,extra){var val=$(e.target).val();if(extra&&extra.synthetic){this.selectByText(val);return}
this.selectByText(val);var data=this.selectedItem();if(data.text.length===0){data={text:val}}
this.$element.trigger('changed.fu.combobox',data)}};Combobox.prototype.getValue=Combobox.prototype.selectedItem;$.fn.combobox=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.combobox');var options=typeof option==='object'&&option;if(!data){$this.data('fu.combobox',(data=new Combobox(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.combobox.defaults={autoResizeMenu:!0,filterOnKeypress:!1,showOptionsOnKeypress:!1,filter:function filter(list,predicate,self){var visible=0;self.$dropMenu.find('.empty-indicator').remove();list.each(function(i){var $li=$(this);var text=$(this).text().trim();$li.removeClass();if(text===predicate){$li.addClass('text-success');visible++}else if(text.substr(0,predicate.length)===predicate){$li.addClass('text-info');visible++}else{$li.addClass('hidden')}});if(visible===0){self.$dropMenu.append('<li class="empty-indicator text-muted"><em>No Matches</em></li>')}}};$.fn.combobox.Constructor=Combobox;$.fn.combobox.noConflict=function(){$.fn.combobox=old;return this};$(document).on('mousedown.fu.combobox.data-api','[data-initialize=combobox]',function(e){var $control=$(e.target).closest('.combobox');if(!$control.data('fu.combobox')){$control.combobox($control.data())}});$(function(){$('[data-initialize=combobox]').each(function(){var $this=$(this);if(!$this.data('fu.combobox')){$this.combobox($this.data())}})})})(jQuery);(function($){var INVALID_DATE='Invalid Date';var MOMENT_NOT_AVAILABLE='moment.js is not available so you cannot use this function';var datepickerStack=[];var moment=!1;var old=$.fn.datepicker;var requestedMoment=!1;var runStack=function(){var i,l;requestedMoment=!0;for(i=0,l=datepickerStack.length;i<l;i++){datepickerStack[i].init.call(datepickerStack[i].scope)}
datepickerStack=[]};if(typeof define==='function'&&define.amd){require(['moment'],function(amdMoment){moment=amdMoment;runStack()},function(err){var failedId=err.requireModules&&err.requireModules[0];if(failedId==='moment'){runStack()}})}else{runStack()}
var Datepicker=function(element,options){this.$element=$(element);this.options=$.extend(!0,{},$.fn.datepicker.defaults,options);this.$calendar=this.$element.find('.datepicker-calendar');this.$days=this.$calendar.find('.datepicker-calendar-days');this.$header=this.$calendar.find('.datepicker-calendar-header');this.$headerTitle=this.$header.find('.title');this.$input=this.$element.find('input');this.$inputGroupBtn=this.$element.find('.input-group-btn');this.$wheels=this.$element.find('.datepicker-wheels');this.$wheelsMonth=this.$element.find('.datepicker-wheels-month');this.$wheelsYear=this.$element.find('.datepicker-wheels-year');this.artificialScrolling=!1;this.formatDate=this.options.formatDate||this.formatDate;this.inputValue=null;this.moment=!1;this.momentFormat=null;this.parseDate=this.options.parseDate||this.parseDate;this.preventBlurHide=!1;this.restricted=this.options.restricted||[];this.restrictedParsed=[];this.restrictedText=this.options.restrictedText;this.sameYearOnly=this.options.sameYearOnly;this.selectedDate=null;this.yearRestriction=null;this.$calendar.find('.datepicker-today').on('click.fu.datepicker',$.proxy(this.todayClicked,this));this.$days.on('click.fu.datepicker','tr td button',$.proxy(this.dateClicked,this));this.$header.find('.next').on('click.fu.datepicker',$.proxy(this.next,this));this.$header.find('.prev').on('click.fu.datepicker',$.proxy(this.prev,this));this.$headerTitle.on('click.fu.datepicker',$.proxy(this.titleClicked,this));this.$input.on('change.fu.datepicker',$.proxy(this.inputChanged,this));this.$input.on('mousedown.fu.datepicker',$.proxy(this.showDropdown,this));this.$inputGroupBtn.on('hidden.bs.dropdown',$.proxy(this.hide,this));this.$inputGroupBtn.on('shown.bs.dropdown',$.proxy(this.show,this));this.$wheels.find('.datepicker-wheels-back').on('click.fu.datepicker',$.proxy(this.backClicked,this));this.$wheels.find('.datepicker-wheels-select').on('click.fu.datepicker',$.proxy(this.selectClicked,this));this.$wheelsMonth.on('click.fu.datepicker','ul button',$.proxy(this.monthClicked,this));this.$wheelsYear.on('click.fu.datepicker','ul button',$.proxy(this.yearClicked,this));this.$wheelsYear.find('ul').on('scroll.fu.datepicker',$.proxy(this.onYearScroll,this));var init=function(){if(this.checkForMomentJS()){moment=moment||window.moment;this.moment=!0;this.momentFormat=this.options.momentConfig.format;this.setCulture(this.options.momentConfig.culture);moment.locale=moment.locale||moment.lang}
this.setRestrictedDates(this.restricted);if(!this.setDate(this.options.date)){this.$input.val('');this.inputValue=this.$input.val()}
if(this.sameYearOnly){this.yearRestriction=(this.selectedDate)?this.selectedDate.getFullYear():new Date().getFullYear()}};if(requestedMoment){init.call(this)}else{datepickerStack.push({init:init,scope:this})}};Datepicker.prototype={constructor:Datepicker,backClicked:function(){this.changeView('calendar')},changeView:function(view,date){if(view==='wheels'){this.$calendar.hide().attr('aria-hidden','true');this.$wheels.show().removeAttr('aria-hidden','');if(date){this.renderWheel(date)}}else{this.$wheels.hide().attr('aria-hidden','true');this.$calendar.show().removeAttr('aria-hidden','');if(date){this.renderMonth(date)}}},checkForMomentJS:function(){if(($.isFunction(window.moment)||(typeof moment!=='undefined'&&$.isFunction(moment)))&&$.isPlainObject(this.options.momentConfig)&&(typeof this.options.momentConfig.culture==='string'&&typeof this.options.momentConfig.format==='string')){return!0}else{return!1}},dateClicked:function(e){var $td=$(e.currentTarget).parents('td:first');var date;if($td.hasClass('restricted')){return}
this.$days.find('td.selected').removeClass('selected');$td.addClass('selected');date=new Date($td.attr('data-year'),$td.attr('data-month'),$td.attr('data-date'));this.selectedDate=date;this.$input.val(this.formatDate(date));this.inputValue=this.$input.val();this.hide();this.$input.focus();this.$element.trigger('dateClicked.fu.datepicker',date)},destroy:function(){this.$element.remove();this.$days.find('tbody').empty();this.$wheelsYear.find('ul').empty();return this.$element[0].outerHTML},disable:function(){this.$element.addClass('disabled');this.$element.find('input, button').attr('disabled','disabled');this.$inputGroupBtn.removeClass('open')},enable:function(){this.$element.removeClass('disabled');this.$element.find('input, button').removeAttr('disabled')},formatDate:function(date){var padTwo=function(value){var s='0'+value;return s.substr(s.length-2)};if(this.moment){return moment(date).format(this.momentFormat)}else{return padTwo(date.getMonth()+1)+'/'+padTwo(date.getDate())+'/'+date.getFullYear()}},getCulture:function(){if(this.moment){return moment.locale()}else{throw MOMENT_NOT_AVAILABLE}},getDate:function(){return(!this.selectedDate)?new Date(NaN):this.selectedDate},getFormat:function(){if(this.moment){return this.momentFormat}else{throw MOMENT_NOT_AVAILABLE}},getFormattedDate:function(){return(!this.selectedDate)?INVALID_DATE:this.formatDate(this.selectedDate)},getRestrictedDates:function(){return this.restricted},inputChanged:function(){var inputVal=this.$input.val();var date;if(inputVal!==this.inputValue){date=this.setDate(inputVal);if(date===null){this.$element.trigger('inputParsingFailed.fu.datepicker',inputVal)}else if(date===!1){this.$element.trigger('inputRestrictedDate.fu.datepicker',date)}else{this.$element.trigger('changed.fu.datepicker',date)}}},show:function(){var date=(this.selectedDate)?this.selectedDate:new Date();this.changeView('calendar',date);this.$inputGroupBtn.addClass('open');this.$element.trigger('shown.fu.datepicker')},showDropdown:function(e){if(!this.$input.is(':focus')&&!this.$inputGroupBtn.hasClass('open')){this.show()}},hide:function(){this.$inputGroupBtn.removeClass('open');this.$element.trigger('hidden.fu.datepicker')},hideDropdown:function(){this.hide()},isInvalidDate:function(date){var dateString=date.toString();if(dateString===INVALID_DATE||dateString==='NaN'){return!0}
return!1},isRestricted:function(date,month,year){var restricted=this.restrictedParsed;var i,from,l,to;if(this.sameYearOnly&&this.yearRestriction!==null&&year!==this.yearRestriction){return!0}
for(i=0,l=restricted.length;i<l;i++){from=restricted[i].from;to=restricted[i].to;if((year>from.year||(year===from.year&&month>from.month)||(year===from.year&&month===from.month&&date>=from.date))&&(year<to.year||(year===to.year&&month<to.month)||(year===to.year&&month===to.month&&date<=to.date))){return!0}}
return!1},monthClicked:function(e){this.$wheelsMonth.find('.selected').removeClass('selected');$(e.currentTarget).parent().addClass('selected')},next:function(){var month=this.$headerTitle.attr('data-month');var year=this.$headerTitle.attr('data-year');month++;if(month>11){if(this.sameYearOnly){return}
month=0;year++}
this.renderMonth(new Date(year,month,1))},onYearScroll:function(e){if(this.artificialScrolling){return}
var $yearUl=$(e.currentTarget);var height=($yearUl.css('box-sizing')==='border-box')?$yearUl.outerHeight():$yearUl.height();var scrollHeight=$yearUl.get(0).scrollHeight;var scrollTop=$yearUl.scrollTop();var bottomPercentage=(height/(scrollHeight-scrollTop))*100;var topPercentage=(scrollTop/scrollHeight)*100;var i,start;if(topPercentage<5){start=parseInt($yearUl.find('li:first').attr('data-year'),10);for(i=(start-1);i>(start-11);i--){$yearUl.prepend('<li data-year="'+i+'"><button type="button">'+i+'</button></li>')}
this.artificialScrolling=!0;$yearUl.scrollTop(($yearUl.get(0).scrollHeight-scrollHeight)+scrollTop);this.artificialScrolling=!1}else if(bottomPercentage>90){start=parseInt($yearUl.find('li:last').attr('data-year'),10);for(i=(start+1);i<(start+11);i++){$yearUl.append('<li data-year="'+i+'"><button type="button">'+i+'</button></li>')}}},parseDate:function(date){var self=this;var BAD_DATE=new Date(NaN);var dt,isoExp,momentParse,momentParseWithFormat,tryMomentParseAll,month,parts,use;if(date){if(this.moment){momentParseWithFormat=function(d){var md=moment(d,self.momentFormat);return(!0===md.isValid())?md.toDate():BAD_DATE};momentParse=function(d){var md=moment(new Date(d));return(!0===md.isValid())?md.toDate():BAD_DATE};tryMomentParseAll=function(rawDateString,parseFunc1,parseFunc2){var pd=parseFunc1(rawDateString);if(!self.isInvalidDate(pd)){return pd}
pd=parseFunc2(rawDateString);if(!self.isInvalidDate(pd)){return pd}
return BAD_DATE};if('string'===typeof(date)){return tryMomentParseAll(date,momentParseWithFormat,momentParse)}else{return tryMomentParseAll(date,momentParse,momentParseWithFormat)}}else{if(typeof(date)==='string'){dt=new Date(Date.parse(date));if(!this.isInvalidDate(dt)){return dt}else{date=date.split('T')[0];isoExp=/^\s*(\d{4})-(\d\d)-(\d\d)\s*$/;parts=isoExp.exec(date);if(parts){month=parseInt(parts[2],10);dt=new Date(parts[1],month-1,parts[3]);if(month===(dt.getMonth()+1)){return dt}}}}else{dt=new Date(date);if(!this.isInvalidDate(dt)){return dt}}}}
return new Date(NaN)},prev:function(){var month=this.$headerTitle.attr('data-month');var year=this.$headerTitle.attr('data-year');month--;if(month<0){if(this.sameYearOnly){return}
month=11;year--}
this.renderMonth(new Date(year,month,1))},renderMonth:function(date){date=date||new Date();var firstDay=new Date(date.getFullYear(),date.getMonth(),1).getDay();var lastDate=new Date(date.getFullYear(),date.getMonth()+1,0).getDate();var lastMonthDate=new Date(date.getFullYear(),date.getMonth(),0).getDate();var $month=this.$headerTitle.find('.month');var month=date.getMonth();var now=new Date();var nowDate=now.getDate();var nowMonth=now.getMonth();var nowYear=now.getFullYear();var selected=this.selectedDate;var $tbody=this.$days.find('tbody');var year=date.getFullYear();var curDate,curMonth,curYear,i,j,rows,stage,previousStage,lastStage,$td,$tr;if(selected){selected={date:selected.getDate(),month:selected.getMonth(),year:selected.getFullYear()}}
$month.find('.current').removeClass('current');$month.find('span[data-month="'+month+'"]').addClass('current');this.$headerTitle.find('.year').text(year);this.$headerTitle.attr({'data-month':month,'data-year':year});$tbody.empty();if(firstDay!==0){curDate=lastMonthDate-firstDay+1;stage=-1}else{curDate=1;stage=0}
rows=(lastDate<=(35-firstDay))?5:6;for(i=0;i<rows;i++){$tr=$('<tr></tr>');for(j=0;j<7;j++){$td=$('<td></td>');if(stage===-1){$td.addClass('last-month');if(previousStage!==stage){$td.addClass('first')}}else if(stage===1){$td.addClass('next-month');if(previousStage!==stage){$td.addClass('first')}}
curMonth=month+stage;curYear=year;if(curMonth<0){curMonth=11;curYear--}else if(curMonth>11){curMonth=0;curYear++}
$td.attr({'data-date':curDate,'data-month':curMonth,'data-year':curYear});if(curYear===nowYear&&curMonth===nowMonth&&curDate===nowDate){$td.addClass('current-day')}else if(curYear<nowYear||(curYear===nowYear&&curMonth<nowMonth)||(curYear===nowYear&&curMonth===nowMonth&&curDate<nowDate)){$td.addClass('past');if(!this.options.allowPastDates){$td.addClass('restricted').attr('title',this.restrictedText)}}
if(this.isRestricted(curDate,curMonth,curYear)){$td.addClass('restricted').attr('title',this.restrictedText)}
if(selected&&curYear===selected.year&&curMonth===selected.month&&curDate===selected.date){$td.addClass('selected')}
if($td.hasClass('restricted')){$td.html('<span><b class="datepicker-date">'+curDate+'</b></span>')}else{$td.html('<span><button type="button" class="datepicker-date">'+curDate+'</button></span>')}
curDate++;lastStage=previousStage;previousStage=stage;if(stage===-1&&curDate>lastMonthDate){curDate=1;stage=0;if(lastStage!==stage){$td.addClass('last')}}else if(stage===0&&curDate>lastDate){curDate=1;stage=1;if(lastStage!==stage){$td.addClass('last')}}
if(i===(rows-1)&&j===6){$td.addClass('last')}
$tr.append($td)}
$tbody.append($tr)}},renderWheel:function(date){var month=date.getMonth();var $monthUl=this.$wheelsMonth.find('ul');var year=date.getFullYear();var $yearUl=this.$wheelsYear.find('ul');var i,$monthSelected,$yearSelected;if(this.sameYearOnly){this.$wheelsMonth.addClass('full');this.$wheelsYear.addClass('hidden')}else{this.$wheelsMonth.removeClass('full');this.$wheelsYear.removeClass('hide hidden')}
$monthUl.find('.selected').removeClass('selected');$monthSelected=$monthUl.find('li[data-month="'+month+'"]');$monthSelected.addClass('selected');$monthUl.scrollTop($monthUl.scrollTop()+($monthSelected.position().top-$monthUl.outerHeight()/2-$monthSelected.outerHeight(!0)/2));$yearUl.empty();for(i=(year-10);i<(year+11);i++){$yearUl.append('<li data-year="'+i+'"><button type="button">'+i+'</button></li>')}
$yearSelected=$yearUl.find('li[data-year="'+year+'"]');$yearSelected.addClass('selected');this.artificialScrolling=!0;$yearUl.scrollTop($yearUl.scrollTop()+($yearSelected.position().top-$yearUl.outerHeight()/2-$yearSelected.outerHeight(!0)/2));this.artificialScrolling=!1;$monthSelected.find('button').focus()},selectClicked:function(){var month=this.$wheelsMonth.find('.selected').attr('data-month');var year=this.$wheelsYear.find('.selected').attr('data-year');this.changeView('calendar',new Date(year,month,1))},setCulture:function(cultureCode){if(!cultureCode){return!1}
if(this.moment){moment.locale(cultureCode)}else{throw MOMENT_NOT_AVAILABLE}},setDate:function(date){var parsed=this.parseDate(date);if(!this.isInvalidDate(parsed)){if(!this.isRestricted(parsed.getDate(),parsed.getMonth(),parsed.getFullYear())){this.selectedDate=parsed;this.renderMonth(parsed);this.$input.val(this.formatDate(parsed))}else{this.selectedDate=!1;this.renderMonth()}}else{this.selectedDate=null;this.renderMonth()}
this.inputValue=this.$input.val();return this.selectedDate},setFormat:function(format){if(!format){return!1}
if(this.moment){this.momentFormat=format}else{throw MOMENT_NOT_AVAILABLE}},setRestrictedDates:function(restricted){var parsed=[];var self=this;var i,l;var parseItem=function(val){if(val===-Infinity){return{date:-Infinity,month:-Infinity,year:-Infinity}}else if(val===Infinity){return{date:Infinity,month:Infinity,year:Infinity}}else{val=self.parseDate(val);return{date:val.getDate(),month:val.getMonth(),year:val.getFullYear()}}};this.restricted=restricted;for(i=0,l=restricted.length;i<l;i++){parsed.push({from:parseItem(restricted[i].from),to:parseItem(restricted[i].to)})}
this.restrictedParsed=parsed},titleClicked:function(e){this.changeView('wheels',new Date(this.$headerTitle.attr('data-year'),this.$headerTitle.attr('data-month'),1))},todayClicked:function(e){var date=new Date();if((date.getMonth()+'')!==this.$headerTitle.attr('data-month')||(date.getFullYear()+'')!==this.$headerTitle.attr('data-year')){this.renderMonth(date)}},yearClicked:function(e){this.$wheelsYear.find('.selected').removeClass('selected');$(e.currentTarget).parent().addClass('selected')}};Datepicker.prototype.getValue=Datepicker.prototype.getDate;$.fn.datepicker=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.datepicker');var options=typeof option==='object'&&option;if(!data){$this.data('fu.datepicker',(data=new Datepicker(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.datepicker.defaults={allowPastDates:!1,date:new Date(),formatDate:null,momentConfig:{culture:'en',format:'L'},parseDate:null,restricted:[],restrictedText:'Restricted',sameYearOnly:!1};$.fn.datepicker.Constructor=Datepicker;$.fn.datepicker.noConflict=function(){$.fn.datepicker=old;return this};$(document).on('mousedown.fu.datepicker.data-api','[data-initialize=datepicker]',function(e){var $control=$(e.target).closest('.datepicker');console.log($control.data());if(!$control.data('datepicker')){$control.datepicker($control.data())}});$(document).on('click.fu.datepicker.data-api','.datepicker .dropdown-menu',function(e){var $target=$(e.target);if(!$target.is('.datepicker-date')||$target.closest('.restricted').length){e.stopPropagation()}});$(document).on('click.fu.datepicker.data-api','.datepicker input',function(e){e.stopPropagation()});$(function(){$('[data-initialize=datepicker]').each(function(){var $this=$(this);if($this.data('datepicker')){return}
$this.datepicker($this.data())})})})(jQuery);(function($){$(document).on('click.fu.dropdown-autoflip','[data-toggle=dropdown][data-flip]',function(event){if($(this).data().flip==="auto"){_autoFlip($(this).next('.dropdown-menu'))}});$(document).on('suggested.fu.pillbox',function(event,element){_autoFlip($(element));$(element).parent().addClass('open')});function _autoFlip(menu){$(menu).css({visibility:"hidden"});if(dropUpCheck(menu)){menu.parent().addClass("dropup")}else{menu.parent().removeClass("dropup")}
$(menu).css({visibility:"visible"})}
function dropUpCheck(element){var $container=_getContainer(element);var measurements={};measurements.parentHeight=element.parent().outerHeight();measurements.parentOffsetTop=element.parent().offset().top;measurements.dropdownHeight=element.outerHeight();measurements.containerHeight=$container.overflowElement.outerHeight();measurements.containerOffsetTop=(!!$container.isWindow)?$container.overflowElement.scrollTop():$container.overflowElement.offset().top;measurements.fromTop=measurements.parentOffsetTop-measurements.containerOffsetTop;measurements.fromBottom=measurements.containerHeight-measurements.parentHeight-(measurements.parentOffsetTop-measurements.containerOffsetTop);if(measurements.dropdownHeight<measurements.fromBottom){return!1}else if(measurements.dropdownHeight<measurements.fromTop){return!0}else if(measurements.dropdownHeight>=measurements.fromTop&&measurements.dropdownHeight>=measurements.fromBottom){if(measurements.fromTop>=measurements.fromBottom){return!0}else{return!1}}}
function _getContainer(element){var targetSelector=element.attr('data-target');var isWindow=!0;var containerElement;if(!targetSelector){$.each(element.parents(),function(index,parentElement){if($(parentElement).css('overflow')!=='visible'){containerElement=parentElement;isWindow=!1;return!1}})}else if(targetSelector!=='window'){containerElement=$(targetSelector);isWindow=!1}
if(isWindow){containerElement=window}
return{overflowElement:$(containerElement),isWindow:isWindow}}
$.fn.dropdownautoflip=function(){}})(jQuery);(function($){var old=$.fn.loader;var Loader=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.loader.defaults,options)};Loader.prototype={constructor:Loader,destroy:function(){this.$element.remove();return this.$element[0].outerHTML},ieRepaint:function(){},msieVersion:function(){},next:function(){},pause:function(){},play:function(){},previous:function(){},reset:function(){}};$.fn.loader=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.loader');var options=typeof option==='object'&&option;if(!data){$this.data('fu.loader',(data=new Loader(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.loader.defaults={};$.fn.loader.Constructor=Loader;$.fn.loader.noConflict=function(){$.fn.loader=old;return this};$(function(){$('[data-initialize=loader]').each(function(){var $this=$(this);if(!$this.data('fu.loader')){$this.loader($this.data())}})})})(jQuery);(function($){var old=$.fn.placard;var EVENT_CALLBACK_MAP={'accepted':'onAccept','cancelled':'onCancel'};var Placard=function Placard(element,options){var self=this;this.$element=$(element);this.options=$.extend({},$.fn.placard.defaults,options);if(this.$element.attr('data-ellipsis')==='true'){this.options.applyEllipsis=!0}
this.$accept=this.$element.find('.placard-accept');this.$cancel=this.$element.find('.placard-cancel');this.$field=this.$element.find('.placard-field');this.$footer=this.$element.find('.placard-footer');this.$header=this.$element.find('.placard-header');this.$popup=this.$element.find('.placard-popup');this.actualValue=null;this.clickStamp='_';this.previousValue='';if(this.options.revertOnCancel===-1){this.options.revertOnCancel=(this.$accept.length>0)}
this.isContentEditableDiv=this.$field.is('div');this.isInput=this.$field.is('input');this.divInTextareaMode=(this.isContentEditableDiv&&this.$field.attr('data-textarea')==='true');this.$field.on('focus.fu.placard',$.proxy(this.show,this));this.$field.on('keydown.fu.placard',$.proxy(this.keyComplete,this));this.$element.on('close.fu.placard',$.proxy(this.hide,this));this.$accept.on('click.fu.placard',$.proxy(this.complete,this,'accepted'));this.$cancel.on('click.fu.placard',function(e){e.preventDefault();self.complete('cancelled')});this.applyEllipsis()};var _isShown=function _isShown(placard){return placard.$element.hasClass('showing')};var _closeOtherPlacards=function _closeOtherPlacards(){var otherPlacards;otherPlacards=$(document).find('.placard.showing');if(otherPlacards.length>0){if(otherPlacards.data('fu.placard')&&otherPlacards.data('fu.placard').options.explicit){return!1}
otherPlacards.placard('externalClickListener',{},!0)}
return!0};Placard.prototype={constructor:Placard,complete:function complete(action){var func=this.options[EVENT_CALLBACK_MAP[action]];var obj={previousValue:this.previousValue,value:this.getValue()};if(func){func(obj);this.$element.trigger(action+'.fu.placard',obj)}else{if(action==='cancelled'&&this.options.revertOnCancel){this.setValue(this.previousValue,!0)}
this.$element.trigger(action+'.fu.placard',obj);this.hide()}},keyComplete:function keyComplete(e){if(((this.isContentEditableDiv&&!this.divInTextareaMode)||this.isInput)&&e.keyCode===13){this.complete('accepted');this.$field.blur()}else if(e.keyCode===27){this.complete('cancelled');this.$field.blur()}},destroy:function destroy(){this.$element.remove();$(document).off('click.fu.placard.externalClick.'+this.clickStamp);this.$element.find('input').each(function(){$(this).attr('value',$(this).val())});return this.$element[0].outerHTML},disable:function disable(){this.$element.addClass('disabled');this.$field.attr('disabled','disabled');if(this.isContentEditableDiv){this.$field.removeAttr('contenteditable')}
this.hide()},applyEllipsis:function applyEllipsis(){var field,i,str;if(this.options.applyEllipsis){field=this.$field.get(0);if((this.isContentEditableDiv&&!this.divInTextareaMode)||this.isInput){field.scrollLeft=0}else{field.scrollTop=0;if(field.clientHeight<field.scrollHeight){this.actualValue=this.getValue();this.setValue('',!0);str='';i=0;while(field.clientHeight>=field.scrollHeight){str+=this.actualValue[i];this.setValue(str+'...',!0);i++}
str=(str.length>0)?str.substring(0,str.length-1):'';this.setValue(str+'...',!0)}}}},enable:function enable(){this.$element.removeClass('disabled');this.$field.removeAttr('disabled');if(this.isContentEditableDiv){this.$field.attr('contenteditable','true')}},externalClickListener:function externalClickListener(e,force){if(force===!0||this.isExternalClick(e)){this.complete(this.options.externalClickAction)}},getValue:function getValue(){if(this.actualValue!==null){return this.actualValue}else if(this.isContentEditableDiv){return this.$field.html()}else{return this.$field.val()}},hide:function hide(){if(!this.$element.hasClass('showing')){return}
this.$element.removeClass('showing');this.applyEllipsis();$(document).off('click.fu.placard.externalClick.'+this.clickStamp);this.$element.trigger('hidden.fu.placard')},isExternalClick:function isExternalClick(e){var el=this.$element.get(0);var exceptions=this.options.externalClickExceptions||[];var $originEl=$(e.target);var i,l;if(e.target===el||$originEl.parents('.placard:first').get(0)===el){return!1}else{for(i=0,l=exceptions.length;i<l;i++){if($originEl.is(exceptions[i])||$originEl.parents(exceptions[i]).length>0){return!1}}}
return!0},setValue:function setValue(val,suppressEllipsis){if(typeof suppressEllipsis==='undefined'){suppressEllipsis=!this.options.applyEllipsis}
if(this.isContentEditableDiv){this.$field.empty().append(val)}else{this.$field.val(val)}
if(!suppressEllipsis&&!_isShown(this)){this.applyEllipsis()}
return this.$field},show:function show(){if(_isShown(this)){return}
if(!_closeOtherPlacards()){return}
this.previousValue=(this.isContentEditableDiv)?this.$field.html():this.$field.val();if(this.actualValue!==null){this.setValue(this.actualValue,!0);this.actualValue=null}
this.showPlacard()},showPlacard:function showPlacard(){this.$element.addClass('showing');if(this.$header.length>0){this.$popup.css('top','-'+this.$header.outerHeight(!0)+'px')}
if(this.$footer.length>0){this.$popup.css('bottom','-'+this.$footer.outerHeight(!0)+'px')}
this.$element.trigger('shown.fu.placard');this.clickStamp=new Date().getTime()+(Math.floor(Math.random()*100)+1);if(!this.options.explicit){$(document).on('click.fu.placard.externalClick.'+this.clickStamp,$.proxy(this.externalClickListener,this))}}};$.fn.placard=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.placard');var options=typeof option==='object'&&option;if(!data){$this.data('fu.placard',(data=new Placard(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.placard.defaults={onAccept:undefined,onCancel:undefined,externalClickAction:'cancelled',externalClickExceptions:[],explicit:!1,revertOnCancel:-1,applyEllipsis:!1};$.fn.placard.Constructor=Placard;$.fn.placard.noConflict=function(){$.fn.placard=old;return this};$(document).on('focus.fu.placard.data-api','[data-initialize=placard]',function(e){var $control=$(e.target).closest('.placard');if(!$control.data('fu.placard')){$control.placard($control.data())}});$(function(){$('[data-initialize=placard]').each(function(){var $this=$(this);if($this.data('fu.placard'))return;$this.placard($this.data())})})})(jQuery);(function($){var old=$.fn.radio;var Radio=function(element,options){this.options=$.extend({},$.fn.radio.defaults,options);if(element.tagName.toLowerCase()!=='label'){return}
this.$label=$(element);this.$radio=this.$label.find('input[type="radio"]');this.groupName=this.$radio.attr('name');var containerSelector=this.$radio.attr('data-toggle');this.$toggleContainer=$(containerSelector);this.$radio.on('change',$.proxy(this.itemchecked,this));this.setInitialState()};Radio.prototype={constructor:Radio,setInitialState:function(){var $radio=this.$radio;var $lbl=this.$label;var checked=$radio.prop('checked');var disabled=$radio.prop('disabled');this.setCheckedState($radio,checked);this.setDisabledState($radio,disabled)},resetGroup:function(){var $radios=$('input[name="'+this.groupName+'"]');$radios.each(function(index,item){var $radio=$(item);var $lbl=$radio.parent();var containerSelector=$radio.attr('data-toggle');var $containerToggle=$(containerSelector);$lbl.removeClass('checked');$containerToggle.addClass('hidden')})},setCheckedState:function(element,checked){var $radio=element;var $lbl=$radio.parent();var containerSelector=$radio.attr('data-toggle');var $containerToggle=$(containerSelector);if(checked){this.resetGroup();$radio.prop('checked',!0);$lbl.addClass('checked');$containerToggle.removeClass('hide hidden');$lbl.trigger('checked.fu.radio')}else{$radio.prop('checked',!1);$lbl.removeClass('checked');$containerToggle.addClass('hidden');$lbl.trigger('unchecked.fu.radio')}
$lbl.trigger('changed.fu.radio',checked)},setDisabledState:function(element,disabled){var $radio=element;var $lbl=this.$label;if(disabled){this.$radio.prop('disabled',!0);$lbl.addClass('disabled');$lbl.trigger('disabled.fu.radio')}else{this.$radio.prop('disabled',!1);$lbl.removeClass('disabled');$lbl.trigger('enabled.fu.radio')}},itemchecked:function(evt){var $radio=$(evt.target);this.setCheckedState($radio,!0)},check:function(){this.setCheckedState(this.$radio,!0)},uncheck:function(){this.setCheckedState(this.$radio,!1)},isChecked:function(){var checked=this.$radio.prop('checked');return checked},enable:function(){this.setDisabledState(this.$radio,!1)},disable:function(){this.setDisabledState(this.$radio,!0)},destroy:function(){this.$label.remove();return this.$label[0].outerHTML}};Radio.prototype.getValue=Radio.prototype.isChecked;$.fn.radio=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.radio');var options=typeof option==='object'&&option;if(!data){$this.data('fu.radio',(data=new Radio(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.radio.defaults={};$.fn.radio.Constructor=Radio;$.fn.radio.noConflict=function(){$.fn.radio=old;return this};$(document).on('mouseover.fu.radio.data-api','[data-initialize=radio]',function(e){var $control=$(e.target);if(!$control.data('fu.radio')){$control.radio($control.data())}});$(function(){$('[data-initialize=radio]').each(function(){var $this=$(this);if(!$this.data('fu.radio')){$this.radio($this.data())}})})})(jQuery);(function($){var old=$.fn.search;var Search=function(element,options){this.$element=$(element);this.$repeater=$(element).closest('.repeater');this.options=$.extend({},$.fn.search.defaults,options);if(this.$element.attr('data-searchOnKeyPress')==='true'){this.options.searchOnKeyPress=!0}
this.$button=this.$element.find('button');this.$input=this.$element.find('input');this.$icon=this.$element.find('.glyphicon, .fuelux-icon');this.$button.on('click.fu.search',$.proxy(this.buttonclicked,this));this.$input.on('keyup.fu.search',$.proxy(this.keypress,this));if(this.$repeater.length>0){this.$repeater.on('rendered.fu.repeater',$.proxy(this.clearPending,this))}
this.activeSearch=''};Search.prototype={constructor:Search,destroy:function(){this.$element.remove();this.$element.find('input').each(function(){$(this).attr('value',$(this).val())});return this.$element[0].outerHTML},search:function(searchText){if(this.$icon.hasClass('glyphicon')){this.$icon.removeClass('glyphicon-search').addClass('glyphicon-remove')}
if(this.$icon.hasClass('fuelux-icon')){this.$icon.removeClass('fuelux-icon-search').addClass('fuelux-icon-remove')}
this.activeSearch=searchText;this.$element.addClass('searched pending');this.$element.trigger('searched.fu.search',searchText)},clear:function(){if(this.$icon.hasClass('glyphicon')){this.$icon.removeClass('glyphicon-remove').addClass('glyphicon-search')}
if(this.$icon.hasClass('fuelux-icon')){this.$icon.removeClass('fuelux-icon-remove').addClass('fuelux-icon-search')}
if(this.$element.hasClass('pending')){this.$element.trigger('canceled.fu.search')}
this.activeSearch='';this.$input.val('');this.$element.trigger('cleared.fu.search');this.$element.removeClass('searched pending')},clearPending:function(){this.$element.removeClass('pending')},action:function(){var val=this.$input.val();if(val&&val.length>0){this.search(val)}else{this.clear()}},buttonclicked:function(e){e.preventDefault();if($(e.currentTarget).is('.disabled, :disabled'))return;if(this.$element.hasClass('pending')||this.$element.hasClass('searched')){this.clear()}else{this.action()}},keypress:function(e){var ENTER_KEY_CODE=13;var TAB_KEY_CODE=9;var ESC_KEY_CODE=27;if(e.which===ENTER_KEY_CODE){e.preventDefault();this.action()}else if(e.which===TAB_KEY_CODE){e.preventDefault()}else if(e.which===ESC_KEY_CODE){e.preventDefault();this.clear()}else if(this.options.searchOnKeyPress){this.action()}},disable:function(){this.$element.addClass('disabled');this.$input.attr('disabled','disabled');if(!this.options.allowCancel){this.$button.addClass('disabled')}},enable:function(){this.$element.removeClass('disabled');this.$input.removeAttr('disabled');this.$button.removeClass('disabled')}};$.fn.search=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.search');var options=typeof option==='object'&&option;if(!data){$this.data('fu.search',(data=new Search(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.search.defaults={clearOnEmpty:!1,searchOnKeyPress:!1,allowCancel:!1};$.fn.search.Constructor=Search;$.fn.search.noConflict=function(){$.fn.search=old;return this};$(document).on('mousedown.fu.search.data-api','[data-initialize=search]',function(e){var $control=$(e.target).closest('.search');if(!$control.data('fu.search')){$control.search($control.data())}});$(function(){$('[data-initialize=search]').each(function(){var $this=$(this);if($this.data('fu.search'))return;$this.search($this.data())})})})(jQuery);(function($){var old=$.fn.selectlist;var Selectlist=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.selectlist.defaults,options);this.$button=this.$element.find('.btn.dropdown-toggle');this.$hiddenField=this.$element.find('.hidden-field');this.$label=this.$element.find('.selected-label');this.$dropdownMenu=this.$element.find('.dropdown-menu');this.$element.on('click.fu.selectlist','.dropdown-menu a',$.proxy(this.itemClicked,this));this.setDefaultSelection();if(options.resize==='auto'||this.$element.attr('data-resize')==='auto'){this.resize()}
var items=this.$dropdownMenu.children('li');if(items.length===0){this.disable();this.doSelect($(this.options.emptyLabelHTML))}
this.$element.on('shown.bs.dropdown',function(){var $this=$(this);$(document).on('keypress.fu.selectlist',function(e){var key=String.fromCharCode(e.which);$this.find("li").each(function(idx,item){if($(item).text().charAt(0).toLowerCase()===key){$(item).children('a').focus();return!1}})})});this.$element.on('hide.bs.dropdown',function(){$(document).off('keypress.fu.selectlist')})};Selectlist.prototype={constructor:Selectlist,destroy:function(){this.$element.remove();return this.$element[0].outerHTML},doSelect:function($item){var $selectedItem;this.$selectedItem=$selectedItem=$item;this.$hiddenField.val(this.$selectedItem.attr('data-value'));this.$label.html($(this.$selectedItem.children()[0]).html());this.$element.find('li').each(function(){if($selectedItem.is($(this))){$(this).attr('data-selected',!0)}else{$(this).removeData('selected').removeAttr('data-selected')}})},itemClicked:function(e){this.$element.trigger('clicked.fu.selectlist',this.$selectedItem);e.preventDefault();if($(e.currentTarget).parent('li').is('.disabled, :disabled')){return}
if(!($(e.target).parent().is(this.$selectedItem))){this.itemChanged(e)}
this.$element.find('.dropdown-toggle').focus()},itemChanged:function(e){this.doSelect($(e.target).closest('li'));var data=this.selectedItem();this.$element.trigger('changed.fu.selectlist',data)},resize:function(){var width=0;var newWidth=0;var sizer=$('<div/>').addClass('selectlist-sizer');if(Boolean($(document).find('html').hasClass('fuelux'))){$(document.body).append(sizer)}else{$('.fuelux:first').append(sizer)}
sizer.append(this.$element.clone());this.$element.find('a').each(function(){sizer.find('.selected-label').text($(this).text());newWidth=sizer.find('.selectlist').outerWidth();newWidth=newWidth+sizer.find('.sr-only').outerWidth();if(newWidth>width){width=newWidth}});if(width<=1){return}
this.$button.css('width',width);this.$dropdownMenu.css('width',width);sizer.remove()},selectedItem:function(){var txt=this.$selectedItem.text();return $.extend({text:txt},this.$selectedItem.data())},selectByText:function(text){var $item=$([]);this.$element.find('li').each(function(){if((this.textContent||this.innerText||$(this).text()||'').toLowerCase()===(text||'').toLowerCase()){$item=$(this);return!1}});this.doSelect($item)},selectByValue:function(value){var selector='li[data-value="'+value+'"]';this.selectBySelector(selector)},selectByIndex:function(index){var selector='li:eq('+index+')';this.selectBySelector(selector)},selectBySelector:function(selector){var $item=this.$element.find(selector);this.doSelect($item)},setDefaultSelection:function(){var $item=this.$element.find('li[data-selected=true]').eq(0);if($item.length===0){$item=this.$element.find('li').has('a').eq(0)}
this.doSelect($item)},enable:function(){this.$element.removeClass('disabled');this.$button.removeClass('disabled')},disable:function(){this.$element.addClass('disabled');this.$button.addClass('disabled')}};Selectlist.prototype.getValue=Selectlist.prototype.selectedItem;$.fn.selectlist=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.selectlist');var options=typeof option==='object'&&option;if(!data){$this.data('fu.selectlist',(data=new Selectlist(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.selectlist.defaults={emptyLabelHTML:'<li data-value=""><a href="#">No items</a></li>'};$.fn.selectlist.Constructor=Selectlist;$.fn.selectlist.noConflict=function(){$.fn.selectlist=old;return this};$(document).on('mousedown.fu.selectlist.data-api','[data-initialize=selectlist]',function(e){var $control=$(e.target).closest('.selectlist');if(!$control.data('fu.selectlist')){$control.selectlist($control.data())}});$(function(){$('[data-initialize=selectlist]').each(function(){var $this=$(this);if(!$this.data('fu.selectlist')){$this.selectlist($this.data())}})})})(jQuery);(function($){var old=$.fn.spinbox;var Spinbox=function Spinbox(element,options){this.$element=$(element);this.$element.find('.btn').on('click',function(e){e.preventDefault()});this.options=$.extend({},$.fn.spinbox.defaults,options);this.options.step=this.$element.data('step')||this.options.step;if(this.options.value<this.options.min){this.options.value=this.options.min}else if(this.options.max<this.options.value){this.options.value=this.options.max}
this.$input=this.$element.find('.spinbox-input');this.$input.on('focusout.fu.spinbox',this.$input,$.proxy(this.change,this));this.$element.on('keydown.fu.spinbox',this.$input,$.proxy(this.keydown,this));this.$element.on('keyup.fu.spinbox',this.$input,$.proxy(this.keyup,this));if(this.options.hold){this.$element.on('mousedown.fu.spinbox','.spinbox-up',$.proxy(function(){this.startSpin(!0)},this));this.$element.on('mouseup.fu.spinbox','.spinbox-up, .spinbox-down',$.proxy(this.stopSpin,this));this.$element.on('mouseout.fu.spinbox','.spinbox-up, .spinbox-down',$.proxy(this.stopSpin,this));this.$element.on('mousedown.fu.spinbox','.spinbox-down',$.proxy(function(){this.startSpin(!1)},this))}else{this.$element.on('click.fu.spinbox','.spinbox-up',$.proxy(function(){this.step(!0)},this));this.$element.on('click.fu.spinbox','.spinbox-down',$.proxy(function(){this.step(!1)},this))}
this.switches={count:1,enabled:!0};if(this.options.speed==='medium'){this.switches.speed=300}else if(this.options.speed==='fast'){this.switches.speed=100}else{this.switches.speed=500}
this.options.defaultUnit=_isUnitLegal(this.options.defaultUnit,this.options.units)?this.options.defaultUnit:'';this.unit=this.options.defaultUnit;this.lastValue=this.options.value;this.render();if(this.options.disabled){this.disable()}};var _limitToStep=function _limitToStep(number,step){return Math.round(number/step)*step};var _isUnitLegal=function _isUnitLegal(unit,validUnits){var legalUnit=!1;var suspectUnit=unit.toLowerCase();$.each(validUnits,function(i,validUnit){validUnit=validUnit.toLowerCase();if(suspectUnit===validUnit){legalUnit=!0;return!1}});return legalUnit};var _applyLimits=function _applyLimits(value){if(isNaN(parseFloat(value))){return value}
if(value>this.options.max){if(this.options.cycle){value=this.options.min}else{value=this.options.max}}else if(value<this.options.min){if(this.options.cycle){value=this.options.max}else{value=this.options.min}}
if(this.options.limitToStep&&this.options.step){value=_limitToStep(value,this.options.step);if(value>this.options.max){value=value-this.options.step}else if(value<this.options.min){value=value+this.options.step}}
return value};Spinbox.prototype={constructor:Spinbox,destroy:function destroy(){this.$element.remove();this.$element.find('input').each(function(){$(this).attr('value',$(this).val())});return this.$element[0].outerHTML},render:function render(){this._setValue(this.getDisplayValue())},change:function change(){this._setValue(this.getDisplayValue());this.triggerChangedEvent()},stopSpin:function stopSpin(){if(this.switches.timeout!==undefined){clearTimeout(this.switches.timeout);this.switches.count=1;this.triggerChangedEvent()}},triggerChangedEvent:function triggerChangedEvent(){var currentValue=this.getValue();if(currentValue===this.lastValue)return;this.lastValue=currentValue;this.$element.trigger('changed.fu.spinbox',currentValue)},startSpin:function startSpin(type){if(!this.options.disabled){var divisor=this.switches.count;if(divisor===1){this.step(type);divisor=1}else if(divisor<3){divisor=1.5}else if(divisor<8){divisor=2.5}else{divisor=4}
this.switches.timeout=setTimeout($.proxy(function(){this.iterate(type)},this),this.switches.speed/divisor);this.switches.count++}},iterate:function iterate(type){this.step(type);this.startSpin(type)},step:function step(isIncrease){this._setValue(this.getDisplayValue());var newVal;if(isIncrease){newVal=this.options.value+this.options.step}else{newVal=this.options.value-this.options.step}
newVal=newVal.toFixed(5);this._setValue(newVal+this.unit)},getDisplayValue:function getDisplayValue(){var inputValue=this.parseInput(this.$input.val());var value=(!!inputValue)?inputValue:this.options.value;return value},setDisplayValue:function setDisplayValue(value){this.$input.val(value)},getValue:function getValue(){var val=this.options.value;if(this.options.decimalMark!=='.'){val=(val+'').split('.').join(this.options.decimalMark)}
return val+this.unit},setValue:function setValue(val){return this._setValue(val,!0)},_setValue:function _setValue(val,shouldSetLastValue){if(this.options.decimalMark!=='.'){val=this.parseInput(val)}
if(typeof val!=="number"){var potentialUnit=val.replace(/[0-9.-]/g,'');this.unit=_isUnitLegal(potentialUnit,this.options.units)?potentialUnit:this.options.defaultUnit}
var intVal=this.getIntValue(val);if(isNaN(intVal)&&!isFinite(intVal)){return this._setValue(this.options.value,shouldSetLastValue)}
intVal=_applyLimits.call(this,intVal);this.options.value=intVal;val=intVal+this.unit;if(this.options.decimalMark!=='.'){val=(val+'').split('.').join(this.options.decimalMark)}
this.setDisplayValue(val);if(shouldSetLastValue){this.lastValue=val}
return this},value:function value(val){if(val||val===0){return this.setValue(val)}else{return this.getValue()}},parseInput:function parseInput(value){value=(value+'').split(this.options.decimalMark).join('.');return value},getIntValue:function getIntValue(value){value=(typeof value==="undefined")?this.getValue():value;if(typeof value==="undefined"){return}
if(typeof value==='string'){value=this.parseInput(value)}
value=parseFloat(value,10);return value},disable:function disable(){this.options.disabled=!0;this.$element.addClass('disabled');this.$input.attr('disabled','');this.$element.find('button').addClass('disabled')},enable:function enable(){this.options.disabled=!1;this.$element.removeClass('disabled');this.$input.removeAttr('disabled');this.$element.find('button').removeClass('disabled')},keydown:function keydown(event){var keyCode=event.keyCode;if(keyCode===38){this.step(!0)}else if(keyCode===40){this.step(!1)}else if(keyCode===13){this.change()}},keyup:function keyup(event){var keyCode=event.keyCode;if(keyCode===38||keyCode===40){this.triggerChangedEvent()}}};$.fn.spinbox=function spinbox(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.spinbox');var options=typeof option==='object'&&option;if(!data){$this.data('fu.spinbox',(data=new Spinbox(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.spinbox.defaults={value:0,min:0,max:999,step:1,hold:!0,speed:'medium',disabled:!1,cycle:!1,units:[],decimalMark:'.',defaultUnit:'',limitToStep:!1};$.fn.spinbox.Constructor=Spinbox;$.fn.spinbox.noConflict=function noConflict(){$.fn.spinbox=old;return this};$(document).on('mousedown.fu.spinbox.data-api','[data-initialize=spinbox]',function(e){var $control=$(e.target).closest('.spinbox');if(!$control.data('fu.spinbox')){$control.spinbox($control.data())}});$(function(){$('[data-initialize=spinbox]').each(function(){var $this=$(this);if(!$this.data('fu.spinbox')){$this.spinbox($this.data())}})})})(jQuery);(function($){var old=$.fn.tree;var Tree=function Tree(element,options){this.$element=$(element);this.options=$.extend({},$.fn.tree.defaults,options);if(this.options.itemSelect){this.$element.on('click.fu.tree','.tree-item',$.proxy(function(ev){this.selectItem(ev.currentTarget)},this))}
this.$element.on('click.fu.tree','.tree-branch-name',$.proxy(function(ev){this.toggleFolder(ev.currentTarget)},this));this.$element.on('click.fu.tree','.tree-overflow',$.proxy(function(ev){this.populate($(ev.currentTarget))},this));if(this.options.folderSelect){this.$element.addClass('tree-folder-select');this.$element.off('click.fu.tree','.tree-branch-name');this.$element.on('click.fu.tree','.icon-caret',$.proxy(function(ev){this.toggleFolder($(ev.currentTarget).parent())},this));this.$element.on('click.fu.tree','.tree-branch-name',$.proxy(function(ev){this.selectFolder($(ev.currentTarget))},this))}
this.render()};Tree.prototype={constructor:Tree,deselectAll:function deselectAll(nodes){nodes=nodes||this.$element;var $selectedElements=$(nodes).find('.tree-selected');$selectedElements.each(function(index,element){styleNodeDeselected($(element),$(element).find('.glyphicon'))});return $selectedElements},destroy:function destroy(){this.$element.find("li:not([data-template])").remove();this.$element.remove();return this.$element[0].outerHTML},render:function render(){this.populate(this.$element)},populate:function populate($el,isBackgroundProcess){var self=this;var isOverflow=$el.hasClass('tree-overflow');var $parent=($el.hasClass('tree'))?$el:$el.parent();var atRoot=$parent.hasClass('tree');if(isOverflow&&!atRoot){$parent=$parent.parent()}
var treeData=$parent.data();if(isOverflow){treeData.overflow=$el.data()}
isBackgroundProcess=isBackgroundProcess||!1;if(isOverflow){if(atRoot){$el.replaceWith($parent.find('> .tree-loader').remove())}else{$el.remove()}}
var $loader=$parent.find('.tree-loader:last');if(isBackgroundProcess===!1){$loader.removeClass('hide hidden')}
this.options.dataSource(treeData?treeData:{},function(items){$.each(items.data,function(index,value){var $entity;if(value.type==='folder'){$entity=self.$element.find('[data-template=treebranch]:eq(0)').clone().removeClass('hide hidden').removeData('template').removeAttr('data-template');$entity.data(value);$entity.find('.tree-branch-name > .tree-label').html(value.text||value.name)}else if(value.type==='item'){$entity=self.$element.find('[data-template=treeitem]:eq(0)').clone().removeClass('hide hidden').removeData('template').removeAttr('data-template');$entity.find('.tree-item-name > .tree-label').html(value.text||value.name);$entity.data(value)}else if(value.type==='overflow'){$entity=self.$element.find('[data-template=treeoverflow]:eq(0)').clone().removeClass('hide hidden').removeData('template').removeAttr('data-template');$entity.find('.tree-overflow-name > .tree-label').html(value.text||value.name);$entity.data(value)}
var attr=value.attr||value.dataAttributes||[];$.each(attr,function(key,value){switch(key){case 'cssClass':case 'class':case 'className':$entity.addClass(value);break;case 'data-icon':$entity.find('.icon-item').removeClass().addClass('icon-item '+value);$entity.attr(key,value);break;case 'id':$entity.attr(key,value);$entity.attr('aria-labelledby',value+'-label');$entity.find('.tree-branch-name > .tree-label').attr('id',value+'-label');break;default:$entity.attr(key,value);break}});if(atRoot){$parent.append($entity)}else{$parent.find('.tree-branch-children:eq(0)').append($entity)}});$parent.find('.tree-loader').addClass('hidden');self.$element.trigger('loaded.fu.tree',$parent)})},selectTreeNode:function selectItem(clickedElement,nodeType){var clicked={};clicked.$element=$(clickedElement);var selected={};selected.$elements=this.$element.find('.tree-selected');selected.dataForEvent=[];if(nodeType==='folder'){clicked.$element=clicked.$element.closest('.tree-branch');clicked.$icon=clicked.$element.find('.icon-folder')}else{clicked.$icon=clicked.$element.find('.icon-item')}
clicked.elementData=clicked.$element.data();if(this.options.multiSelect){multiSelectSyncNodes(this,clicked,selected)}else{singleSelectSyncNodes(this,clicked,selected)}
this.$element.trigger(selected.eventType+'.fu.tree',{target:clicked.elementData,selected:selected.dataForEvent});clicked.$element.trigger('updated.fu.tree',{selected:selected.dataForEvent,item:clicked.$element,eventType:selected.eventType})},discloseFolder:function discloseFolder(el){var $el=$(el);var $branch=$el.closest('.tree-branch');var $treeFolderContent=$branch.find('.tree-branch-children');var $treeFolderContentFirstChild=$treeFolderContent.eq(0);$branch.addClass('tree-open');$branch.attr('aria-expanded','true');$treeFolderContentFirstChild.removeClass('hide hidden');$branch.find('> .tree-branch-header .icon-folder').eq(0).removeClass('glyphicon-folder-close').addClass('glyphicon-folder-open');if(!$treeFolderContent.children().length){this.populate($treeFolderContent)}
this.$element.trigger('disclosedFolder.fu.tree',$branch.data())},closeFolder:function closeFolder(el){var $el=$(el);var $branch=$el.closest('.tree-branch');var $treeFolderContent=$branch.find('.tree-branch-children');var $treeFolderContentFirstChild=$treeFolderContent.eq(0);$branch.removeClass('tree-open');$branch.attr('aria-expanded','false');$treeFolderContentFirstChild.addClass('hidden');$branch.find('> .tree-branch-header .icon-folder').eq(0).removeClass('glyphicon-folder-open').addClass('glyphicon-folder-close');if(!this.options.cacheItems){$treeFolderContentFirstChild.empty()}
this.$element.trigger('closed.fu.tree',$branch.data())},toggleFolder:function toggleFolder(el){var $el=$(el);if($el.find('.glyphicon-folder-close').length){this.discloseFolder(el)}else if($el.find('.glyphicon-folder-open').length){this.closeFolder(el)}},selectFolder:function selectFolder(el){if(this.options.folderSelect){this.selectTreeNode(el,'folder')}},selectItem:function selectItem(el){if(this.options.itemSelect){this.selectTreeNode(el,'item')}},selectedItems:function selectedItems(){var $sel=this.$element.find('.tree-selected');var data=[];$.each($sel,function(index,value){data.push($(value).data())});return data},collapse:function collapse(){var self=this;var reportedClosed=[];var closedReported=function closedReported(event,closed){reportedClosed.push(closed);if(self.$element.find(".tree-branch.tree-open:not('.hidden, .hide')").length===0){self.$element.trigger('closedAll.fu.tree',{tree:self.$element,reportedClosed:reportedClosed});self.$element.off('loaded.fu.tree',self.$element,closedReported)}};self.$element.on('closed.fu.tree',closedReported);self.$element.find(".tree-branch.tree-open:not('.hidden, .hide')").each(function(){self.closeFolder(this)})},discloseVisible:function discloseVisible(){var self=this;var $openableFolders=self.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')");var reportedOpened=[];var openReported=function openReported(event,opened){reportedOpened.push(opened);if(reportedOpened.length===$openableFolders.length){self.$element.trigger('disclosedVisible.fu.tree',{tree:self.$element,reportedOpened:reportedOpened});self.$element.off('loaded.fu.tree',self.$element,openReported)}};self.$element.on('loaded.fu.tree',openReported);self.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')").each(function triggerOpen(){self.discloseFolder($(this).find('.tree-branch-header'))})},discloseAll:function discloseAll(){var self=this;if(typeof self.$element.data('disclosures')==='undefined'){self.$element.data('disclosures',0)}
var isExceededLimit=(self.options.disclosuresUpperLimit>=1&&self.$element.data('disclosures')>=self.options.disclosuresUpperLimit);var isAllDisclosed=self.$element.find(".tree-branch:not('.tree-open, .hidden, .hide')").length===0;if(!isAllDisclosed){if(isExceededLimit){self.$element.trigger('exceededDisclosuresLimit.fu.tree',{tree:self.$element,disclosures:self.$element.data('disclosures')});if(!self.$element.data('ignore-disclosures-limit')){return}}
self.$element.data('disclosures',self.$element.data('disclosures')+1);self.$element.one('disclosedVisible.fu.tree',function(){self.discloseAll()});self.discloseVisible()}else{self.$element.trigger('disclosedAll.fu.tree',{tree:self.$element,disclosures:self.$element.data('disclosures')});if(!self.options.cacheItems){self.$element.one('closeAll.fu.tree',function(){self.$element.data('disclosures',0)})}}},refreshFolder:function refreshFolder($el){var $treeFolder=$el.closest('.tree-branch');var $treeFolderChildren=$treeFolder.find('.tree-branch-children');$treeFolderChildren.eq(0).empty();if($treeFolder.hasClass('tree-open')){this.populate($treeFolderChildren,!1)}else{this.populate($treeFolderChildren,!0)}
this.$element.trigger('refreshedFolder.fu.tree',$treeFolder.data())}};Tree.prototype.closeAll=Tree.prototype.collapse;Tree.prototype.openFolder=Tree.prototype.discloseFolder;Tree.prototype.getValue=Tree.prototype.selectedItems;function styleNodeSelected($element,$icon){$element.addClass('tree-selected');if($element.data('type')==='item'&&$icon.hasClass('fueluxicon-bullet')){$icon.removeClass('fueluxicon-bullet').addClass('glyphicon-ok')}}
function styleNodeDeselected($element,$icon){$element.removeClass('tree-selected');if($element.data('type')==='item'&&$icon.hasClass('glyphicon-ok')){$icon.removeClass('glyphicon-ok').addClass('fueluxicon-bullet')}}
function multiSelectSyncNodes(self,clicked,selected){$.each(selected.$elements,function(index,element){var $element=$(element);if($element[0]!==clicked.$element[0]){selected.dataForEvent.push($($element).data())}});if(clicked.$element.hasClass('tree-selected')){styleNodeDeselected(clicked.$element,clicked.$icon);selected.eventType='deselected'}else{styleNodeSelected(clicked.$element,clicked.$icon);selected.eventType='selected';selected.dataForEvent.push(clicked.elementData)}}
function singleSelectSyncNodes(self,clicked,selected){if(selected.$elements[0]!==clicked.$element[0]){var clearedElements=self.deselectAll(self.$element);styleNodeSelected(clicked.$element,clicked.$icon);selected.eventType='selected';selected.dataForEvent=[clicked.elementData]}else{styleNodeDeselected(clicked.$element,clicked.$icon);selected.eventType='deselected';selected.dataForEvent=[]}}
$.fn.tree=function tree(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.tree');var options=typeof option==='object'&&option;if(!data){$this.data('fu.tree',(data=new Tree(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.tree.defaults={dataSource:function dataSource(options,callback){},multiSelect:!1,cacheItems:!0,folderSelect:!0,itemSelect:!0,disclosuresUpperLimit:0};$.fn.tree.Constructor=Tree;$.fn.tree.noConflict=function(){$.fn.tree=old;return this}})(jQuery);(function($){var CONST={BACKSPACE_KEYCODE:8,COMMA_KEYCODE:188,DELETE_KEYCODE:46,DOWN_ARROW_KEYCODE:40,ENTER_KEYCODE:13,TAB_KEYCODE:9,UP_ARROW_KEYCODE:38};var isShiftHeld=function isShiftHeld(e){return e.shiftKey===!0};var isKey=function isKey(keyCode){return function compareKeycodes(e){return e.keyCode===keyCode}};var isBackspaceKey=isKey(CONST.BACKSPACE_KEYCODE);var isDeleteKey=isKey(CONST.DELETE_KEYCODE);var isTabKey=isKey(CONST.TAB_KEYCODE);var isUpArrow=isKey(CONST.UP_ARROW_KEYCODE);var isDownArrow=isKey(CONST.DOWN_ARROW_KEYCODE);var xssRegex=/<.*>/;var cleanInput=function cleanInput(questionableInput){var cleanedInput=questionableInput;if(xssRegex.test(cleanedInput)){cleanedInput=$('<i>').text(questionableInput).html()}
return cleanedInput};$.fn.utilities={CONST:CONST,cleanInput:cleanInput,isBackspaceKey:isBackspaceKey,isDeleteKey:isDeleteKey,isShiftHeld:isShiftHeld,isTabKey:isTabKey,isUpArrow:isUpArrow,isDownArrow:isDownArrow}})(jQuery);(function($){var old=$.fn.wizard;var Wizard=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.wizard.defaults,options);this.options.disablePreviousStep=(this.$element.attr('data-restrict')==='previous')?!0:this.options.disablePreviousStep;this.currentStep=this.options.selectedItem.step;this.numSteps=this.$element.find('.steps li').length;this.$prevBtn=this.$element.find('button.btn-prev');this.$nextBtn=this.$element.find('button.btn-next');var kids=this.$nextBtn.children().detach();this.nextText=$.trim(this.$nextBtn.text());this.$nextBtn.append(kids);var steps=this.$element.children('.steps-container');if(steps.length===0){steps=this.$element;this.$element.addClass('no-steps-container');if(window&&window.console&&window.console.warn){window.console.warn('please update your wizard markup to include ".steps-container" as seen in http://getfuelux.com/javascript.html#wizard-usage-markup')}}
steps=steps.find('.steps');this.$prevBtn.on('click.fu.wizard',$.proxy(this.previous,this));this.$nextBtn.on('click.fu.wizard',$.proxy(this.next,this));steps.on('click.fu.wizard','li.complete',$.proxy(this.stepclicked,this));this.selectedItem(this.options.selectedItem);if(this.options.disablePreviousStep){this.$prevBtn.attr('disabled',!0);this.$element.find('.steps').addClass('previous-disabled')}};Wizard.prototype={constructor:Wizard,destroy:function(){this.$element.remove();return this.$element[0].outerHTML},addSteps:function(index){var items=[].slice.call(arguments).slice(1);var $steps=this.$element.find('.steps');var $stepContent=this.$element.find('.step-content');var i,l,$pane,$startPane,$startStep,$step;index=(index===-1||(index>(this.numSteps+1)))?this.numSteps+1:index;if(items[0]instanceof Array){items=items[0]}
$startStep=$steps.find('li:nth-child('+index+')');$startPane=$stepContent.find('.step-pane:nth-child('+index+')');if($startStep.length<1){$startStep=null}
for(i=0,l=items.length;i<l;i++){$step=$('<li data-step="'+index+'"><span class="badge badge-info"></span></li>');$step.append(items[i].label||'').append('<span class="chevron"></span>');$step.find('.badge').append(items[i].badge||index);$pane=$('<div class="step-pane" data-step="'+index+'"></div>');$pane.append(items[i].pane||'');if(!$startStep){$steps.append($step);$stepContent.append($pane)}else{$startStep.before($step);$startPane.before($pane)}
index++}
this.syncSteps();this.numSteps=$steps.find('li').length;this.setState()},removeSteps:function(index,howMany){var action='nextAll';var i=0;var $steps=this.$element.find('.steps');var $stepContent=this.$element.find('.step-content');var $start;howMany=(howMany!==undefined)?howMany:1;if(index>$steps.find('li').length){$start=$steps.find('li:last')}else{$start=$steps.find('li:nth-child('+index+')').prev();if($start.length<1){action='children';$start=$steps}}
$start[action]().each(function(){var item=$(this);var step=item.attr('data-step');if(i<howMany){item.remove();$stepContent.find('.step-pane[data-step="'+step+'"]:first').remove()}else{return!1}
i++});this.syncSteps();this.numSteps=$steps.find('li').length;this.setState()},setState:function(){var canMovePrev=(this.currentStep>1);var isFirstStep=(this.currentStep===1);var isLastStep=(this.currentStep===this.numSteps);if(!this.options.disablePreviousStep){this.$prevBtn.attr('disabled',(isFirstStep===!0||canMovePrev===!1))}
var last=this.$nextBtn.attr('data-last');if(last){this.lastText=last;var text=this.nextText;if(isLastStep===!0){text=this.lastText;this.$element.addClass('complete')}else{this.$element.removeClass('complete')}
var kids=this.$nextBtn.children().detach();this.$nextBtn.text(text).append(kids)}
var $steps=this.$element.find('.steps li');$steps.removeClass('active').removeClass('complete');$steps.find('span.badge').removeClass('badge-info').removeClass('badge-success');var prevSelector='.steps li:lt('+(this.currentStep-1)+')';var $prevSteps=this.$element.find(prevSelector);$prevSteps.addClass('complete');$prevSteps.find('span.badge').addClass('badge-success');var currentSelector='.steps li:eq('+(this.currentStep-1)+')';var $currentStep=this.$element.find(currentSelector);$currentStep.addClass('active');$currentStep.find('span.badge').addClass('badge-info');var $stepContent=this.$element.find('.step-content');var target=$currentStep.attr('data-step');$stepContent.find('.step-pane').removeClass('active');$stepContent.find('.step-pane[data-step="'+target+'"]:first').addClass('active');this.$element.find('.steps').first().attr('style','margin-left: 0');var totalWidth=0;this.$element.find('.steps > li').each(function(){totalWidth+=$(this).outerWidth()});var containerWidth=0;if(this.$element.find('.actions').length){containerWidth=this.$element.width()-this.$element.find('.actions').first().outerWidth()}else{containerWidth=this.$element.width()}
if(totalWidth>containerWidth){var newMargin=totalWidth-containerWidth;this.$element.find('.steps').first().attr('style','margin-left: -'+newMargin+'px');if(this.$element.find('li.active').first().position().left<200){newMargin+=this.$element.find('li.active').first().position().left-200;if(newMargin<1){this.$element.find('.steps').first().attr('style','margin-left: 0')}else{this.$element.find('.steps').first().attr('style','margin-left: -'+newMargin+'px')}}}
if(typeof(this.initialized)!=='undefined'){var e=$.Event('changed.fu.wizard');this.$element.trigger(e,{step:this.currentStep})}
this.initialized=!0},stepclicked:function(e){var li=$(e.currentTarget);var index=this.$element.find('.steps li').index(li);if(index<this.currentStep&&this.options.disablePreviousStep){return}else{var evt=$.Event('stepclicked.fu.wizard');this.$element.trigger(evt,{step:index+1});if(evt.isDefaultPrevented()){return}
this.currentStep=(index+1);this.setState()}},syncSteps:function(){var i=1;var $steps=this.$element.find('.steps');var $stepContent=this.$element.find('.step-content');$steps.children().each(function(){var item=$(this);var badge=item.find('.badge');var step=item.attr('data-step');if(!isNaN(parseInt(badge.html(),10))){badge.html(i)}
item.attr('data-step',i);$stepContent.find('.step-pane[data-step="'+step+'"]:last').attr('data-step',i);i++})},previous:function(){if(this.options.disablePreviousStep||this.currentStep===1){return}
var e=$.Event('actionclicked.fu.wizard');this.$element.trigger(e,{step:this.currentStep,direction:'previous'});if(e.isDefaultPrevented()){return}
this.currentStep-=1;this.setState();if(this.$prevBtn.is(':focus')){var firstFormField=this.$element.find('.active').find('input, select, textarea')[0];if(typeof firstFormField!=='undefined'){$(firstFormField).focus()}else if(this.$element.find('.active input:first').length===0&&this.$prevBtn.is(':disabled')){this.$nextBtn.focus()}}},next:function(){var e=$.Event('actionclicked.fu.wizard');this.$element.trigger(e,{step:this.currentStep,direction:'next'});if(e.isDefaultPrevented()){return}
if(this.currentStep<this.numSteps){this.currentStep+=1;this.setState()}else{this.$element.trigger('finished.fu.wizard')}
if(this.$nextBtn.is(':focus')){var firstFormField=this.$element.find('.active').find('input, select, textarea')[0];if(typeof firstFormField!=='undefined'){$(firstFormField).focus()}else if(this.$element.find('.active input:first').length===0&&this.$nextBtn.is(':disabled')){this.$prevBtn.focus()}}},selectedItem:function(selectedItem){var retVal,step;if(selectedItem){step=selectedItem.step||-1;step=Number(this.$element.find('.steps li[data-name="'+step+'"]').first().attr('data-step'))||Number(step);if(1<=step&&step<=this.numSteps){this.currentStep=step;this.setState()}else{step=this.$element.find('.steps li.active:first').attr('data-step');if(!isNaN(step)){this.currentStep=parseInt(step,10);this.setState()}}
retVal=this}else{retVal={step:this.currentStep};if(this.$element.find('.steps li.active:first[data-name]').length){retVal.stepname=this.$element.find('.steps li.active:first').attr('data-name')}}
return retVal}};$.fn.wizard=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.wizard');var options=typeof option==='object'&&option;if(!data){$this.data('fu.wizard',(data=new Wizard(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.wizard.defaults={disablePreviousStep:!1,selectedItem:{step:-1}};$.fn.wizard.Constructor=Wizard;$.fn.wizard.noConflict=function(){$.fn.wizard=old;return this};$(document).on('mouseover.fu.wizard.data-api','[data-initialize=wizard]',function(e){var $control=$(e.target).closest('.wizard');if(!$control.data('fu.wizard')){$control.wizard($control.data())}});$(function(){$('[data-initialize=wizard]').each(function(){var $this=$(this);if($this.data('fu.wizard'))return;$this.wizard($this.data())})})})(jQuery);(function($){var old=$.fn.infinitescroll;var InfiniteScroll=function(element,options){this.$element=$(element);this.$element.addClass('infinitescroll');this.options=$.extend({},$.fn.infinitescroll.defaults,options);this.curScrollTop=this.$element.scrollTop();this.curPercentage=this.getPercentage();this.fetchingData=!1;this.$element.on('scroll.fu.infinitescroll',$.proxy(this.onScroll,this));this.onScroll()};InfiniteScroll.prototype={constructor:InfiniteScroll,destroy:function(){this.$element.remove();this.$element.empty();return this.$element[0].outerHTML},disable:function(){this.$element.off('scroll.fu.infinitescroll')},enable:function(){this.$element.on('scroll.fu.infinitescroll',$.proxy(this.onScroll,this))},end:function(content){var end=$('<div class="infinitescroll-end"></div>');if(content){end.append(content)}else{end.append('---------')}
this.$element.append(end);this.disable()},getPercentage:function(){var height=(this.$element.css('box-sizing')==='border-box')?this.$element.outerHeight():this.$element.height();var scrollHeight=this.$element.get(0).scrollHeight;return(scrollHeight>height)?((height/(scrollHeight-this.curScrollTop))*100):0},fetchData:function(force){var load=$('<div class="infinitescroll-load"></div>');var self=this;var moreBtn;var fetch=function(){var helpers={percentage:self.curPercentage,scrollTop:self.curScrollTop};var $loader=$('<div class="loader"></div>');load.append($loader);$loader.loader();if(self.options.dataSource){self.options.dataSource(helpers,function(resp){var end;load.remove();if(resp.content){self.$element.append(resp.content)}
if(resp.end){end=(resp.end!==!0)?resp.end:undefined;self.end(end)}
self.fetchingData=!1})}};this.fetchingData=!0;this.$element.append(load);if(this.options.hybrid&&force!==!0){moreBtn=$('<button type="button" class="btn btn-primary"></button>');if(typeof this.options.hybrid==='object'){moreBtn.append(this.options.hybrid.label)}else{moreBtn.append('<span class="glyphicon glyphicon-repeat"></span>')}
moreBtn.on('click.fu.infinitescroll',function(){moreBtn.remove();fetch()});load.append(moreBtn)}else{fetch()}},onScroll:function(e){this.curScrollTop=this.$element.scrollTop();this.curPercentage=this.getPercentage();if(!this.fetchingData&&this.curPercentage>=this.options.percentage){this.fetchData()}}};$.fn.infinitescroll=function(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.infinitescroll');var options=typeof option==='object'&&option;if(!data){$this.data('fu.infinitescroll',(data=new InfiniteScroll(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.infinitescroll.defaults={dataSource:null,hybrid:!1,percentage:95};$.fn.infinitescroll.Constructor=InfiniteScroll;$.fn.infinitescroll.noConflict=function(){$.fn.infinitescroll=old;return this}})(jQuery);(function($){var old=$.fn.pillbox;var utilities=$.fn.utilities;var CONST=$.fn.utilities.CONST;var COMMA_KEYCODE=CONST.COMMA_KEYCODE;var ENTER_KEYCODE=CONST.ENTER_KEYCODE;var isBackspaceKey=utilities.isBackspaceKey;var isDeleteKey=utilities.isDeleteKey;var isTabKey=utilities.isTabKey;var isUpArrow=utilities.isUpArrow;var isDownArrow=utilities.isDownArrow;var cleanInput=utilities.cleanInput;var isShiftHeld=utilities.isShiftHeld;var Pillbox=function Pillbox(element,options){this.$element=$(element);this.$moreCount=this.$element.find('.pillbox-more-count');this.$pillGroup=this.$element.find('.pill-group');this.$addItem=this.$element.find('.pillbox-add-item');this.$addItemWrap=this.$addItem.parent();this.$suggest=this.$element.find('.suggest');this.$pillHTML='<li class="btn btn-default pill">'+'	<span></span>'+'	<span class="glyphicon glyphicon-close">'+'		<span class="sr-only">Remove</span>'+'	</span>'+'</li>';this.options=$.extend({},$.fn.pillbox.defaults,options);if(this.options.readonly===-1){if(this.$element.attr('data-readonly')!==undefined){this.readonly(!0)}}else if(this.options.readonly){this.readonly(!0)}
this.acceptKeyCodes=this._generateObject(this.options.acceptKeyCodes);this.$element.on('click.fu.pillbox','.pill-group > .pill',$.proxy(this.itemClicked,this));this.$element.on('click.fu.pillbox',$.proxy(this.inputFocus,this));this.$element.on('keydown.fu.pillbox','.pillbox-add-item',$.proxy(this.inputEvent,this));if(this.options.onKeyDown){this.$element.on('mousedown.fu.pillbox','.suggest > li',$.proxy(this.suggestionClick,this))}
if(this.options.edit){this.$element.addClass('pills-editable');this.$element.on('blur.fu.pillbox','.pillbox-add-item',$.proxy(this.cancelEdit,this))}
this.$element.on('blur.fu.pillbox','.pillbox-add-item',$.proxy(this.inputEvent,this))};Pillbox.prototype={constructor:Pillbox,destroy:function destroy(){this.$element.remove();return this.$element[0].outerHTML},items:function items(){var self=this;return this.$pillGroup.children('.pill').map(function getItemsData(){return self.getItemData($(this))}).get()},itemClicked:function itemClicked(e){var $target=$(e.target);var $item;e.preventDefault();e.stopPropagation();this._closeSuggestions();if(!$target.hasClass('pill')){$item=$target.parent();if(this.$element.attr('data-readonly')===undefined){if($target.hasClass('glyphicon-close')){if(this.options.onRemove){this.options.onRemove(this.getItemData($item,{el:$item}),$.proxy(this._removeElement,this))}else{this._removeElement(this.getItemData($item,{el:$item}))}
return!1}else if(this.options.edit){if($item.find('.pillbox-list-edit').length){return!1}
this.openEdit($item)}}}else{$item=$target}
this.$element.trigger('clicked.fu.pillbox',this.getItemData($item));return!0},readonly:function readonly(enable){if(enable){this.$element.attr('data-readonly','readonly')}else{this.$element.removeAttr('data-readonly')}
if(this.options.truncate){this.truncate(enable)}},suggestionClick:function suggestionClick(e){var $item=$(e.currentTarget);var item={text:$item.html(),value:$item.data('value')};e.preventDefault();this.$addItem.val('');if($item.data('attr')){item.attr=JSON.parse($item.data('attr'))}
item.data=$item.data('data');this.addItems(item,!0);this._closeSuggestions()},itemCount:function itemCount(){return this.$pillGroup.children('.pill').length},addItems:function addItems(){var self=this;var items;var index;var isInternal;if(isFinite(String(arguments[0]))&&!(arguments[0]instanceof Array)){items=[].slice.call(arguments).slice(1);index=arguments[0]}else{items=[].slice.call(arguments).slice(0);isInternal=items[1]&&!items[1].text}
if(items[0]instanceof Array){items=items[0]}
if(items.length){$.each(items,function normalizeItemsObject(i,value){var data={text:value.text,value:(value.value?value.value:value.text),el:self.$pillHTML};if(value.attr){data.attr=value.attr}
if(value.data){data.data=value.data}
items[i]=data});if(this.options.edit&&this.currentEdit){items[0].el=this.currentEdit.wrap('<div></div>').parent().html()}
if(isInternal){items.pop(1)}
if(self.options.onAdd&&isInternal){if(this.options.edit&&this.currentEdit){self.options.onAdd(items[0],$.proxy(self.saveEdit,this))}else{self.options.onAdd(items[0],$.proxy(self.placeItems,this))}}else if(this.options.edit&&this.currentEdit){self.saveEdit(items)}else if(index){self.placeItems(index,items)}else{self.placeItems(items,isInternal)}}},removeItems:function removeItems(index,howMany){var self=this;if(!index){this.$pillGroup.find('.pill').remove();this._removePillTrigger({method:'removeAll'})}else{var itemsToRemove=howMany?howMany:1;for(var item=0;item<itemsToRemove;item++){var $currentItem=self.$pillGroup.find('> .pill:nth-child('+index+')');if($currentItem){$currentItem.remove()}else{break}}}},placeItems:function placeItems(){var items;var index;var $neighbor;var isInternal;if(isFinite(String(arguments[0]))&&!(arguments[0]instanceof Array)){items=[].slice.call(arguments).slice(1);index=arguments[0]}else{items=[].slice.call(arguments).slice(0);isInternal=items[1]&&!items[1].text}
if(items[0]instanceof Array){items=items[0]}
if(items.length){var newItems=[];$.each(items,function prepareItemForAdd(i,item){var $item=$(item.el);$item.attr('data-value',item.value);$item.find('span:first').html(item.text);if(item.attr){$.each(item.attr,function handleDOMAttributes(key,value){if(key==='cssClass'||key==='class'){$item.addClass(value)}else{$item.attr(key,value)}})}
if(item.data){$item.data('data',item.data)}
newItems.push($item)});if(this.$pillGroup.children('.pill').length>0){if(index){$neighbor=this.$pillGroup.find('.pill:nth-child('+index+')');if($neighbor.length){$neighbor.before(newItems)}else{this.$pillGroup.children('.pill:last').after(newItems)}}else{this.$pillGroup.children('.pill:last').after(newItems)}}else{this.$pillGroup.prepend(newItems)}
if(isInternal){this.$element.trigger('added.fu.pillbox',{text:items[0].text,value:items[0].value})}}},inputEvent:function inputEvent(e){var self=this;var text=self.options.cleanInput(this.$addItem.val());var isFocusOutEvent=e.type==='focusout';var blurredAfterInput=(isFocusOutEvent&&text.length>0);var acceptKeyPressed=(this.acceptKeyCodes[e.keyCode]&&!isShiftHeld(e));if(acceptKeyPressed||blurredAfterInput){var attr;var value;if(this.options.onKeyDown&&this._isSuggestionsOpen()){var $selection=this.$suggest.find('.pillbox-suggest-sel');if($selection.length){text=self.options.cleanInput($selection.html());value=self.options.cleanInput($selection.data('value'));attr=$selection.data('attr')}}
if(text.replace(/[ ]*\,[ ]*/,'').match(/\S/)||(this.options.allowEmptyPills&&text.length)){this._closeSuggestions();this.$addItem.hide().val('');if(attr){this.addItems({text:text,value:value,attr:JSON.parse(attr)},!0)}else{this.addItems({text:text,value:value},!0)}
setTimeout(function clearAddItemInput(){self.$addItem.show().attr({size:10}).focus()},0)}
e.preventDefault();return!0}else if(isBackspaceKey(e)||isDeleteKey(e)){if(!text.length){e.preventDefault();if(this.options.edit&&this.currentEdit){this.cancelEdit();return!0}
this._closeSuggestions();var $lastItem=this.$pillGroup.children('.pill:last');if($lastItem.hasClass('pillbox-highlight')){this._removeElement(this.getItemData($lastItem,{el:$lastItem}))}else{$lastItem.addClass('pillbox-highlight')}
return!0}}else if(text.length>10){if(this.$addItem.width()<(this.$pillGroup.width()-6)){this.$addItem.attr({size:text.length+3})}}
this.$pillGroup.find('.pill').removeClass('pillbox-highlight');if(this.options.onKeyDown&&!isFocusOutEvent){if(isTabKey(e)||isUpArrow(e)||isDownArrow(e)){if(this._isSuggestionsOpen()){this._keySuggestions(e)}
return!0}
this.callbackId=e.timeStamp;this.options.onKeyDown({event:e,value:text},function callOpenSuggestions(data){self._openSuggestions(e,data)})}
return!0},openEdit:function openEdit(el){var targetChildIndex=el.index()+1;var $addItemWrap=this.$addItemWrap.detach().hide();this.$pillGroup.find('.pill:nth-child('+targetChildIndex+')').before($addItemWrap);this.currentEdit=el.detach();$addItemWrap.addClass('editing');this.$addItem.val(el.find('span:first').html());$addItemWrap.show();this.$addItem.focus().select()},cancelEdit:function cancelEdit(e){var $addItemWrap;if(!this.currentEdit){return!1}
this._closeSuggestions();if(e){this.$addItemWrap.before(this.currentEdit)}
this.currentEdit=!1;$addItemWrap=this.$addItemWrap.detach();$addItemWrap.removeClass('editing');this.$addItem.val('');this.$pillGroup.append($addItemWrap);return!0},saveEdit:function saveEdit(){var item=arguments[0][0]?arguments[0][0]:arguments[0];this.currentEdit=$(item.el);this.currentEdit.data('value',item.value);this.currentEdit.find('span:first').html(item.text);this.$addItemWrap.hide();this.$addItemWrap.before(this.currentEdit);this.currentEdit=!1;this.$addItem.val('');this.$addItemWrap.removeClass('editing');this.$pillGroup.append(this.$addItemWrap.detach().show());this.$element.trigger('edited.fu.pillbox',{value:item.value,text:item.text})},removeBySelector:function removeBySelector(){var selectors=[].slice.call(arguments).slice(0);var self=this;$.each(selectors,function doRemove(i,sel){self.$pillGroup.find(sel).remove()});this._removePillTrigger({method:'removeBySelector',removedSelectors:selectors})},removeByValue:function removeByValue(){var values=[].slice.call(arguments).slice(0);var self=this;$.each(values,function doRemove(i,val){self.$pillGroup.find('> .pill[data-value="'+val+'"]').remove()});this._removePillTrigger({method:'removeByValue',removedValues:values})},removeByText:function removeByText(){var text=[].slice.call(arguments).slice(0);var self=this;$.each(text,function doRemove(i,matchingText){self.$pillGroup.find('> .pill:contains("'+matchingText+'")').remove()});this._removePillTrigger({method:'removeByText',removedText:text})},truncate:function truncate(enable){var self=this;this.$element.removeClass('truncate');this.$addItemWrap.removeClass('truncated');this.$pillGroup.find('.pill').removeClass('truncated');if(enable){this.$element.addClass('truncate');var availableWidth=this.$element.width();var containerFull=!1;var processedPills=0;var totalPills=this.$pillGroup.find('.pill').length;var widthUsed=0;this.$pillGroup.find('.pill').each(function processPills(){var pill=$(this);if(!containerFull){processedPills++;self.$moreCount.text(totalPills-processedPills);if((widthUsed+pill.outerWidth(!0)+self.$addItemWrap.outerWidth(!0))<=availableWidth){widthUsed+=pill.outerWidth(!0)}else{self.$moreCount.text((totalPills-processedPills)+1);pill.addClass('truncated');containerFull=!0}}else{pill.addClass('truncated')}});if(processedPills===totalPills){this.$addItemWrap.addClass('truncated')}}},inputFocus:function inputFocus(){this.$element.find('.pillbox-add-item').focus()},getItemData:function getItemData(el,data){return $.extend({text:el.find('span:first').html()},el.data(),data)},_removeElement:function _removeElement(data){data.el.remove();delete data.el;this.$element.trigger('removed.fu.pillbox',data)},_removePillTrigger:function _removePillTrigger(removedBy){this.$element.trigger('removed.fu.pillbox',removedBy)},_generateObject:function _generateObject(data){var obj={};$.each(data,function setObjectValue(index,value){obj[value]=!0});return obj},_openSuggestions:function _openSuggestions(e,data){var $suggestionList=$('<ul>');if(this.callbackId!==e.timeStamp){return!1}
if(data.data&&data.data.length){$.each(data.data,function appendSuggestions(index,value){var val=value.value?value.value:value.text;var $suggestion=$('<li data-value="'+val+'">'+value.text+'</li>');if(value.attr){$suggestion.data('attr',JSON.stringify(value.attr))}
if(value.data){$suggestion.data('data',value.data)}
$suggestionList.append($suggestion)});this.$suggest.html('').append($suggestionList.children());$(document).trigger('suggested.fu.pillbox',this.$suggest)}
return!0},_closeSuggestions:function _closeSuggestions(){this.$suggest.html('').parent().removeClass('open')},_isSuggestionsOpen:function _isSuggestionsOpen(){return this.$suggest.parent().hasClass('open')},_keySuggestions:function _keySuggestions(e){var $first=this.$suggest.find('li.pillbox-suggest-sel');var dir=isUpArrow(e);e.preventDefault();if(!$first.length){$first=this.$suggest.find('li:first');$first.addClass('pillbox-suggest-sel')}else{var $next=dir?$first.prev():$first.next();if(!$next.length){$next=dir?this.$suggest.find('li:last'):this.$suggest.find('li:first')}
if($next){$next.addClass('pillbox-suggest-sel');$first.removeClass('pillbox-suggest-sel')}}}};Pillbox.prototype.getValue=Pillbox.prototype.items;$.fn.pillbox=function pillbox(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function set(){var $this=$(this);var data=$this.data('fu.pillbox');var options=typeof option==='object'&&option;if(!data){$this.data('fu.pillbox',(data=new Pillbox(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.pillbox.defaults={edit:!1,readonly:-1,truncate:!1,acceptKeyCodes:[ENTER_KEYCODE,COMMA_KEYCODE],allowEmptyPills:!1,cleanInput:cleanInput};$.fn.pillbox.Constructor=Pillbox;$.fn.pillbox.noConflict=function noConflict(){$.fn.pillbox=old;return this};$(document).on('mousedown.fu.pillbox.data-api','[data-initialize=pillbox]',function dataAPI(e){var $control=$(e.target).closest('.pillbox');if(!$control.data('fu.pillbox')){$control.pillbox($control.data())}});$(function DOMReady(){$('[data-initialize=pillbox]').each(function init(){var $this=$(this);if($this.data('fu.pillbox'))return;$this.pillbox($this.data())})})})(jQuery);(function($){var old=$.fn.repeater;var Repeater=function Repeater(element,options){var self=this;var $btn;var currentView;this.$element=$(element);this.$canvas=this.$element.find('.repeater-canvas');this.$count=this.$element.find('.repeater-count');this.$end=this.$element.find('.repeater-end');this.$filters=this.$element.find('.repeater-filters');this.$loader=this.$element.find('.repeater-loader');this.$pageSize=this.$element.find('.repeater-itemization .selectlist');this.$nextBtn=this.$element.find('.repeater-next');this.$pages=this.$element.find('.repeater-pages');this.$prevBtn=this.$element.find('.repeater-prev');this.$primaryPaging=this.$element.find('.repeater-primaryPaging');this.$search=this.$element.find('.repeater-search').find('.search');this.$secondaryPaging=this.$element.find('.repeater-secondaryPaging');this.$start=this.$element.find('.repeater-start');this.$viewport=this.$element.find('.repeater-viewport');this.$views=this.$element.find('.repeater-views');this.currentPage=0;this.currentView=null;this.isDisabled=!1;this.infiniteScrollingCallback=function noop(){};this.infiniteScrollingCont=null;this.infiniteScrollingEnabled=!1;this.infiniteScrollingEnd=null;this.infiniteScrollingOptions={};this.lastPageInput=0;this.options=$.extend({},$.fn.repeater.defaults,options);this.pageIncrement=0;this.resizeTimeout={};this.stamp=new Date().getTime()+(Math.floor(Math.random()*100)+1);this.storedDataSourceOpts=null;this.syncingViewButtonState=!1;this.viewOptions={};this.viewType=null;this.$filters.selectlist();this.$pageSize.selectlist();this.$primaryPaging.find('.combobox').combobox();this.$search.search({searchOnKeyPress:this.options.searchOnKeyPress,allowCancel:this.options.allowCancel});this.$filters.on('changed.fu.selectlist',function onFiltersChanged(e,value){self.$element.trigger('filtered.fu.repeater',value);self.render({clearInfinite:!0,pageIncrement:null})});this.$nextBtn.on('click.fu.repeater',$.proxy(this.next,this));this.$pageSize.on('changed.fu.selectlist',function onPageSizeChanged(e,value){self.$element.trigger('pageSizeChanged.fu.repeater',value);self.render({pageIncrement:null})});this.$prevBtn.on('click.fu.repeater',$.proxy(this.previous,this));this.$primaryPaging.find('.combobox').on('changed.fu.combobox',function onPrimaryPagingChanged(evt,data){self.pageInputChange(data.text,data)});this.$search.on('searched.fu.search cleared.fu.search',function onSearched(e,value){self.$element.trigger('searchChanged.fu.repeater',value);self.render({clearInfinite:!0,pageIncrement:null})});this.$search.on('canceled.fu.search',function onSearchCanceled(e,value){self.$element.trigger('canceled.fu.repeater',value);self.render({clearInfinite:!0,pageIncrement:null})});this.$secondaryPaging.on('blur.fu.repeater',function onSecondaryPagingBlur(){self.pageInputChange(self.$secondaryPaging.val())});this.$secondaryPaging.on('keyup',function onSecondaryPagingKeyup(e){if(e.keyCode===13){self.pageInputChange(self.$secondaryPaging.val())}});this.$views.find('input').on('change.fu.repeater',$.proxy(this.viewChanged,this));$(window).on('resize.fu.repeater.'+this.stamp,function onResizeRepeater(){clearTimeout(self.resizeTimeout);self.resizeTimeout=setTimeout(function resizeTimeout(){self.resize();self.$element.trigger('resized.fu.repeater')},75)});this.$loader.loader();this.$loader.loader('pause');if(this.options.defaultView!==-1){currentView=this.options.defaultView}else{$btn=this.$views.find('label.active input');currentView=($btn.length>0)?$btn.val():'list'}
this.setViewOptions(currentView);this.initViewTypes(function initViewTypes(){self.resize();self.$element.trigger('resized.fu.repeater');self.render({changeView:currentView})})};var logWarn=function logWarn(msg){if(window.console&&window.console.warn){window.console.warn(msg)}};var scan=function scan(cont){var keep=[];cont.children().each(function eachContainerChild(){var item=$(this);var pres=item.attr('data-preserve');if(pres==='deep'){item.detach();keep.push(item)}else if(pres==='shallow'){scan(item);item.detach();keep.push(item)}});cont.empty();cont.append(keep)};var addItem=function addItem($parent,response){var action;if(response){action=(response.action)?response.action:'append';if(action!=='none'&&response.item!==undefined){var $container=(response.container!==undefined)?$(response.container):$parent;$container[action](response.item)}}};var callNextInit=function callNextInit(currentViewType,viewTypes,callback){var nextViewType=currentViewType+1;if(nextViewType<viewTypes.length){initViewType.call(this,nextViewType,viewTypes,callback)}else{callback()}};var initViewType=function initViewType(currentViewtype,viewTypes,callback){if(viewTypes[currentViewtype].initialize){viewTypes[currentViewtype].initialize.call(this,{},function afterInitialize(){callNextInit.call(this,currentViewtype,viewTypes,callback)})}else{callNextInit.call(this,currentViewtype,viewTypes,callback)}};var afterRender=function afterRender(state){var data=state.data||{};if(this.infiniteScrollingEnabled){if(state.viewChanged||state.options.clearInfinite){this.initInfiniteScrolling()}
this.infiniteScrollPaging(data,state.options)}
this.$loader.hide().loader('pause');this.enable();this.$search.trigger('rendered.fu.repeater',{data:data,options:state.dataOptions,renderOptions:state.options});this.$element.trigger('rendered.fu.repeater',{data:data,options:state.dataOptions,renderOptions:state.options});this.$element.trigger('loaded.fu.repeater',state.dataOptions)};var doRender=function doRender(state){var data=state.data||{};if(this.infiniteScrollingEnabled){this.infiniteScrollingCallback({})}else{this.itemization(data);this.pagination(data)}
var self=this;this.renderItems(state.viewTypeObj,data,function callAfterRender(d){state.data=d;afterRender.call(self,state)})};Repeater.prototype={constructor:Repeater,clear:function clear(opts){var options=opts||{};if(!options.preserve){this.$canvas.empty()}else if(!this.infiniteScrollingEnabled||options.clearInfinite){scan(this.$canvas)}
var viewChanged=(options.viewChanged!==undefined)?options.viewChanged:!1;var viewTypeObj=$.fn.repeater.viewTypes[this.viewType]||{};if(!viewChanged&&viewTypeObj.cleared){viewTypeObj.cleared.call(this,{options:options})}},clearPreservedDataSourceOptions:function clearPreservedDataSourceOptions(){this.storedDataSourceOpts=null},destroy:function destroy(){var markup;this.$element.find('input').each(function eachInput(){$(this).attr('value',$(this).val())});this.$canvas.empty();markup=this.$element[0].outerHTML;this.$element.find('.combobox').combobox('destroy');this.$element.find('.selectlist').selectlist('destroy');this.$element.find('.search').search('destroy');if(this.infiniteScrollingEnabled){$(this.infiniteScrollingCont).infinitescroll('destroy')}
this.$element.remove();$(window).off('resize.fu.repeater.'+this.stamp);return markup},disable:function disable(){var viewTypeObj=$.fn.repeater.viewTypes[this.viewType]||{};this.$search.search('disable');this.$filters.selectlist('disable');this.$views.find('label, input').addClass('disabled').attr('disabled','disabled');this.$pageSize.selectlist('disable');this.$primaryPaging.find('.combobox').combobox('disable');this.$secondaryPaging.attr('disabled','disabled');this.$prevBtn.attr('disabled','disabled');this.$nextBtn.attr('disabled','disabled');if(viewTypeObj.enabled){viewTypeObj.enabled.call(this,{status:!1})}
this.isDisabled=!0;this.$element.addClass('disabled');this.$element.trigger('disabled.fu.repeater')},enable:function enable(){var viewTypeObj=$.fn.repeater.viewTypes[this.viewType]||{};this.$search.search('enable');this.$filters.selectlist('enable');this.$views.find('label, input').removeClass('disabled').removeAttr('disabled');this.$pageSize.selectlist('enable');this.$primaryPaging.find('.combobox').combobox('enable');this.$secondaryPaging.removeAttr('disabled');if(!this.$prevBtn.hasClass('page-end')){this.$prevBtn.removeAttr('disabled')}
if(!this.$nextBtn.hasClass('page-end')){this.$nextBtn.removeAttr('disabled')}
if(this.$prevBtn.hasClass('page-end')&&this.$nextBtn.hasClass('page-end')){this.$primaryPaging.combobox('disable')}
if(parseInt(this.$count.html(),10)!==0){this.$pageSize.selectlist('enable')}else{this.$pageSize.selectlist('disable')}
if(viewTypeObj.enabled){viewTypeObj.enabled.call(this,{status:!0})}
this.isDisabled=!1;this.$element.removeClass('disabled');this.$element.trigger('enabled.fu.repeater')},getDataOptions:function getDataOptions(opts){var options=opts||{};if(options.pageIncrement!==undefined){if(options.pageIncrement===null){this.currentPage=0}else{this.currentPage+=options.pageIncrement}}
var dataSourceOptions={};if(options.dataSourceOptions){dataSourceOptions=options.dataSourceOptions;if(options.preserveDataSourceOptions){if(this.storedDataSourceOpts){this.storedDataSourceOpts=$.extend(this.storedDataSourceOpts,dataSourceOptions)}else{this.storedDataSourceOpts=dataSourceOptions}}}
if(this.storedDataSourceOpts){dataSourceOptions=$.extend(this.storedDataSourceOpts,dataSourceOptions)}
var returnOptions={view:this.currentView,pageIndex:this.currentPage,filter:{text:'All',value:'all'}};if(this.$filters.length>0){returnOptions.filter=this.$filters.selectlist('selectedItem')}
if(!this.infiniteScrollingEnabled){returnOptions.pageSize=25;if(this.$pageSize.length>0){returnOptions.pageSize=parseInt(this.$pageSize.selectlist('selectedItem').value,10)}}
var searchValue=this.$search&&this.$search.find('input')&&this.$search.find('input').val();if(searchValue!==''){returnOptions.search=searchValue}
var viewType=$.fn.repeater.viewTypes[this.viewType]||{};var addViewTypeData=viewType.dataOptions;if(addViewTypeData){returnOptions=addViewTypeData.call(this,returnOptions)}
returnOptions=$.extend(returnOptions,dataSourceOptions);return returnOptions},infiniteScrolling:function infiniteScrolling(enable,opts){var footer=this.$element.find('.repeater-footer');var viewport=this.$element.find('.repeater-viewport');var options=opts||{};if(enable){this.infiniteScrollingEnabled=!0;this.infiniteScrollingEnd=options.end;delete options.dataSource;delete options.end;this.infiniteScrollingOptions=options;viewport.css({height:viewport.height()+footer.outerHeight()});footer.hide()}else{var cont=this.infiniteScrollingCont;var data=cont.data();delete data.infinitescroll;cont.off('scroll');cont.removeClass('infinitescroll');this.infiniteScrollingCont=null;this.infiniteScrollingEnabled=!1;this.infiniteScrollingEnd=null;this.infiniteScrollingOptions={};viewport.css({height:viewport.height()-footer.outerHeight()});footer.show()}},infiniteScrollPaging:function infiniteScrollPaging(data){var end=(this.infiniteScrollingEnd!==!0)?this.infiniteScrollingEnd:undefined;var page=data.page;var pages=data.pages;this.currentPage=(page!==undefined)?page:NaN;if(data.end===!0||(this.currentPage+1)>=pages){this.infiniteScrollingCont.infinitescroll('end',end)}},initInfiniteScrolling:function initInfiniteScrolling(){var cont=this.$canvas.find('[data-infinite="true"]:first');cont=(cont.length<1)?this.$canvas:cont;if(cont.data('fu.infinitescroll')){cont.infinitescroll('enable')}else{var self=this;var opts=$.extend({},this.infiniteScrollingOptions);opts.dataSource=function dataSource(helpers,callback){self.infiniteScrollingCallback=callback;self.render({pageIncrement:1})};cont.infinitescroll(opts);this.infiniteScrollingCont=cont}},initViewTypes:function initViewTypes(callback){var viewTypes=[];for(var key in $.fn.repeater.viewTypes){if({}.hasOwnProperty.call($.fn.repeater.viewTypes,key)){viewTypes.push($.fn.repeater.viewTypes[key])}}
if(viewTypes.length>0){initViewType.call(this,0,viewTypes,callback)}else{callback()}},itemization:function itemization(data){this.$count.html((data.count!==undefined)?data.count:'?');this.$end.html((data.end!==undefined)?data.end:'?');this.$start.html((data.start!==undefined)?data.start:'?')},next:function next(){this.$nextBtn.attr('disabled','disabled');this.$prevBtn.attr('disabled','disabled');this.pageIncrement=1;this.$element.trigger('nextClicked.fu.repeater');this.render({pageIncrement:this.pageIncrement})},pageInputChange:function pageInputChange(val,dataFromCombobox){var pageInc;if(val!==this.lastPageInput){this.lastPageInput=val;var value=parseInt(val,10)-1;pageInc=value-this.currentPage;this.$element.trigger('pageChanged.fu.repeater',[value,dataFromCombobox]);this.render({pageIncrement:pageInc})}},pagination:function pagination(data){this.$primaryPaging.removeClass('active');this.$secondaryPaging.removeClass('active');var totalPages=data.pages;this.currentPage=(data.page!==undefined)?data.page:NaN;var currenPageOutput=totalPages===0?0:this.currentPage+1;if(totalPages<=this.viewOptions.dropPagingCap){this.$primaryPaging.addClass('active');var dropMenu=this.$primaryPaging.find('.dropdown-menu');dropMenu.empty();for(var i=0;i<totalPages;i++){var l=i+1;dropMenu.append('<li data-value="'+l+'"><a href="#">'+l+'</a></li>')}
this.$primaryPaging.find('input.form-control').val(currenPageOutput)}else{this.$secondaryPaging.addClass('active');this.$secondaryPaging.val(currenPageOutput)}
this.lastPageInput=this.currentPage+1+'';this.$pages.html(''+totalPages);if((this.currentPage+1)<totalPages){this.$nextBtn.removeAttr('disabled');this.$nextBtn.removeClass('page-end')}else{this.$nextBtn.attr('disabled','disabled');this.$nextBtn.addClass('page-end')}
if((this.currentPage-1)>=0){this.$prevBtn.removeAttr('disabled');this.$prevBtn.removeClass('page-end')}else{this.$prevBtn.attr('disabled','disabled');this.$prevBtn.addClass('page-end')}
if(this.pageIncrement!==0){if(this.pageIncrement>0){if(this.$nextBtn.is(':disabled')){this.$prevBtn.focus()}else{this.$nextBtn.focus()}}else if(this.$prevBtn.is(':disabled')){this.$nextBtn.focus()}else{this.$prevBtn.focus()}}},previous:function previous(){this.$nextBtn.attr('disabled','disabled');this.$prevBtn.attr('disabled','disabled');this.pageIncrement=-1;this.$element.trigger('previousClicked.fu.repeater');this.render({pageIncrement:this.pageIncrement})},render:function render(opts){this.disable();var viewChanged=!1;var viewTypeObj=$.fn.repeater.viewTypes[this.viewType]||{};var options=opts||{};if(options.changeView&&(this.currentView!==options.changeView)){var prevView=this.currentView;this.currentView=options.changeView;this.viewType=this.currentView.split('.')[0];this.setViewOptions(this.currentView);this.$element.attr('data-currentview',this.currentView);this.$element.attr('data-viewtype',this.viewType);viewChanged=!0;options.viewChanged=viewChanged;this.$element.trigger('viewChanged.fu.repeater',this.currentView);if(this.infiniteScrollingEnabled){this.infiniteScrolling(!1)}
viewTypeObj=$.fn.repeater.viewTypes[this.viewType]||{};if(viewTypeObj.selected){viewTypeObj.selected.call(this,{prevView:prevView})}}
this.syncViewButtonState();options.preserve=(options.preserve!==undefined)?options.preserve:!viewChanged;this.clear(options);if(!this.infiniteScrollingEnabled||(this.infiniteScrollingEnabled&&viewChanged)){this.$loader.show().loader('play')}
var dataOptions=this.getDataOptions(options);var beforeRender=this.viewOptions.dataSource;var repeaterPrototypeContext=this;beforeRender(dataOptions,function callDoRender(dataSourceReturnedData){doRender.call(repeaterPrototypeContext,{data:dataSourceReturnedData,dataOptions:dataOptions,options:options,viewChanged:viewChanged,viewTypeObj:viewTypeObj})})},resize:function resize(){var staticHeight=(this.viewOptions.staticHeight===-1)?this.$element.attr('data-staticheight'):this.viewOptions.staticHeight;var viewTypeObj={};var height;var viewportMargins;var scrubbedElements=[];var previousProperties=[];var $hiddenElements=this.$element.parentsUntil(':visible').addBack();var currentHiddenElement;var currentElementIndex=0;while(currentElementIndex<$hiddenElements.length&&this.$element.is(':hidden')){currentHiddenElement=$hiddenElements[currentElementIndex];if($(currentHiddenElement).is(':hidden')){previousProperties.push(currentHiddenElement.style.display);currentHiddenElement.style.display='block';scrubbedElements.push(currentHiddenElement)}
currentElementIndex++}
if(this.viewType){viewTypeObj=$.fn.repeater.viewTypes[this.viewType]||{}}
if(staticHeight!==undefined&&staticHeight!==!1&&staticHeight!=='false'){this.$canvas.addClass('scrolling');viewportMargins={bottom:this.$viewport.css('margin-bottom'),top:this.$viewport.css('margin-top')};var staticHeightValue=(staticHeight==='true'||staticHeight===!0)?this.$element.height():parseInt(staticHeight,10);var headerHeight=this.$element.find('.repeater-header').outerHeight();var footerHeight=this.$element.find('.repeater-footer').outerHeight();var bottomMargin=(viewportMargins.bottom==='auto')?0:parseInt(viewportMargins.bottom,10);var topMargin=(viewportMargins.top==='auto')?0:parseInt(viewportMargins.top,10);height=staticHeightValue-headerHeight-footerHeight-bottomMargin-topMargin;this.$viewport.outerHeight(height)}else{this.$canvas.removeClass('scrolling')}
if(viewTypeObj.resize){viewTypeObj.resize.call(this,{height:this.$element.outerHeight(),width:this.$element.outerWidth()})}
scrubbedElements.forEach(function(element,i){element.style.display=previousProperties[i]})},renderItems:function renderItems(viewTypeObj,data,callback){if(!viewTypeObj.render){if(viewTypeObj.before){var addBefore=viewTypeObj.before.call(this,{container:this.$canvas,data:data});addItem(this.$canvas,addBefore)}
var $dataContainer=this.$canvas.find('[data-container="true"]:last');var $container=($dataContainer.length>0)?$dataContainer:this.$canvas;if(viewTypeObj.renderItem){var subset;var objectAndPropsToRepeatOnString=viewTypeObj.repeat||'data.items';var objectAndPropsToRepeatOn=objectAndPropsToRepeatOnString.split('.');var objectToRepeatOn=objectAndPropsToRepeatOn[0];if(objectToRepeatOn==='data'||objectToRepeatOn==='this'){subset=(objectToRepeatOn==='this')?this:data;var propsToRepeatOn=objectAndPropsToRepeatOn.slice(1);for(var prop=0;prop<propsToRepeatOn.length;prop++){if(subset[propsToRepeatOn[prop]]!==undefined){subset=subset[propsToRepeatOn[prop]]}else{subset=[];logWarn('WARNING: Repeater unable to find property to iterate renderItem on.');break}}
for(var subItemIndex=0;subItemIndex<subset.length;subItemIndex++){var addSubItem=viewTypeObj.renderItem.call(this,{container:$container,data:data,index:subItemIndex,subset:subset});addItem($container,addSubItem)}}else{logWarn('WARNING: Repeater plugin "repeat" value must start with either "data" or "this"')}}
if(viewTypeObj.after){var addAfter=viewTypeObj.after.call(this,{container:this.$canvas,data:data});addItem(this.$canvas,addAfter)}
callback(data)}else{viewTypeObj.render.call(this,{container:this.$canvas,data:data},callback)}},setViewOptions:function setViewOptions(curView){var opts={};var viewName=curView.split('.')[1];if(this.options.views){opts=this.options.views[viewName]||this.options.views[curView]||{}}else{opts={}}
this.viewOptions=$.extend({},this.options,opts)},viewChanged:function viewChanged(e){var $selected=$(e.target);var val=$selected.val();if(!this.syncingViewButtonState){if(this.isDisabled||$selected.parents('label:first').hasClass('disabled')){this.syncViewButtonState()}else{this.render({changeView:val,pageIncrement:null})}}},syncViewButtonState:function syncViewButtonState(){var $itemToCheck=this.$views.find('input[value="'+this.currentView+'"]');this.syncingViewButtonState=!0;this.$views.find('input').prop('checked',!1);this.$views.find('label.active').removeClass('active');if($itemToCheck.length>0){$itemToCheck.prop('checked',!0);$itemToCheck.parents('label:first').addClass('active')}
this.syncingViewButtonState=!1}};Repeater.prototype.runRenderer=Repeater.prototype.renderItems;$.fn.repeater=function fnrepeater(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function eachThis(){var $this=$(this);var data=$this.data('fu.repeater');var options=typeof option==='object'&&option;if(!data){$this.data('fu.repeater',(data=new Repeater(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.repeater.defaults={dataSource:function dataSource(options,callback){callback({count:0,end:0,items:[],page:0,pages:1,start:0})},defaultView:-1,dropPagingCap:10,staticHeight:-1,views:null,searchOnKeyPress:!1,allowCancel:!0};$.fn.repeater.viewTypes={};$.fn.repeater.Constructor=Repeater;$.fn.repeater.noConflict=function noConflict(){$.fn.repeater=old;return this}})(jQuery);(function($){if($.fn.repeater){$.fn.repeater.Constructor.prototype.list_clearSelectedItems=function listClearSelectedItems(){this.$canvas.find('.repeater-list-check').remove();this.$canvas.find('.repeater-list table tbody tr.selected').removeClass('selected')};$.fn.repeater.Constructor.prototype.list_highlightColumn=function listHighlightColumn(index,force){var tbody=this.$canvas.find('.repeater-list-wrapper > table tbody');if(this.viewOptions.list_highlightSortedColumn||force){tbody.find('td.sorted').removeClass('sorted');tbody.find('tr').each(function eachTR(){var col=$(this).find('td:nth-child('+(index+1)+')').filter(function filterChildren(){return!$(this).parent().hasClass('empty')});col.addClass('sorted')})}};$.fn.repeater.Constructor.prototype.list_getSelectedItems=function listGetSelectedItems(){var selected=[];this.$canvas.find('.repeater-list .repeater-list-wrapper > table tbody tr.selected').each(function eachSelectedTR(){var $item=$(this);selected.push({data:$item.data('item_data'),element:$item})});return selected};$.fn.repeater.Constructor.prototype.getValue=$.fn.repeater.Constructor.prototype.list_getSelectedItems;$.fn.repeater.Constructor.prototype.list_positionHeadings=function listPositionHeadings(){var $wrapper=this.$element.find('.repeater-list-wrapper');var offsetLeft=$wrapper.offset().left;var scrollLeft=$wrapper.scrollLeft();if(scrollLeft>0){$wrapper.find('.repeater-list-heading').each(function eachListHeading(){var $heading=$(this);var left=($heading.parents('th:first').offset().left-offsetLeft)+'px';$heading.addClass('shifted').css('left',left)})}else{$wrapper.find('.repeater-list-heading').each(function eachListHeading(){$(this).removeClass('shifted').css('left','')})}};$.fn.repeater.Constructor.prototype.list_setSelectedItems=function listSetSelectedItems(itms,force){var selectable=this.viewOptions.list_selectable;var self=this;var data;var i;var $item;var length;var items=itms;if(!$.isArray(items)){items=[items]}
var checkIfItemMatchesValue=function checkIfItemMatchesValue(rowIndex){$item=$(this);data=$item.data('item_data')||{};if(data[items[i].property]===items[i].value){selectItem($item,items[i].selected,rowIndex)}};var selectItem=function selectItem($itm,slct,index){var $frozenCols;var select=(slct!==undefined)?slct:!0;if(select){if(!force&&selectable!=='multi'){self.list_clearSelectedItems()}
if(!$itm.hasClass('selected')){$itm.addClass('selected');if(self.viewOptions.list_frozenColumns||self.viewOptions.list_selectable==='multi'){$frozenCols=self.$element.find('.frozen-column-wrapper tr:nth-child('+(index+1)+')');$frozenCols.addClass('selected');$frozenCols.find('.repeater-select-checkbox').addClass('checked')}
if(self.viewOptions.list_actions){self.$element.find('.actions-column-wrapper tr:nth-child('+(index+1)+')').addClass('selected')}
$itm.find('td:first').prepend('<div class="repeater-list-check"><span class="glyphicon glyphicon-ok"></span></div>')}}else{if(self.viewOptions.list_frozenColumns){$frozenCols=self.$element.find('.frozen-column-wrapper tr:nth-child('+(index+1)+')');$frozenCols.addClass('selected');$frozenCols.find('.repeater-select-checkbox').removeClass('checked')}
if(self.viewOptions.list_actions){self.$element.find('.actions-column-wrapper tr:nth-child('+(index+1)+')').removeClass('selected')}
$itm.find('.repeater-list-check').remove();$itm.removeClass('selected')}};if(force===!0||selectable==='multi'){length=items.length}else if(selectable){length=(items.length>0)?1:0}else{length=0}
for(i=0;i<length;i++){if(items[i].index!==undefined){$item=this.$canvas.find('.repeater-list .repeater-list-wrapper > table tbody tr:nth-child('+(items[i].index+1)+')');if($item.length>0){selectItem($item,items[i].selected,items[i].index)}}else if(items[i].property!==undefined&&items[i].value!==undefined){this.$canvas.find('.repeater-list .repeater-list-wrapper > table tbody tr').each(checkIfItemMatchesValue)}}};$.fn.repeater.Constructor.prototype.list_sizeHeadings=function listSizeHeadings(){var $table=this.$element.find('.repeater-list table');$table.find('thead th').each(function eachTH(){var $th=$(this);var $heading=$th.find('.repeater-list-heading');$heading.css({height:$th.outerHeight()});$heading.outerWidth($heading.data('forced-width')||$th.outerWidth())})};$.fn.repeater.Constructor.prototype.list_setFrozenColumns=function listSetFrozenColumns(){var frozenTable=this.$canvas.find('.table-frozen');var $wrapper=this.$element.find('.repeater-canvas');var $table=this.$element.find('.repeater-list .repeater-list-wrapper > table');var repeaterWrapper=this.$element.find('.repeater-list');var numFrozenColumns=this.viewOptions.list_frozenColumns;var self=this;if(this.viewOptions.list_selectable==='multi'){numFrozenColumns=numFrozenColumns+1;$wrapper.addClass('multi-select-enabled')}
if(frozenTable.length<1){var $frozenColumnWrapper=$('<div class="frozen-column-wrapper"></div>').insertBefore($table);var $frozenColumn=$table.clone().addClass('table-frozen');$frozenColumn.find('th:not(:lt('+numFrozenColumns+'))').remove();$frozenColumn.find('td:not(:nth-child(n+0):nth-child(-n+'+numFrozenColumns+'))').remove();var $frozenThead=$frozenColumn.clone().removeClass('table-frozen');$frozenThead.find('tbody').remove();var $frozenTheadWrapper=$('<div class="frozen-thead-wrapper"></div>').append($frozenThead);var $checkboxLabel=$frozenTheadWrapper.find('th label.checkbox-custom.checkbox-inline');$checkboxLabel.attr('id',$checkboxLabel.attr('id')+'_cloned');$frozenColumnWrapper.append($frozenColumn);repeaterWrapper.append($frozenTheadWrapper);this.$canvas.addClass('frozen-enabled')}
this.list_sizeFrozenColumns();$('.frozen-thead-wrapper .repeater-list-heading').on('click',function onClickHeading(){var index=$(this).parent('th').index();index=index+1;self.$element.find('.repeater-list-wrapper > table thead th:nth-child('+index+') .repeater-list-heading')[0].click()})};$.fn.repeater.Constructor.prototype.list_positionColumns=function listPositionColumns(){var $wrapper=this.$element.find('.repeater-canvas');var scrollTop=$wrapper.scrollTop();var scrollLeft=$wrapper.scrollLeft();var frozenEnabled=this.viewOptions.list_frozenColumns||this.viewOptions.list_selectable==='multi';var actionsEnabled=this.viewOptions.list_actions;var canvasWidth=this.$element.find('.repeater-canvas').outerWidth();var tableWidth=this.$element.find('.repeater-list .repeater-list-wrapper > table').outerWidth();var actionsWidth=this.$element.find('.table-actions')?this.$element.find('.table-actions').outerWidth():0;var shouldScroll=(tableWidth-(canvasWidth-actionsWidth))>=scrollLeft;if(scrollTop>0){$wrapper.find('.repeater-list-heading').css('top',scrollTop)}else{$wrapper.find('.repeater-list-heading').css('top','0')}
if(scrollLeft>0){if(frozenEnabled){$wrapper.find('.frozen-thead-wrapper').css('left',scrollLeft);$wrapper.find('.frozen-column-wrapper').css('left',scrollLeft)}
if(actionsEnabled&&shouldScroll){$wrapper.find('.actions-thead-wrapper').css('right',-scrollLeft);$wrapper.find('.actions-column-wrapper').css('right',-scrollLeft)}}else{if(frozenEnabled){$wrapper.find('.frozen-thead-wrapper').css('left','0');$wrapper.find('.frozen-column-wrapper').css('left','0')}
if(actionsEnabled){$wrapper.find('.actions-thead-wrapper').css('right','0');$wrapper.find('.actions-column-wrapper').css('right','0')}}};$.fn.repeater.Constructor.prototype.list_createItemActions=function listCreateItemActions(){var actionsHtml='';var self=this;var i;var length;var $table=this.$element.find('.repeater-list .repeater-list-wrapper > table');var $actionsTable=this.$canvas.find('.table-actions');for(i=0,length=this.viewOptions.list_actions.items.length;i<length;i++){var action=this.viewOptions.list_actions.items[i];var html=action.html;actionsHtml+='<li><a href="#" data-action="'+action.name+'" class="action-item"> '+html+'</a></li>'}
var actionsDropdown='<div class="btn-group">'+'<button type="button" class="btn btn-xs btn-default dropdown-toggle repeater-actions-button" data-toggle="dropdown" data-flip="auto" aria-expanded="false">'+'<span class="caret"></span>'+'</button>'+'<ul class="dropdown-menu dropdown-menu-right" role="menu">'+actionsHtml+'</ul></div>';if($actionsTable.length<1){var $actionsColumnWrapper=$('<div class="actions-column-wrapper" style="width: '+this.list_actions_width+'px"></div>').insertBefore($table);var $actionsColumn=$table.clone().addClass('table-actions');$actionsColumn.find('th:not(:last-child)').remove();$actionsColumn.find('tr td:not(:last-child)').remove();if(this.viewOptions.list_selectable==='multi'||this.viewOptions.list_selectable==='action'){$actionsColumn.find('thead tr').html('<th><div class="repeater-list-heading">'+actionsDropdown+'</div></th>');if(this.viewOptions.list_selectable!=='action'){$actionsColumn.find('thead .btn').attr('disabled','disabled')}}else{var label=this.viewOptions.list_actions.label||'<span class="actions-hidden">a</span>';$actionsColumn.find('thead tr').addClass('empty-heading').html('<th>'+label+'<div class="repeater-list-heading">'+label+'</div></th>')}
var $actionsCells=$actionsColumn.find('td');$actionsCells.each(function addActionsDropdown(rowNumber){$(this).html(actionsDropdown);$(this).find('a').attr('data-row',rowNumber+1)});$actionsColumnWrapper.append($actionsColumn);this.$canvas.addClass('actions-enabled')}
this.list_sizeActionsTable();this.$element.find('.table-actions tbody .action-item').on('click',function onBodyActionItemClick(e){if(!self.isDisabled){var actionName=$(this).data('action');var row=$(this).data('row');var selected={actionName:actionName,rows:[row]};self.list_getActionItems(selected,e)}});this.$element.find('.table-actions thead .action-item').on('click',function onHeadActionItemClick(e){if(!self.isDisabled){var actionName=$(this).data('action');var selected={actionName:actionName,rows:[]};var selector='.repeater-list-wrapper > table .selected';if(self.viewOptions.list_selectable==='action'){selector='.repeater-list-wrapper > table tr'}
self.$element.find(selector).each(function eachSelector(selectorIndex){selected.rows.push(selectorIndex+1)});self.list_getActionItems(selected,e)}})};$.fn.repeater.Constructor.prototype.list_getActionItems=function listGetActionItems(selected,e){var selectedObj=[];var actionObj=$.grep(this.viewOptions.list_actions.items,function matchedActions(actions){return actions.name===selected.actionName})[0];for(var i=0,selectedRowsL=selected.rows.length;i<selectedRowsL;i++){var clickedRow=this.$canvas.find('.repeater-list-wrapper > table tbody tr:nth-child('+selected.rows[i]+')');selectedObj.push({item:clickedRow,rowData:clickedRow.data('item_data')})}
if(selectedObj.length===1){selectedObj=selectedObj[0]}
if(actionObj.clickAction){var callback=function noop(){};actionObj.clickAction(selectedObj,callback,e)}};$.fn.repeater.Constructor.prototype.list_sizeActionsTable=function listSizeActionsTable(){var $actionsTable=this.$element.find('.repeater-list table.table-actions');var $actionsTableHeader=$actionsTable.find('thead tr th');var $table=this.$element.find('.repeater-list-wrapper > table');$actionsTableHeader.outerHeight($table.find('thead tr th').outerHeight());$actionsTableHeader.find('.repeater-list-heading').outerHeight($actionsTableHeader.outerHeight());$actionsTable.find('tbody tr td:first-child').each(function eachFirstChild(i){$(this).outerHeight($table.find('tbody tr:eq('+i+') td').outerHeight())})};$.fn.repeater.Constructor.prototype.list_sizeFrozenColumns=function listSizeFrozenColumns(){var $table=this.$element.find('.repeater-list .repeater-list-wrapper > table');this.$element.find('.repeater-list table.table-frozen tr').each(function eachTR(i){$(this).height($table.find('tr:eq('+i+')').height())});var columnWidth=$table.find('td:eq(0)').outerWidth();this.$element.find('.frozen-column-wrapper, .frozen-thead-wrapper').width(columnWidth)};$.fn.repeater.Constructor.prototype.list_frozenOptionsInitialize=function listFrozenOptionsInitialize(){var $checkboxes=this.$element.find('.frozen-column-wrapper .checkbox-inline');var $headerCheckbox=this.$element.find('.header-checkbox .checkbox-custom');var $everyTable=this.$element.find('.repeater-list table');var self=this;this.$element.find('tr.selectable').on('mouseover mouseleave',function onMouseEvents(e){var index=$(this).index();index=index+1;if(e.type==='mouseover'){$everyTable.find('tbody tr:nth-child('+index+')').addClass('hovered')}else{$everyTable.find('tbody tr:nth-child('+index+')').removeClass('hovered')}});$headerCheckbox.checkbox();$checkboxes.checkbox();var $rowCheckboxes=this.$element.find('.table-frozen tbody .checkbox-inline');var $checkAll=this.$element.find('.frozen-thead-wrapper thead .checkbox-inline input');$rowCheckboxes.on('change',function onChangeRowCheckboxes(e){e.preventDefault();if(!self.list_revertingCheckbox){if(self.isDisabled){revertCheckbox($(e.currentTarget))}else{var row=$(this).attr('data-row');row=parseInt(row,10)+1;self.$element.find('.repeater-list-wrapper > table tbody tr:nth-child('+row+')').click();var numSelected=self.$element.find('.table-frozen tbody .checkbox-inline.checked').length;if(numSelected===0){$checkAll.prop('checked',!1);$checkAll.prop('indeterminate',!1)}else if(numSelected===$rowCheckboxes.length){$checkAll.prop('checked',!0);$checkAll.prop('indeterminate',!1)}else{$checkAll.prop('checked',!1);$checkAll.prop('indeterminate',!0)}}}});$checkAll.on('change',function onChangeCheckAll(e){if(!self.list_revertingCheckbox){if(self.isDisabled){revertCheckbox($(e.currentTarget))}else if($(this).is(':checked')){self.$element.find('.repeater-list-wrapper > table tbody tr:not(.selected)').click();self.$element.trigger('selected.fu.repeaterList',$checkboxes)}else{self.$element.find('.repeater-list-wrapper > table tbody tr.selected').click();self.$element.trigger('deselected.fu.repeaterList',$checkboxes)}}});function revertCheckbox($checkbox){self.list_revertingCheckbox=!0;$checkbox.checkbox('toggle');delete self.list_revertingCheckbox}};$.fn.repeater.defaults=$.extend({},$.fn.repeater.defaults,{list_columnRendered:null,list_columnSizing:!0,list_columnSyncing:!0,list_highlightSortedColumn:!0,list_infiniteScroll:!1,list_noItemsHTML:'no items found',list_selectable:!1,list_sortClearing:!1,list_rowRendered:null,list_frozenColumns:0,list_actions:!1});$.fn.repeater.viewTypes.list={cleared:function cleared(){if(this.viewOptions.list_columnSyncing){this.list_sizeHeadings()}},dataOptions:function dataOptions(options){if(this.list_sortDirection){options.sortDirection=this.list_sortDirection}
if(this.list_sortProperty){options.sortProperty=this.list_sortProperty}
return options},enabled:function enabled(helpers){if(this.viewOptions.list_actions){if(!helpers.status){this.$canvas.find('.repeater-actions-button').attr('disabled','disabled')}else{this.$canvas.find('.repeater-actions-button').removeAttr('disabled');toggleActionsHeaderButton.call(this)}}},initialize:function initialize(helpers,callback){this.list_sortDirection=null;this.list_sortProperty=null;this.list_specialBrowserClass=specialBrowserClass();this.list_actions_width=(this.viewOptions.list_actions.width!==undefined)?this.viewOptions.list_actions.width:37;this.list_noItems=!1;callback()},resize:function resize(){sizeColumns.call(this,this.$element.find('.repeater-list-wrapper > table thead tr'));if(this.viewOptions.list_actions){this.list_sizeActionsTable()}
if(this.viewOptions.list_frozenColumns||this.viewOptions.list_selectable==='multi'){this.list_sizeFrozenColumns()}
if(this.viewOptions.list_columnSyncing){this.list_sizeHeadings()}},selected:function selected(){var infScroll=this.viewOptions.list_infiniteScroll;var opts;this.list_firstRender=!0;this.$loader.addClass('noHeader');if(infScroll){opts=(typeof infScroll==='object')?infScroll:{};this.infiniteScrolling(!0,opts)}},before:function before(helpers){var $listContainer=helpers.container.find('.repeater-list');var self=this;var $table;if(helpers.data.count>0){this.list_noItems=!1}else{this.list_noItems=!0}
if($listContainer.length<1){$listContainer=$('<div class="repeater-list '+this.list_specialBrowserClass+'" data-preserve="shallow"><div class="repeater-list-wrapper" data-infinite="true" data-preserve="shallow"><table aria-readonly="true" class="table" data-preserve="shallow" role="grid"></table></div></div>');$listContainer.find('.repeater-list-wrapper').on('scroll.fu.repeaterList',function onScrollRepeaterList(){if(self.viewOptions.list_columnSyncing){self.list_positionHeadings()}});if(self.viewOptions.list_frozenColumns||self.viewOptions.list_actions||self.viewOptions.list_selectable==='multi'){helpers.container.on('scroll.fu.repeaterList',function onScrollRepeaterList(){self.list_positionColumns()})}
helpers.container.append($listContainer)}
helpers.container.removeClass('actions-enabled actions-enabled multi-select-enabled');$table=$listContainer.find('table');renderThead.call(this,$table,helpers.data);renderTbody.call(this,$table,helpers.data);return!1},renderItem:function renderItem(helpers){renderRow.call(this,helpers.container,helpers.subset,helpers.index);return!1},after:function after(){var $sorted;if((this.viewOptions.list_frozenColumns||this.viewOptions.list_selectable==='multi')&&!this.list_noItems){this.list_setFrozenColumns()}
if(this.viewOptions.list_actions&&!this.list_noItems){this.list_createItemActions();this.list_sizeActionsTable()}
if((this.viewOptions.list_frozenColumns||this.viewOptions.list_actions||this.viewOptions.list_selectable==='multi')&&!this.list_noItems){this.list_positionColumns();this.list_frozenOptionsInitialize()}
if(this.viewOptions.list_columnSyncing){this.list_sizeHeadings();this.list_positionHeadings()}
$sorted=this.$canvas.find('.repeater-list-wrapper > table .repeater-list-heading.sorted');if($sorted.length>0){this.list_highlightColumn($sorted.data('fu_item_index'))}
return!1}}}
var areDifferentColumns=function areDifferentColumns(oldCols,newCols){if(!newCols){return!1}
if(!oldCols||(newCols.length!==oldCols.length)){return!0}
for(var i=0,newColsL=newCols.length;i<newColsL;i++){if(!oldCols[i]){return!0}
for(var j in newCols[i]){if(newCols[i].hasOwnProperty(j)&&oldCols[i][j]!==newCols[i][j]){return!0}}}
return!1};var renderColumn=function renderColumn($row,rows,rowIndex,columns,columnIndex){var className=columns[columnIndex].className;var content=rows[rowIndex][columns[columnIndex].property];var $col=$('<td></td>');var width=columns[columnIndex]._auto_width;var property=columns[columnIndex].property;if(this.viewOptions.list_actions!==!1&&property==='@_ACTIONS_@'){content='<div class="repeater-list-actions-placeholder" style="width: '+this.list_actions_width+'px"></div>'}
content=(content!==undefined)?content:'';$col.addClass(((className!==undefined)?className:'')).append(content);if(width!==undefined){$col.outerWidth(width)}
$row.append($col);if(this.viewOptions.list_selectable==='multi'&&columns[columnIndex].property==='@_CHECKBOX_@'){var checkBoxMarkup='<label data-row="'+rowIndex+'" class="checkbox-custom checkbox-inline body-checkbox repeater-select-checkbox">'+'<input class="sr-only" type="checkbox"></label>';$col.html(checkBoxMarkup)}
return $col};var renderHeader=function renderHeader($tr,columns,index){var chevDown='glyphicon-chevron-down';var chevron='.glyphicon.rlc:first';var chevUp='glyphicon-chevron-up';var $div=$('<div class="repeater-list-heading"><span class="glyphicon rlc"></span></div>');var checkAllID=(this.$element.attr('id')+'_'||'')+'checkall';var checkBoxMarkup='<div class="repeater-list-heading header-checkbox">'+'<label id="'+checkAllID+'" class="checkbox-custom checkbox-inline">'+'<input class="sr-only" type="checkbox" value="">'+'<span class="checkbox-label">&nbsp;</span>'+'</label>'+'</div>';var $header=$('<th></th>');var self=this;var $both;var className;var sortable;var $span;var $spans;$div.data('fu_item_index',index);$div.prepend(columns[index].label);$header.html($div.html()).find('[id]').removeAttr('id');if(columns[index].property!=='@_CHECKBOX_@'){$header.append($div)}else{$header.append(checkBoxMarkup)}
$both=$header.add($div);$span=$div.find(chevron);$spans=$span.add($header.find(chevron));if(this.viewOptions.list_actions&&columns[index].property==='@_ACTIONS_@'){var width=this.list_actions_width;$header.css('width',width);$div.css('width',width)}
className=columns[index].className;if(className!==undefined){$both.addClass(className)}
sortable=columns[index].sortable;if(sortable){$both.addClass('sortable');$div.on('click.fu.repeaterList',function onClickRepeaterList(){if(!self.isDisabled){self.list_sortProperty=(typeof sortable==='string')?sortable:columns[index].property;if($div.hasClass('sorted')){if($span.hasClass(chevUp)){$spans.removeClass(chevUp).addClass(chevDown);self.list_sortDirection='desc'}else if(!self.viewOptions.list_sortClearing){$spans.removeClass(chevDown).addClass(chevUp);self.list_sortDirection='asc'}else{$both.removeClass('sorted');$spans.removeClass(chevDown);self.list_sortDirection=null;self.list_sortProperty=null}}else{$tr.find('th, .repeater-list-heading').removeClass('sorted');$spans.removeClass(chevDown).addClass(chevUp);self.list_sortDirection='asc';$both.addClass('sorted')}
self.render({clearInfinite:!0,pageIncrement:null})}})}
if(columns[index].sortDirection==='asc'||columns[index].sortDirection==='desc'){$tr.find('th, .repeater-list-heading').removeClass('sorted');$both.addClass('sortable sorted');if(columns[index].sortDirection==='asc'){$spans.addClass(chevUp);this.list_sortDirection='asc'}else{$spans.addClass(chevDown);this.list_sortDirection='desc'}
this.list_sortProperty=(typeof sortable==='string')?sortable:columns[index].property}
$tr.append($header)};var onClickRowRepeaterList=function onClickRowRepeaterList(repeater){var isMulti=repeater.viewOptions.list_selectable==='multi';var isActions=repeater.viewOptions.list_actions;var $repeater=repeater.$element;if(!repeater.isDisabled){var $item=$(this);var index=$(this).index()+1;var $frozenRow=$repeater.find('.frozen-column-wrapper tr:nth-child('+index+')');var $actionsRow=$repeater.find('.actions-column-wrapper tr:nth-child('+index+')');var $checkBox=$repeater.find('.frozen-column-wrapper tr:nth-child('+index+') .checkbox-inline');if($item.is('.selected')){$item.removeClass('selected');if(isMulti){$checkBox.click();$frozenRow.removeClass('selected');if(isActions){$actionsRow.removeClass('selected')}}else{$item.find('.repeater-list-check').remove()}
$repeater.trigger('deselected.fu.repeaterList',$item)}else{if(!isMulti){repeater.$canvas.find('.repeater-list-check').remove();repeater.$canvas.find('.repeater-list tbody tr.selected').each(function deslectRow(){$(this).removeClass('selected');$repeater.trigger('deselected.fu.repeaterList',$(this))});$item.find('td:first').prepend('<div class="repeater-list-check"><span class="glyphicon glyphicon-ok"></span></div>');$item.addClass('selected');$frozenRow.addClass('selected')}else{$checkBox.click();$item.addClass('selected');$frozenRow.addClass('selected');if(isActions){$actionsRow.addClass('selected')}}
$repeater.trigger('selected.fu.repeaterList',$item)}
toggleActionsHeaderButton.call(repeater)}};var renderRow=function renderRow($tbody,rows,index){var $row=$('<tr></tr>');if(this.viewOptions.list_selectable){$row.data('item_data',rows[index]);if(this.viewOptions.list_selectable!=='action'){$row.addClass('selectable');$row.attr('tabindex',0);var repeater=this;$row.on('click.fu.repeaterList',function callOnClickRowRepeaterList(){onClickRowRepeaterList.call(this,repeater)});$row.keyup(function onRowKeyup(e){if(e.keyCode===13){$row.trigger('click.fu.repeaterList')}})}}
if(this.viewOptions.list_actions&&!this.viewOptions.list_selectable){$row.data('item_data',rows[index])}
var columns=[];for(var i=0,length=this.list_columns.length;i<length;i++){columns.push(renderColumn.call(this,$row,rows,index,this.list_columns,i))}
$tbody.append($row);if(this.viewOptions.list_columnRendered){for(var columnIndex=0,colLength=columns.length;columnIndex<colLength;columnIndex++){if(!(this.list_columns[columnIndex].property==='@_CHECKBOX_@'||this.list_columns[columnIndex].property==='@_ACTIONS_@')){this.viewOptions.list_columnRendered({container:$row,columnAttr:this.list_columns[columnIndex].property,item:columns[columnIndex],rowData:rows[index]},function noop(){})}}}
if(this.viewOptions.list_rowRendered){this.viewOptions.list_rowRendered({container:$tbody,item:$row,rowData:rows[index]},function noop(){})}};var renderTbody=function renderTbody($table,data){var $tbody=$table.find('tbody');var $empty;if($tbody.length<1){$tbody=$('<tbody data-container="true"></tbody>');$table.append($tbody)}
if(typeof data.error==='string'&&data.error.length>0){$empty=$('<tr class="empty text-danger"><td colspan="'+this.list_columns.length+'"></td></tr>');$empty.find('td').append(data.error);$tbody.append($empty)}else if(data.items&&data.items.length<1){$empty=$('<tr class="empty"><td colspan="'+this.list_columns.length+'"></td></tr>');$empty.find('td').append(this.viewOptions.list_noItemsHTML);$tbody.append($empty)}};var renderThead=function renderThead($table,data){var columns=data.columns||[];var $thead=$table.find('thead');var i;var length;var $tr;if(this.list_firstRender||areDifferentColumns(this.list_columns,columns)||$thead.length===0){$thead.remove();if(this.viewOptions.list_selectable==='multi'&&!this.list_noItems){var checkboxColumn={label:'c',property:'@_CHECKBOX_@',sortable:!1};columns.splice(0,0,checkboxColumn)}
this.list_columns=columns;this.list_firstRender=!1;this.$loader.removeClass('noHeader');if(this.viewOptions.list_actions){var actionsColumn={label:this.viewOptions.list_actions.label||'<span class="actions-hidden">a</span>',property:'@_ACTIONS_@',sortable:!1,width:this.list_actions_width};columns.push(actionsColumn)}
$thead=$('<thead data-preserve="deep"><tr></tr></thead>');$tr=$thead.find('tr');for(i=0,length=columns.length;i<length;i++){renderHeader.call(this,$tr,columns,i)}
$table.prepend($thead);if(this.viewOptions.list_selectable==='multi'&&!this.list_noItems){var checkboxWidth=this.$element.find('.repeater-list-wrapper .header-checkbox').outerWidth();var selectColumn=$.grep(columns,function grepColumn(column){return column.property==='@_CHECKBOX_@'})[0];selectColumn.width=checkboxWidth}
sizeColumns.call(this,$tr)}};var sizeColumns=function sizeColumns($tr){var automaticallyGeneratedWidths=[];var self=this;var i;var length;var newWidth;var widthTaken;if(this.viewOptions.list_columnSizing){i=0;widthTaken=0;$tr.find('th').each(function eachTH(){var $th=$(this);var width;if(self.list_columns[i].width!==undefined){width=self.list_columns[i].width;$th.outerWidth(width);widthTaken+=$th.outerWidth();self.list_columns[i]._auto_width=width}else{var outerWidth=$th.find('.repeater-list-heading').outerWidth();automaticallyGeneratedWidths.push({col:$th,index:i,minWidth:outerWidth})}
i++});length=automaticallyGeneratedWidths.length;if(length>0){var canvasWidth=this.$canvas.find('.repeater-list-wrapper').outerWidth();newWidth=Math.floor((canvasWidth-widthTaken)/length);for(i=0;i<length;i++){if(automaticallyGeneratedWidths[i].minWidth>newWidth){newWidth=automaticallyGeneratedWidths[i].minWidth}
automaticallyGeneratedWidths[i].col.outerWidth(newWidth);this.list_columns[automaticallyGeneratedWidths[i].index]._auto_width=newWidth}}}};var specialBrowserClass=function specialBrowserClass(){var ua=window.navigator.userAgent;var msie=ua.indexOf('MSIE ');var firefox=ua.indexOf('Firefox');if(msie>0){return 'ie-'+parseInt(ua.substring(msie+5,ua.indexOf('.',msie)),10)}else if(firefox>0){return 'firefox'}
return ''};var toggleActionsHeaderButton=function toggleActionsHeaderButton(){var selectedSelector='.repeater-list-wrapper > table .selected';var $actionsColumn=this.$element.find('.table-actions');var $selected;if(this.viewOptions.list_selectable==='action'){selectedSelector='.repeater-list-wrapper > table tr'}
$selected=this.$canvas.find(selectedSelector);if($selected.length>0){$actionsColumn.find('thead .btn').removeAttr('disabled')}else{$actionsColumn.find('thead .btn').attr('disabled','disabled')}}})(jQuery);(function($){if($.fn.repeater){$.fn.repeater.Constructor.prototype.thumbnail_clearSelectedItems=function(){this.$canvas.find('.repeater-thumbnail-cont .selectable.selected').removeClass('selected')};$.fn.repeater.Constructor.prototype.thumbnail_getSelectedItems=function(){var selected=[];this.$canvas.find('.repeater-thumbnail-cont .selectable.selected').each(function(){selected.push($(this))});return selected};$.fn.repeater.Constructor.prototype.thumbnail_setSelectedItems=function(items,force){var selectable=this.viewOptions.thumbnail_selectable;var self=this;var i,$item,l,n;function compareItemIndex(){if(n===items[i].index){$item=$(this);return!1}else{n++}}
function compareItemSelector(){$item=$(this);if($item.is(items[i].selector)){selectItem($item,items[i].selected)}}
function selectItem($itm,select){select=(select!==undefined)?select:!0;if(select){if(!force&&selectable!=='multi'){self.thumbnail_clearSelectedItems()}
$itm.addClass('selected')}else{$itm.removeClass('selected')}}
if(!$.isArray(items)){items=[items]}
if(force===!0||selectable==='multi'){l=items.length}else if(selectable){l=(items.length>0)?1:0}else{l=0}
for(i=0;i<l;i++){if(items[i].index!==undefined){$item=$();n=0;this.$canvas.find('.repeater-thumbnail-cont .selectable').each(compareItemIndex);if($item.length>0){selectItem($item,items[i].selected)}}else if(items[i].selector){this.$canvas.find('.repeater-thumbnail-cont .selectable').each(compareItemSelector)}}};$.fn.repeater.defaults=$.extend({},$.fn.repeater.defaults,{thumbnail_alignment:'left',thumbnail_infiniteScroll:!1,thumbnail_itemRendered:null,thumbnail_noItemsHTML:'no items found',thumbnail_selectable:!1,thumbnail_template:'<div class="thumbnail repeater-thumbnail"><img height="75" src="{{src}}" width="65"><span>{{name}}</span></div>'});$.fn.repeater.viewTypes.thumbnail={selected:function(){var infScroll=this.viewOptions.thumbnail_infiniteScroll;var opts;if(infScroll){opts=(typeof infScroll==='object')?infScroll:{};this.infiniteScrolling(!0,opts)}},before:function(helpers){var alignment=this.viewOptions.thumbnail_alignment;var $cont=this.$canvas.find('.repeater-thumbnail-cont');var data=helpers.data;var response={};var $empty,validAlignments;if($cont.length<1){$cont=$('<div class="clearfix repeater-thumbnail-cont" data-container="true" data-infinite="true" data-preserve="shallow"></div>');if(alignment&&alignment!=='none'){validAlignments={'center':1,'justify':1,'left':1,'right':1};alignment=(validAlignments[alignment])?alignment:'justify';$cont.addClass('align-'+alignment);this.thumbnail_injectSpacers=!0}else{this.thumbnail_injectSpacers=!1}
response.item=$cont}else{response.action='none'}
if(data.items&&data.items.length<1){$empty=$('<div class="empty"></div>');$empty.append(this.viewOptions.thumbnail_noItemsHTML);$cont.append($empty)}else{$cont.find('.empty:first').remove()}
return response},renderItem:function(helpers){var selectable=this.viewOptions.thumbnail_selectable;var selected='selected';var self=this;var $thumbnail=$(fillTemplate(helpers.subset[helpers.index],this.viewOptions.thumbnail_template));$thumbnail.data('item_data',helpers.data.items[helpers.index]);if(selectable){$thumbnail.addClass('selectable');$thumbnail.on('click',function(){if(self.isDisabled)return;if(!$thumbnail.hasClass(selected)){if(selectable!=='multi'){self.$canvas.find('.repeater-thumbnail-cont .selectable.selected').each(function(){var $itm=$(this);$itm.removeClass(selected);self.$element.trigger('deselected.fu.repeaterThumbnail',$itm)})}
$thumbnail.addClass(selected);self.$element.trigger('selected.fu.repeaterThumbnail',$thumbnail)}else{$thumbnail.removeClass(selected);self.$element.trigger('deselected.fu.repeaterThumbnail',$thumbnail)}})}
helpers.container.append($thumbnail);if(this.thumbnail_injectSpacers){$thumbnail.after('<span class="spacer">&nbsp;</span>')}
if(this.viewOptions.thumbnail_itemRendered){this.viewOptions.thumbnail_itemRendered({container:helpers.container,item:$thumbnail,itemData:helpers.subset[helpers.index]},function(){})}
return!1}}}
function fillTemplate(itemData,template){var invalid=!1;function replace(){var end,start,val;start=template.indexOf('{{');end=template.indexOf('}}',start+2);if(start>-1&&end>-1){val=$.trim(template.substring(start+2,end));val=(itemData[val]!==undefined)?itemData[val]:'';template=template.substring(0,start)+val+template.substring(end+2)}else{invalid=!0}}
while(!invalid&&template.search('{{')>=0){replace(template)}
return template}})(jQuery);(function($){var old=$.fn.scheduler;var Scheduler=function Scheduler(element,options){var self=this;this.$element=$(element);this.options=$.extend({},$.fn.scheduler.defaults,options);this.$startDate=this.$element.find('.start-datetime .start-date');this.$startTime=this.$element.find('.start-datetime .start-time');this.$timeZone=this.$element.find('.timezone-container .timezone');this.$repeatIntervalPanel=this.$element.find('.repeat-every-panel');this.$repeatIntervalSelect=this.$element.find('.repeat-options');this.$repeatIntervalSpinbox=this.$element.find('.repeat-every');this.$repeatIntervalTxt=this.$element.find('.repeat-every-text');this.$end=this.$element.find('.repeat-end');this.$endSelect=this.$end.find('.end-options');this.$endAfter=this.$end.find('.end-after');this.$endDate=this.$end.find('.end-on-date');this.$recurrencePanels=this.$element.find('.repeat-panel');this.$repeatIntervalSelect.selectlist();this.$element.find('.selectlist').selectlist();this.$startDate.datepicker(this.options.startDateOptions);var startDateResponse=(typeof this.options.startDateChanged==="function")?this.options.startDateChanged:this._guessEndDate;this.$startDate.on('change changed.fu.datepicker dateClicked.fu.datepicker',$.proxy(startDateResponse,this));this.$startTime.combobox();if(this.$startTime.find('input').val()===''){this.$startTime.combobox('selectByIndex',0)}
if(this.$repeatIntervalSpinbox.find('input').val()==='0'){this.$repeatIntervalSpinbox.spinbox({'value':1,'min':1,'limitToStep':!0})}else{this.$repeatIntervalSpinbox.spinbox({'min':1,'limitToStep':!0})}
this.$endAfter.spinbox({'value':1,'min':1,'limitToStep':!0});this.$endDate.datepicker(this.options.endDateOptions);this.$element.find('.radio-custom').radio();this.$repeatIntervalSelect.on('changed.fu.selectlist',$.proxy(this.repeatIntervalSelectChanged,this));this.$endSelect.on('changed.fu.selectlist',$.proxy(this.endSelectChanged,this));this.$element.find('.repeat-days-of-the-week .btn-group .btn').on('change.fu.scheduler',function(e,data){self.changed(e,data,!0)});this.$element.find('.combobox').on('changed.fu.combobox',$.proxy(this.changed,this));this.$element.find('.datepicker').on('changed.fu.datepicker',$.proxy(this.changed,this));this.$element.find('.datepicker').on('dateClicked.fu.datepicker',$.proxy(this.changed,this));this.$element.find('.selectlist').on('changed.fu.selectlist',$.proxy(this.changed,this));this.$element.find('.spinbox').on('changed.fu.spinbox',$.proxy(this.changed,this));this.$element.find('.repeat-monthly .radio-custom, .repeat-yearly .radio-custom').on('change.fu.scheduler',$.proxy(this.changed,this))};var _getFormattedDate=function _getFormattedDate(dateObj,dash){var fdate='';var item;fdate+=dateObj.getFullYear();fdate+=dash;item=dateObj.getMonth()+1;fdate+=(item<10)?'0'+item:item;fdate+=dash;item=dateObj.getDate();fdate+=(item<10)?'0'+item:item;return fdate};var ONE_SECOND=1000;var ONE_MINUTE=ONE_SECOND*60;var ONE_HOUR=ONE_MINUTE*60;var ONE_DAY=ONE_HOUR*24;var ONE_WEEK=ONE_DAY*7;var ONE_MONTH=ONE_WEEK*5;var ONE_YEAR=ONE_WEEK*52;var INTERVALS={secondly:ONE_SECOND,minutely:ONE_MINUTE,hourly:ONE_HOUR,daily:ONE_DAY,weekly:ONE_WEEK,monthly:ONE_MONTH,yearly:ONE_YEAR};var _incrementDate=function _incrementDate(start,end,interval,increment){return new Date(start.getTime()+(INTERVALS[interval]*increment))};Scheduler.prototype={constructor:Scheduler,destroy:function destroy(){var markup;this.$element.find('input').each(function(){$(this).attr('value',$(this).val())});this.$element.find('.datepicker .calendar').empty();markup=this.$element[0].outerHTML;this.$element.find('.combobox').combobox('destroy');this.$element.find('.datepicker').datepicker('destroy');this.$element.find('.selectlist').selectlist('destroy');this.$element.find('.spinbox').spinbox('destroy');this.$element.find('.radio-custom').radio('destroy');this.$element.remove();return markup},changed:function changed(e,data,propagate){if(!propagate){e.stopPropagation()}
this.$element.trigger('changed.fu.scheduler',{data:(data!==undefined)?data:$(e.currentTarget).data(),originalEvent:e,value:this.getValue()})},disable:function disable(){this.toggleState('disable')},enable:function enable(){this.toggleState('enable')},setUtcTime:function setUtcTime(day,time,offset){var dateSplit=day.split('-');var timeSplit=time.split(':');function z(n){return(n<10?'0':'')+n}
var utcDate=new Date(Date.UTC(dateSplit[0],(dateSplit[1]-1),dateSplit[2],timeSplit[0],timeSplit[1],(timeSplit[2]?timeSplit[2]:0)));if(offset==='Z'){utcDate.setUTCHours(utcDate.getUTCHours()+0)}else{var expression=[];expression[0]='(.)';expression[1]='.*?';expression[2]='\\d';expression[3]='.*?';expression[4]='(\\d)';var p=new RegExp(expression.join(''),["i"]);var offsetMatch=p.exec(offset);if(offsetMatch!==null){var offsetDirection=offsetMatch[1];var offsetInteger=offsetMatch[2];var modifier=(offsetDirection==='+')?1:-1;utcDate.setUTCHours(utcDate.getUTCHours()+(modifier*parseInt(offsetInteger,10)))}}
var localDifference=utcDate.getTimezoneOffset();utcDate.setMinutes(localDifference);return utcDate},endSelectChanged:function endSelectChanged(e,data){var selectedItem,val;if(!data){selectedItem=this.$endSelect.selectlist('selectedItem');val=selectedItem.value}else{val=data.value}
this.$endAfter.parent().addClass('hidden');this.$endAfter.parent().attr('aria-hidden','true');this.$endDate.parent().addClass('hidden');this.$endDate.parent().attr('aria-hidden','true');if(val==='after'){this.$endAfter.parent().removeClass('hide hidden');this.$endAfter.parent().attr('aria-hidden','false')}else if(val==='date'){this.$endDate.parent().removeClass('hide hidden');this.$endDate.parent().attr('aria-hidden','false')}},_guessEndDate:function _guessEndDate(){var interval=this.$repeatIntervalSelect.selectlist('selectedItem').value;var end=new Date(this.$endDate.datepicker('getDate'));var start=new Date(this.$startDate.datepicker('getDate'));var increment=this.$repeatIntervalSpinbox.find('input').val();if(interval!=="none"&&end<=start){if(!this.$repeatIntervalSpinbox.is(':visible')){increment=1}
if(interval==="weekdays"){increment=1;interval="weekly"}
end=_incrementDate(start,end,interval,increment);this.$endDate.datepicker('setDate',end)}},getValue:function getValue(){var interval=this.$repeatIntervalSpinbox.spinbox('value');var pattern='';var repeat=this.$repeatIntervalSelect.selectlist('selectedItem').value;var startTime;if(this.$startTime.combobox('selectedItem').value){startTime=this.$startTime.combobox('selectedItem').value;startTime=startTime.toLowerCase()}else{startTime=this.$startTime.combobox('selectedItem').text.toLowerCase()}
var timeZone=this.$timeZone.selectlist('selectedItem');var day,days,hasAm,hasPm,month,pos,startDateTime,type;startDateTime=''+_getFormattedDate(this.$startDate.datepicker('getDate'),'-');startDateTime+='T';hasAm=(startTime.search('am')>=0);hasPm=(startTime.search('pm')>=0);startTime=$.trim(startTime.replace(/am/g,'').replace(/pm/g,'')).split(':');startTime[0]=parseInt(startTime[0],10);startTime[1]=parseInt(startTime[1],10);if(hasAm&&startTime[0]>11){startTime[0]=0}else if(hasPm&&startTime[0]<12){startTime[0]+=12}
startDateTime+=(startTime[0]<10)?'0'+startTime[0]:startTime[0];startDateTime+=':';startDateTime+=(startTime[1]<10)?'0'+startTime[1]:startTime[1];startDateTime+=(timeZone.offset==='+00:00')?'Z':timeZone.offset;if(repeat==='none'){pattern='FREQ=DAILY;INTERVAL=1;COUNT=1;'}else if(repeat==='secondly'){pattern='FREQ=SECONDLY;';pattern+='INTERVAL='+interval+';'}else if(repeat==='minutely'){pattern='FREQ=MINUTELY;';pattern+='INTERVAL='+interval+';'}else if(repeat==='hourly'){pattern='FREQ=HOURLY;';pattern+='INTERVAL='+interval+';'}else if(repeat==='daily'){pattern+='FREQ=DAILY;';pattern+='INTERVAL='+interval+';'}else if(repeat==='weekdays'){pattern+='FREQ=WEEKLY;';pattern+='BYDAY=MO,TU,WE,TH,FR;';pattern+='INTERVAL=1;'}else if(repeat==='weekly'){days=[];this.$element.find('.repeat-days-of-the-week .btn-group input:checked').each(function(){days.push($(this).data().value)});pattern+='FREQ=WEEKLY;';pattern+='BYDAY='+days.join(',')+';';pattern+='INTERVAL='+interval+';'}else if(repeat==='monthly'){pattern+='FREQ=MONTHLY;';pattern+='INTERVAL='+interval+';';type=this.$element.find('input[name=repeat-monthly]:checked').val();if(type==='bymonthday'){day=parseInt(this.$element.find('.repeat-monthly-date .selectlist').selectlist('selectedItem').text,10);pattern+='BYMONTHDAY='+day+';'}else if(type==='bysetpos'){days=this.$element.find('.repeat-monthly-day .month-days').selectlist('selectedItem').value;pos=this.$element.find('.repeat-monthly-day .month-day-pos').selectlist('selectedItem').value;pattern+='BYDAY='+days+';';pattern+='BYSETPOS='+pos+';'}}else if(repeat==='yearly'){pattern+='FREQ=YEARLY;';type=this.$element.find('input[name=repeat-yearly]:checked').val();if(type==='bymonthday'){month=this.$element.find('.repeat-yearly-date .year-month').selectlist('selectedItem').value;day=this.$element.find('.repeat-yearly-date .year-month-day').selectlist('selectedItem').text;pattern+='BYMONTH='+month+';';pattern+='BYMONTHDAY='+day+';'}else if(type==='bysetpos'){days=this.$element.find('.repeat-yearly-day .year-month-days').selectlist('selectedItem').value;pos=this.$element.find('.repeat-yearly-day .year-month-day-pos').selectlist('selectedItem').value;month=this.$element.find('.repeat-yearly-day .year-month').selectlist('selectedItem').value;pattern+='BYDAY='+days+';';pattern+='BYSETPOS='+pos+';';pattern+='BYMONTH='+month+';'}}
var end=this.$endSelect.selectlist('selectedItem').value;var duration='';if(repeat!=='none'){if(end==='after'){duration='COUNT='+this.$endAfter.spinbox('value')+';'}else if(end==='date'){duration='UNTIL='+_getFormattedDate(this.$endDate.datepicker('getDate'),'')+';'}}
pattern+=duration;pattern=pattern.substring(pattern.length-1)===';'?pattern.substring(0,pattern.length-1):pattern;var data={startDateTime:startDateTime,timeZone:timeZone,recurrencePattern:pattern};return data},repeatIntervalSelectChanged:function repeatIntervalSelectChanged(e,data){var selectedItem,val,txt;if(!data){selectedItem=this.$repeatIntervalSelect.selectlist('selectedItem');val=selectedItem.value||"";txt=selectedItem.text||""}else{val=data.value;txt=data.text}
this.$repeatIntervalTxt.text(txt);switch(val.toLowerCase()){case 'hourly':case 'daily':case 'weekly':case 'monthly':this.$repeatIntervalPanel.removeClass('hide hidden');this.$repeatIntervalPanel.attr('aria-hidden','false');break;default:this.$repeatIntervalPanel.addClass('hidden');this.$repeatIntervalPanel.attr('aria-hidden','true');break}
this.$recurrencePanels.addClass('hidden');this.$recurrencePanels.attr('aria-hidden','true');this.$element.find('.repeat-'+val).removeClass('hide hidden');this.$element.find('.repeat-'+val).attr('aria-hidden','false');if(val==='none'){this.$end.addClass('hidden');this.$end.attr('aria-hidden','true')}else{this.$end.removeClass('hide hidden');this.$end.attr('aria-hidden','false')}
this._guessEndDate()},_parseAndSetRecurrencePattern:function(recurrencePattern,startTime){var recur={};var i=0;var item='';var commaPatternSplit;var $repeatMonthlyDate,$repeatYearlyDate,$repeatYearlyDay;var semiColonPatternSplit=recurrencePattern.toUpperCase().split(';');for(i=0;i<semiColonPatternSplit.length;i++){if(semiColonPatternSplit[i]!==''){item=semiColonPatternSplit[i].split('=');recur[item[0]]=item[1]}}
if(recur.FREQ==='DAILY'){if(recur.BYDAY==='MO,TU,WE,TH,FR'){item='weekdays'}else{if(recur.INTERVAL==='1'&&recur.COUNT==='1'){item='none'}else{item='daily'}}}else if(recur.FREQ==='SECONDLY'){item='secondly'}else if(recur.FREQ==='MINUTELY'){item='minutely'}else if(recur.FREQ==='HOURLY'){item='hourly'}else if(recur.FREQ==='WEEKLY'){item='weekly';if(recur.BYDAY){if(recur.BYDAY==='MO,TU,WE,TH,FR'){item='weekdays'}else{var el=this.$element.find('.repeat-days-of-the-week .btn-group');el.find('label').removeClass('active');commaPatternSplit=recur.BYDAY.split(',');for(i=0;i<commaPatternSplit.length;i++){el.find('input[data-value="'+commaPatternSplit[i]+'"]').prop('checked',!0).parent().addClass('active')}}}}else if(recur.FREQ==='MONTHLY'){this.$element.find('.repeat-monthly input').removeAttr('checked').removeClass('checked');this.$element.find('.repeat-monthly label.radio-custom').removeClass('checked');if(recur.BYMONTHDAY){$repeatMonthlyDate=this.$element.find('.repeat-monthly-date');$repeatMonthlyDate.find('input').addClass('checked').prop('checked',!0);$repeatMonthlyDate.find('label.radio-custom').addClass('checked');$repeatMonthlyDate.find('.selectlist').selectlist('selectByValue',recur.BYMONTHDAY)}else if(recur.BYDAY){var $repeatMonthlyDay=this.$element.find('.repeat-monthly-day');$repeatMonthlyDay.find('input').addClass('checked').prop('checked',!0);$repeatMonthlyDay.find('label.radio-custom').addClass('checked');if(recur.BYSETPOS){$repeatMonthlyDay.find('.month-day-pos').selectlist('selectByValue',recur.BYSETPOS)}
$repeatMonthlyDay.find('.month-days').selectlist('selectByValue',recur.BYDAY)}
item='monthly'}else if(recur.FREQ==='YEARLY'){this.$element.find('.repeat-yearly input').removeAttr('checked').removeClass('checked');this.$element.find('.repeat-yearly label.radio-custom').removeClass('checked');if(recur.BYMONTHDAY){$repeatYearlyDate=this.$element.find('.repeat-yearly-date');$repeatYearlyDate.find('input').addClass('checked').prop('checked',!0);$repeatYearlyDate.find('label.radio-custom').addClass('checked');if(recur.BYMONTH){$repeatYearlyDate.find('.year-month').selectlist('selectByValue',recur.BYMONTH)}
$repeatYearlyDate.find('.year-month-day').selectlist('selectByValue',recur.BYMONTHDAY)}else if(recur.BYSETPOS){$repeatYearlyDay=this.$element.find('.repeat-yearly-day');$repeatYearlyDay.find('input').addClass('checked').prop('checked',!0);$repeatYearlyDay.find('label.radio-custom').addClass('checked');$repeatYearlyDay.find('.year-month-day-pos').selectlist('selectByValue',recur.BYSETPOS);if(recur.BYDAY){$repeatYearlyDay.find('.year-month-days').selectlist('selectByValue',recur.BYDAY)}
if(recur.BYMONTH){$repeatYearlyDay.find('.year-month').selectlist('selectByValue',recur.BYMONTH)}}
item='yearly'}else{item='none'}
if(recur.COUNT){this.$endAfter.spinbox('value',parseInt(recur.COUNT,10));this.$endSelect.selectlist('selectByValue','after')}else if(recur.UNTIL){var untilSplit,untilDate;if(recur.UNTIL.length===8){untilSplit=recur.UNTIL.split('');untilSplit.splice(4,0,'-');untilSplit.splice(7,0,'-');untilDate=untilSplit.join('')}
var timeZone=this.$timeZone.selectlist('selectedItem');var timezoneOffset=(timeZone.offset==='+00:00')?'Z':timeZone.offset;var utcEndHours=this.setUtcTime(untilDate,startTime.time24HourFormat,timezoneOffset);this.$endDate.datepicker('setDate',utcEndHours);this.$endSelect.selectlist('selectByValue','date')}else{this.$endSelect.selectlist('selectByValue','never')}
this.endSelectChanged();if(recur.INTERVAL){this.$repeatIntervalSpinbox.spinbox('value',parseInt(recur.INTERVAL,10))}
this.$repeatIntervalSelect.selectlist('selectByValue',item);this.repeatIntervalSelectChanged()},_parseStartDateTime:function(startTimeISO8601){var startTime={};var startDate,startDateTimeISO8601FormatSplit,hours,minutes,period;startTime.time24HourFormat=startTimeISO8601.split('+')[0].split('-')[0];if(startTimeISO8601.search(/\+/)>-1){startTime.timeZoneOffset='+'+$.trim(startTimeISO8601.split('+')[1])}else if(startTimeISO8601.search(/\-/)>-1){startTime.timeZoneOffset='-'+$.trim(startTimeISO8601.split('-')[1])}else{startTime.timeZoneOffset='+00:00'}
startTime.time24HourFormatSplit=startTime.time24HourFormat.split(':');hours=parseInt(startTime.time24HourFormatSplit[0],10);minutes=(startTime.time24HourFormatSplit[1])?parseInt(startTime.time24HourFormatSplit[1].split('+')[0].split('-')[0].split('Z')[0],10):0;period=(hours<12)?'AM':'PM';if(hours===0){hours=12}else if(hours>12){hours-=12}
minutes=(minutes<10)?'0'+minutes:minutes;startTime.time12HourFormat=hours+':'+minutes;startTime.time12HourFormatWithPeriod=hours+':'+minutes+' '+period;return startTime},_parseTimeZone:function(options,startTime){startTime.timeZoneQuerySelector='';if(options.timeZone){if(typeof(options.timeZone)==='string'){startTime.timeZoneQuerySelector+='li[data-name="'+options.timeZone+'"]'}else{$.each(options.timeZone,function(key,value){startTime.timeZoneQuerySelector+='li[data-'+key+'="'+value+'"]'})}
startTime.timeZoneOffset=options.timeZone.offset}else if(options.startDateTime){startTime.timeZoneOffset=(startTime.timeZoneOffset==='+00:00')?'Z':startTime.timeZoneOffset;startTime.timeZoneQuerySelector+='li[data-offset="'+startTime.timeZoneOffset+'"]'}else{startTime.timeZoneOffset='Z'}
return startTime.timeZoneOffset},_setTimeUI:function(time12HourFormatWithPeriod){this.$startTime.find('input').val(time12HourFormatWithPeriod);this.$startTime.combobox('selectByText',time12HourFormatWithPeriod)},_setTimeZoneUI:function(querySelector){this.$timeZone.selectlist('selectBySelector',querySelector)},setValue:function setValue(options){var startTime={};var startDateTime,startDate,startTimeISO8601,timeOffset,utcStartHours;if(options.startDateTime){startDateTime=options.startDateTime.split('T');startDate=startDateTime[0];startTimeISO8601=startDateTime[1];if(startTimeISO8601){startTime=this._parseStartDateTime(startTimeISO8601);this._setTimeUI(startTime.time12HourFormatWithPeriod)}else{startTime.time12HourFormat='00:00';startTime.time24HourFormat='00:00'}}else{startTime.time12HourFormat='00:00';startTime.time24HourFormat='00:00';var currentDate=this.$startDate.datepicker('getDate');startDate=currentDate.getFullYear()+'-'+currentDate.getMonth()+'-'+currentDate.getDate()}
this._parseTimeZone(options,startTime);if(startTime.timeZoneQuerySelector){this._setTimeZoneUI(startTime.timeZoneQuerySelector)}
if(options.recurrencePattern){this._parseAndSetRecurrencePattern(options.recurrencePattern,startTime)}
utcStartHours=this.setUtcTime(startDate,startTime.time24HourFormat,startTime.timeZoneOffset);this.$startDate.datepicker('setDate',utcStartHours)},toggleState:function toggleState(action){this.$element.find('.combobox').combobox(action);this.$element.find('.datepicker').datepicker(action);this.$element.find('.selectlist').selectlist(action);this.$element.find('.spinbox').spinbox(action);this.$element.find('.radio-custom').radio(action);if(action==='disable'){action='addClass'}else{action='removeClass'}
this.$element.find('.repeat-days-of-the-week .btn-group')[action]('disabled')},value:function value(options){if(options){return this.setValue(options)}else{return this.getValue()}}};$.fn.scheduler=function scheduler(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.scheduler');var options=typeof option==='object'&&option;if(!data){$this.data('fu.scheduler',(data=new Scheduler(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.scheduler.defaults={};$.fn.scheduler.Constructor=Scheduler;$.fn.scheduler.noConflict=function noConflict(){$.fn.scheduler=old;return this};$(document).on('mousedown.fu.scheduler.data-api','[data-initialize=scheduler]',function(e){var $control=$(e.target).closest('.scheduler');if(!$control.data('fu.scheduler')){$control.scheduler($control.data())}});$(function(){$('[data-initialize=scheduler]').each(function(){var $this=$(this);if($this.data('scheduler'))return;$this.scheduler($this.data())})})})(jQuery);(function($){var old=$.fn.picker;var Picker=function Picker(element,options){var self=this;this.$element=$(element);this.options=$.extend({},$.fn.picker.defaults,options);this.$accept=this.$element.find('.picker-accept');this.$cancel=this.$element.find('.picker-cancel');this.$trigger=this.$element.find('.picker-trigger');this.$footer=this.$element.find('.picker-footer');this.$header=this.$element.find('.picker-header');this.$popup=this.$element.find('.picker-popup');this.$body=this.$element.find('.picker-body');this.clickStamp='_';this.isInput=this.$trigger.is('input');this.$trigger.on('keydown.fu.picker',$.proxy(this.keyComplete,this));this.$trigger.on('focus.fu.picker',$.proxy(function inputFocus(e){if(typeof e==="undefined"||$(e.target).is('input[type=text]')){$.proxy(this.show(),this)}},this));this.$trigger.on('click.fu.picker',$.proxy(function triggerClick(e){if(!$(e.target).is('input[type=text]')){$.proxy(this.toggle(),this)}else{$.proxy(this.show(),this)}},this));this.$accept.on('click.fu.picker',$.proxy(this.complete,this,'accepted'));this.$cancel.on('click.fu.picker',function(e){e.preventDefault();self.complete('cancelled')})};var _isOffscreen=function _isOffscreen(picker){var windowHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var scrollTop=$(document).scrollTop();var popupTop=picker.$popup.offset();var popupBottom=popupTop.top+picker.$popup.outerHeight(!0);if(popupBottom>windowHeight+scrollTop||popupTop.top<scrollTop){return!0}else{return!1}};var _display=function _display(picker){picker.$popup.css('visibility','hidden');_showBelow(picker);if(_isOffscreen(picker)){_showAbove(picker);if(_isOffscreen(picker)){_showBelow(picker)}}
picker.$popup.css('visibility','visible')};var _showAbove=function _showAbove(picker){picker.$popup.css('top',-picker.$popup.outerHeight(!0)+'px')};var _showBelow=function _showBelow(picker){picker.$popup.css('top',picker.$trigger.outerHeight(!0)+'px')};Picker.prototype={constructor:Picker,complete:function complete(action){var EVENT_CALLBACK_MAP={'accepted':'onAccept','cancelled':'onCancel','exited':'onExit'};var func=this.options[EVENT_CALLBACK_MAP[action]];var obj={contents:this.$body};if(func){func(obj);this.$element.trigger(action+'.fu.picker',obj)}else{this.$element.trigger(action+'.fu.picker',obj);this.hide()}},keyComplete:function keyComplete(e){if(this.isInput&&e.keyCode===13){this.complete('accepted');this.$trigger.blur()}else if(e.keyCode===27){this.complete('exited');this.$trigger.blur()}},destroy:function destroy(){this.$element.remove();$(document).off('click.fu.picker.externalClick.'+this.clickStamp);return this.$element[0].outerHTML},disable:function disable(){this.$element.addClass('disabled');this.$trigger.attr('disabled','disabled')},enable:function enable(){this.$element.removeClass('disabled');this.$trigger.removeAttr('disabled')},toggle:function toggle(){if(this.$element.hasClass('showing')){this.hide()}else{this.show()}},hide:function hide(){if(!this.$element.hasClass('showing')){return}
this.$element.removeClass('showing');$(document).off('click.fu.picker.externalClick.'+this.clickStamp);this.$element.trigger('hidden.fu.picker')},externalClickListener:function externalClickListener(e,force){if(force===!0||this.isExternalClick(e)){this.complete('exited')}},isExternalClick:function isExternalClick(e){var el=this.$element.get(0);var exceptions=this.options.externalClickExceptions||[];var $originEl=$(e.target);var i,l;if(e.target===el||$originEl.parents('.picker:first').get(0)===el){return!1}else{for(i=0,l=exceptions.length;i<l;i++){if($originEl.is(exceptions[i])||$originEl.parents(exceptions[i]).length>0){return!1}}}
return!0},show:function show(){var other;other=$(document).find('.picker.showing');if(other.length>0){if(other.data('fu.picker')&&other.data('fu.picker').options.explicit){return}
other.picker('externalClickListener',{},!0)}
this.$element.addClass('showing');_display(this);this.$element.trigger('shown.fu.picker');this.clickStamp=new Date().getTime()+(Math.floor(Math.random()*100)+1);if(!this.options.explicit){$(document).on('click.fu.picker.externalClick.'+this.clickStamp,$.proxy(this.externalClickListener,this))}}};$.fn.picker=function picker(option){var args=Array.prototype.slice.call(arguments,1);var methodReturn;var $set=this.each(function(){var $this=$(this);var data=$this.data('fu.picker');var options=typeof option==='object'&&option;if(!data){$this.data('fu.picker',(data=new Picker(this,options)))}
if(typeof option==='string'){methodReturn=data[option].apply(data,args)}});return(methodReturn===undefined)?$set:methodReturn};$.fn.picker.defaults={onAccept:undefined,onCancel:undefined,onExit:undefined,externalClickExceptions:[],explicit:!1};$.fn.picker.Constructor=Picker;$.fn.picker.noConflict=function noConflict(){$.fn.picker=old;return this};$(document).on('focus.fu.picker.data-api','[data-initialize=picker]',function(e){var $control=$(e.target).closest('.picker');if(!$control.data('fu.picker')){$control.picker($control.data())}});$(function(){$('[data-initialize=picker]').each(function(){var $this=$(this);if($this.data('fu.picker'))return;$this.picker($this.data())})})})(jQuery)}))
